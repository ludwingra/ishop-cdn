!function(){function e(t,r,n){function i(s,o){if(!r[s]){if(!t[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){var r=t[s][1][e];return i(r?r:e)},c,c.exports,e,t,r,n)}return r[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}return e}()({1:[function(e,t,r){"use strict";var n="f7c9180f-5c45-47b4-8de4-428015f096c0",i=!1,a=window||self;try{i=!!a.localStorage.getItem(n)}catch(s){}t.exports=i},{}],2:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/typeof")),a=e("../enabled");t.exports=function(e){return function(){if(a&&"object"===(0,i["default"])(window.console)&&"function"==typeof console[e])return console[e].apply(console,Array.prototype.slice.call(arguments,0))}}},{"../enabled":1,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/typeof":27}],3:[function(e,t,r){"use strict";t.exports=e("./internal/expose")("log")},{"./internal/expose":2}],4:[function(e,t,r){"use strict";t.exports=e("./internal/expose")("warn")},{"./internal/expose":2}],5:[function(e,t,r){"use strict";t.exports={EventEmitterMicro:e("./ac-event-emitter-micro/EventEmitterMicro")}},{"./ac-event-emitter-micro/EventEmitterMicro":6}],6:[function(e,t,r){"use strict";function n(){this._events={}}var i=n.prototype;i.on=function(e,t){this._events[e]=this._events[e]||[],this._events[e].unshift(t)},i.once=function(e,t){function r(i){n.off(e,r),void 0!==i?t(i):t()}var n=this;this.on(e,r)},i.off=function(e,t){if(this.has(e)){if(1===arguments.length)return this._events[e]=null,void delete this._events[e];var r=this._events[e].indexOf(t);r!==-1&&this._events[e].splice(r,1)}},i.trigger=function(e,t){if(this.has(e))for(var r=this._events[e].length-1;r>=0;r--)void 0!==t?this._events[e][r](t):this._events[e][r]()},i.has=function(e){return e in this._events!=!1&&0!==this._events[e].length},i.destroy=function(){for(var e in this._events)this._events[e]=null;this._events=null},t.exports=n},{}],7:[function(e,t,r){function n(e){if(Array.isArray(e))return e}t.exports=n},{}],8:[function(e,t,r){function n(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}t.exports=n},{}],9:[function(e,t,r){function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.exports=n},{}],10:[function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.exports=n},{}],11:[function(e,t,r){function n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function i(e,r,s){return n()?t.exports=i=Reflect.construct:t.exports=i=function(e,t,r){var n=[null];n.push.apply(n,t);var i=Function.bind.apply(e,n),s=new i;return r&&a(s,r.prototype),s},i.apply(null,arguments)}var a=e("./setPrototypeOf");t.exports=i},{"./setPrototypeOf":23}],12:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}t.exports=i},{}],13:[function(e,t,r){function n(e,r,a){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=n=Reflect.get:t.exports=n=function(e,t,r){var n=i(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}},n(e,r,a||e)}var i=e("./superPropBase");t.exports=n},{"./superPropBase":25}],14:[function(e,t,r){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}t.exports=n},{}],15:[function(e,t,r){function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}var i=e("./setPrototypeOf");t.exports=n},{"./setPrototypeOf":23}],16:[function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}t.exports=n},{}],17:[function(e,t,r){function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{"default":e};var t=n();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r["default"]=e,t&&t.set(e,r),r}var a=e("../helpers/typeof");t.exports=i},{"../helpers/typeof":27}],18:[function(e,t,r){function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}t.exports=n},{}],19:[function(e,t,r){function n(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(l){i=!0,a=l}finally{try{n||null==o["return"]||o["return"]()}finally{if(i)throw a}}return r}}t.exports=n},{}],20:[function(e,t,r){function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}t.exports=n},{}],21:[function(e,t,r){function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}t.exports=n},{}],22:[function(e,t,r){function n(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?a(e):t}var i=e("../helpers/typeof"),a=e("./assertThisInitialized");t.exports=n},{"../helpers/typeof":27,"./assertThisInitialized":9}],23:[function(e,t,r){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,r)}t.exports=n},{}],24:[function(e,t,r){function n(e,t){return i(e)||a(e,t)||s()}var i=e("./arrayWithHoles"),a=e("./iterableToArrayLimit"),s=e("./nonIterableRest");t.exports=n},{"./arrayWithHoles":7,"./iterableToArrayLimit":19,"./nonIterableRest":20}],25:[function(e,t,r){function n(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=i(e),null!==e););return e}var i=e("./getPrototypeOf");t.exports=n},{"./getPrototypeOf":14}],26:[function(e,t,r){function n(e){return i(e)||a(e)||s()}var i=e("./arrayWithoutHoles"),a=e("./iterableToArray"),s=e("./nonIterableSpread");t.exports=n},{"./arrayWithoutHoles":8,"./iterableToArray":18,"./nonIterableSpread":21}],27:[function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=i=function(e){return n(e)}:t.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},i(e)}t.exports=i},{}],28:[function(e,t,r){var n=function(e){"use strict";function t(e,t,r,i){var a=t&&t.prototype instanceof n?t:n,s=Object.create(a.prototype),o=new m(i||[]);return s._invoke=l(e,r,o),s}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function a(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function o(e){function t(n,i,a,s){var o=r(e[n],e,i);if("throw"!==o.type){var l=o.arg,u=l.value;return u&&"object"==typeof u&&y.call(u,"__await")?Promise.resolve(u.__await).then(function(e){t("next",e,a,s)},function(e){t("throw",e,a,s)}):Promise.resolve(u).then(function(e){l.value=e,a(l)},function(e){return t("throw",e,a,s)})}s(o.arg)}function n(e,r){function n(){return new Promise(function(n,i){t(e,r,n,i)})}return i=i?i.then(n,n):n()}var i;this._invoke=n}function l(e,t,n){var i=C;return function(a,s){if(i===w)throw new Error("Generator is already running");if(i===A){if("throw"===a)throw s;return p()}for(n.method=a,n.arg=s;;){var o=n.delegate;if(o){var l=u(o,n);if(l){if(l===S)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===C)throw i=A,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=w;var c=r(e,t,n);if("normal"===c.type){if(i=n.done?A:k,c.arg===S)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=A,n.method="throw",n.arg=c.arg)}}}function u(e,t){var n=e.iterator[t.method];if(n===d){if(t.delegate=null,"throw"===t.method){if(e.iterator["return"]&&(t.method="return",t.arg=d,u(e,t),"throw"===t.method))return S;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,S;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=d),t.delegate=null,S):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,S)}function c(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function h(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function m(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(c,this),this.reset(!0)}function f(e){if(e){var t=e[_];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function i(){for(;++r<e.length;)if(y.call(e,r))return i.value=e[r],i.done=!1,i;return i.value=d,i.done=!0,i};return n.next=n}}return{next:p}}function p(){return{value:d,done:!0}}var d,b=Object.prototype,y=b.hasOwnProperty,v="function"==typeof Symbol?Symbol:{},_=v.iterator||"@@iterator",g=v.asyncIterator||"@@asyncIterator",E=v.toStringTag||"@@toStringTag";e.wrap=t;var C="suspendedStart",k="suspendedYield",w="executing",A="completed",S={},O={};O[_]=function(){return this};var P=Object.getPrototypeOf,x=P&&P(P(f([])));x&&x!==b&&y.call(x,_)&&(O=x);var T=a.prototype=n.prototype=Object.create(O);return i.prototype=T.constructor=a,a.constructor=i,a[E]=i.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,E in e||(e[E]="GeneratorFunction")),e.prototype=Object.create(T),e},e.awrap=function(e){return{__await:e}},s(o.prototype),o.prototype[g]=function(){return this},e.AsyncIterator=o,e.async=function(r,n,i,a){var s=new o(t(r,n,i,a));return e.isGeneratorFunction(n)?s:s.next().then(function(e){return e.done?e.value:s.next()})},s(T),T[E]="Generator",T[_]=function(){return this},T.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=f,m.prototype={constructor:m,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=d,this.done=!1,this.delegate=null,this.method="next",this.arg=d,this.tryEntries.forEach(h),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=d)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return a.type="throw",a.arg=e,r.next=t,n&&(r.method="next",r.arg=d),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var s=y.call(i,"catchLoc"),o=y.call(i,"finallyLoc");if(s&&o){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&y.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,S):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),S},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),h(r),S}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;h(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:f(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=d),S}},e}("object"==typeof t?t.exports:{});try{regeneratorRuntime=n}catch(i){Function("r","regeneratorRuntime = r")(n)}},{}],29:[function(e,t,r){t.exports=e("regenerator-runtime")},{"regenerator-runtime":28}],30:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/typeof")),a=e("./extend");t.exports=function(e,t){if("object"!==(0,i["default"])(e))throw new TypeError("defaults: must provide a defaults object");if(t=t||{},"object"!==(0,i["default"])(t))throw new TypeError("defaults: options must be a typeof object");return a({},e,t)}},{"./extend":31,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/typeof":27}],31:[function(e,t,r){"use strict";e("@marcom/ac-polyfills/Array/prototype.forEach");var n=Object.prototype.hasOwnProperty;t.exports=function(){var e,t;return e=arguments.length<2?[{},arguments[0]]:[].slice.call(arguments),t=e.shift(),e.forEach(function(e){if(null!=e)for(var r in e)n.call(e,r)&&(t[r]=e[r])}),t}},{"@marcom/ac-polyfills/Array/prototype.forEach":void 0}],32:[function(e,t,r){"use strict";function n(e){s.call(this),this.options=i(u,e),this.loadingOptions=null,this.els=[],this.loadingQueue=null,this._queueItems=[],this._queueItemsObj={},this._loadOrder=[],this._timeout=null,this._didCallLoad=!1}var i=e("@marcom/ac-object/defaults"),a=e("@marcom/ac-queue").LiveQueue,s=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,o=e("@marcom/ac-raf-emitter/update"),l=e("@marcom/ac-raf-emitter/draw"),u={container:document.body,includeContainer:!1},c={loadingPoolSize:8,timeout:null,imageDataAttribute:"data-progressive-image",imageAnimate:!0,imageAnimateClass:"progressive-image-animated"};n.Events={ImageLoad:"image-load",Complete:"complete"};var h=n.prototype=Object.create(s.prototype);h.load=function(e){this._didCallLoad||(this._didCallLoad=!0,this.loadingOptions=i(c,e),this.loadingQueue=new a(this.loadingOptions.loadingPoolSize),this.els=Array.from(this._getProgressiveImageElements()),this.options.includeContainer&&this.options.container.hasAttribute(this._getProgressiveImageDataAttribute())&&this.els.unshift(this.options.container),l(function(){var e,t,r=this.els.length;for(e=0;e<r;e++)t={queueItem:this.loadingQueue.enqueue(this._loadNextItem.bind(this,e),e),el:this.els[e],id:e},this._queueItems.push(t),this._queueItemsObj[e]=t,this.loadingOptions.imageAnimate&&this.els[e].classList.add(this.loadingOptions.imageAnimateClass);o(function(){this.loadingQueue.start(),"number"==typeof this.loadingOptions.timeout&&(this._timeout=setTimeout(this.cancel.bind(this),this.loadingOptions.timeout))}.bind(this))}.bind(this)))},h.setVisible=function(e){return new Promise(function(t,r){l(function(){e.removeAttribute(this._getProgressiveImageDataAttribute()),t(),e=null}.bind(this))}.bind(this))},h.cancel=function(){if(this.els){var e,t=this.els.length;for(e=0;e<t;e++)this.setVisible(this.els[e]),this.loadingOptions.imageAnimate&&l(function(){this.els[e].setAttribute("data-progressive-image-loaded","")}.bind(this,e))}this._handleLoadingComplete()},h.destroy=function(){this.cancel(),this.off(),s.prototype.destroy.call(this)},h._loadNextItem=function(e){return new Promise(function(e,t,r){var n=this._queueItemsObj[e];this._loadAndSetVisible(n.el).then(function(){var e=this._queueItems.indexOf(n);this._queueItems.splice(e,1),this._queueItemsObj[n.id]=null,t(),this._handleImageLoad(n.el),n=t=null,1===this.loadingQueue.count()&&this._handleLoadingComplete()}.bind(this))}.bind(this,e))},h._loadAndSetVisible=function(e){return new Promise(function(t,r){this.setVisible(e).then(function(){this._getBackgroundImageSrc(e).then(function(r){this._loadImage(r).then(t),e=null}.bind(this))}.bind(this))}.bind(this))},h._getBackgroundImageSrc=function(e){return new Promise(function(t,r){o(function(){var r=e.currentStyle;return r||(r=window.getComputedStyle(e,!1)),e=null,0===r.backgroundImage.indexOf("url(")?void t(r.backgroundImage.slice(4,-1).replace(/"/g,"")):void t(null)}.bind(this))}.bind(this))},h._getProgressiveImageDataAttribute=function(){return this.loadingOptions.imageDataAttribute},h._getProgressiveImageCSSQuery=function(){return"["+this._getProgressiveImageDataAttribute()+"]"},h._getProgressiveImageElements=function(){return this.options.container.querySelectorAll(this._getProgressiveImageCSSQuery())||[]},h._loadImage=function(e){return new Promise(this._loadImagePromiseFunc.bind(this,e))},h._loadImagePromiseFunc=function(e,t,r){function n(){this.removeEventListener("load",n),t(this),t=null}if(!e)return void t(null);var i=new Image;i.addEventListener("load",n),i.src=e},h._clearTimeout=function(){this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null)},h._handleImageLoad=function(e){l(function(){this.trigger(n.Events.ImageLoad,e),this.loadingOptions.imageAnimate&&e.setAttribute("data-progressive-image-loaded",""),e=null}.bind(this))},h._handleLoadingComplete=function(){this.loadingQueue.stop(),this._clearTimeout(),this.trigger(n.Events.Complete)},t.exports=n},{"@marcom/ac-event-emitter-micro":5,"@marcom/ac-object/defaults":30,"@marcom/ac-queue":33,"@marcom/ac-raf-emitter/draw":44,"@marcom/ac-raf-emitter/update":45}],33:[function(e,t,r){"use strict";t.exports={Queue:e("./ac-queue/Queue"),QueueItem:e("./ac-queue/QueueItem"),LiveQueue:e("./ac-queue/LiveQueue")}},{"./ac-queue/LiveQueue":34,"./ac-queue/Queue":35,"./ac-queue/QueueItem":36}],34:[function(e,t,r){"use strict";function n(e){this._queue=new i,this._maxProcesses=e||1,this._availableSlots=this._maxProcesses,this._rafId=0,this._isRunning=!1,this._boundFunctions={_run:this._run.bind(this),_releaseSlot:this._releaseSlot.bind(this)}}e("@marcom/ac-polyfills/Promise"),e("@marcom/ac-polyfills/requestAnimationFrame"),e("@marcom/ac-polyfills/Function/prototype.bind");var i=e("./Queue"),a=e("./QueueItem"),s=n.prototype;s.start=function(){this._isRunning&&cancelAnimationFrame(this._rafId),this._rafId=requestAnimationFrame(this._boundFunctions._run),this._isRunning=!0},s.pause=function(){this._isRunning&&(cancelAnimationFrame(this._rafId),this._rafId=0),this._isRunning=!1},s.stop=function(){this.pause(),this.clear()},s.enqueue=function(e,t){if("function"!=typeof e)throw new Error("LiveQueue can only enqueue functions");void 0===t&&(t=i.PRIORITY_DEFAULT);var r=new a(e,t);return this.enqueueQueueItem(r)},s.enqueueQueueItem=function(e){return this._queue.enqueueQueueItem(e),this._isRunning&&0===this._rafId&&this.start(),e},s.dequeueQueueItem=function(e){return this._queue.dequeueQueueItem(e)},s.clear=function(){this._queue=new i},s.destroy=function(){this.pause(),this._isRunning=!1,this._queue=null,this._boundFunctions=null},s.count=function(){return this._queue.count()+this.pending()},s.pending=function(){return this._maxProcesses-this._availableSlots},s.isEmpty=function(){return 0===this.count()},s._run=function(){if(this._isRunning&&(this._rafId=requestAnimationFrame(this._boundFunctions._run),!this._queue.isEmpty()&&0!==this._availableSlots)){var e=this._queue.dequeue(),t=e.data();this._isPromise(t)&&(this._retainSlot(),t.then(this._boundFunctions._releaseSlot,this._boundFunctions._releaseSlot)),this._stopRunningIfDone()}},s._retainSlot=function(){this._availableSlots--},s._releaseSlot=function(){this._availableSlots++,this._stopRunningIfDone()},s._stopRunningIfDone=function(){0!=this._rafId&&0===this._queue.count()&&this._availableSlots==this._maxProcesses&&(cancelAnimationFrame(this._rafId),this._rafId=0)},s._isPromise=function(e){return!(!e||"function"!=typeof e.then)},t.exports=n},{"./Queue":35,"./QueueItem":36,"@marcom/ac-polyfills/Function/prototype.bind":void 0,"@marcom/ac-polyfills/Promise":void 0,"@marcom/ac-polyfills/requestAnimationFrame":void 0}],35:[function(e,t,r){"use strict";function n(){this._items=[]}var i=e("./QueueItem"),a=n.prototype;a.enqueue=function(e,t){void 0===t&&(t=n.PRIORITY_DEFAULT);var r=new i(e,t);return this.enqueueQueueItem(r)},a.enqueueQueueItem=function(e){return this._items.indexOf(e)===-1&&this._items.push(e),e},a.dequeue=function(){this._heapSort();var e=this._items.length-1,t=this._items[0];return this._items[0]=this._items[e],this._items.pop(),t},a.dequeueQueueItem=function(e){var t=this._items.indexOf(e);return t>-1&&this._items.splice(t,1),e},a.peek=function(){return 0==this.count()?null:(this._heapSort(),this._items[0])},a.isEmpty=function(){return 0===this._items.length},a.count=function(){return this._items.length},a.toString=function(){for(var e=["Queue total items: "+this.count()+"\n"],t=0;t<this.count();++t)e.push(this._items[t].toString()+"\n");return e.join("")},a._heapSort=function(){for(var e=0,t=this._items.length-1;t>=0;t--)for(var r=t;r>0;){e++;var n=Math.floor((r-1)/2);if(this._items[r].compareTo(this._items[n])>=0)break;var i=this._items[r];this._items[r]=this._items[n],this._items[n]=i,r=n}},n.PRIORITY_LOW=10,n.PRIORITY_DEFAULT=5,n.PRIORITY_HIGH=1,t.exports=n},{"./QueueItem":36}],36:[function(e,t,r){"use strict";function n(e,t){this.priority=t,this.data=e,this.insertionOrder=i++}var i=0,a=n.prototype;a.compareTo=function(e){return this.priority<e.priority?-1:this.priority>e.priority?1:this.insertionOrder<e.insertionOrder?-1:1},a.toString=function(){return"QueueItem {priority:"+this.priority+",\tdata:"+this.data+"\tinsertionOrder:"+this.insertionOrder+"}"},t.exports=n},{}],37:[function(e,t,r){"use strict";var n=e("@marcom/ac-shared-instance").SharedInstance,i="ac-raf-emitter-id-generator:sharedRAFEmitterIDGeneratorInstance",a="1.0.3",s=function(){this._currentID=0};s.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},t.exports=n.share(i,a,s)},{"@marcom/ac-shared-instance":46}],38:[function(e,t,r){"use strict";function n(e){e=e||{},this._reset(),this._willRun=!1,this._totalSubscribeCount=-1,this._requestAnimationFrame=window.requestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}e("@marcom/ac-polyfills/performance/now");var i;i=n.prototype,i.subscribe=function(e,t){return this._totalSubscribeCount++,this._nextFrameSubscribers[e.id]||(t?this._nextFrameSubscribersOrder.unshift(e.id):this._nextFrameSubscribersOrder.push(e.id),this._nextFrameSubscribers[e.id]=e,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},i.unsubscribe=function(e){return!!this._nextFrameSubscribers[e.id]&&(this._nextFrameSubscribers[e.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},i.trigger=function(e,t){var r;for(r=0;r<this._subscriberArrayLength;r++)null!==this._subscribers[this._subscribersOrder[r]]&&this._subscribers[this._subscribersOrder[r]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[r]].trigger(e,t)},i.destroy=function(){var e=this._cancel();return this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,e},i.useExternalAnimationFrame=function(e){if("boolean"==typeof e){var t=this._isUsingExternalAnimationFrame;return e&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||e||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=e,e?this._boundOnExternalAnimationFrame:t||!1}},i._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),!0},i._cancel=function(){var e=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,e=!0),this._isRunning||this._reset(),e},i._onSubscribersAnimationFrameStart=function(e){var t;for(t=0;t<this._subscriberArrayLength;t++)null!==this._subscribers[this._subscribersOrder[t]]&&this._subscribers[this._subscribersOrder[t]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[t]]._onAnimationFrameStart(e)},i._onSubscribersAnimationFrameEnd=function(e){var t;for(t=0;t<this._subscriberArrayLength;t++)null!==this._subscribers[this._subscribersOrder[t]]&&this._subscribers[this._subscribersOrder[t]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[t]]._onAnimationFrameEnd(e)},i._onAnimationFrame=function(e){this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=e-this.lastFrameTime,this.lastFrameTime=e,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=e,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this._onSubscribersAnimationFrameStart(this._rafData),this.trigger("update",this._rafData),this.trigger("external",this._rafData),this.trigger("draw",this._rafData),this._onSubscribersAnimationFrameEnd(this._rafData),this._willRun||this._reset()},i._onExternalAnimationFrame=function(e){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(e)},i._reset=function(){this._rafData={time:0,delta:0,fps:0,naturalFps:0,timeNow:0},this._subscribers={},this._subscribersOrder=[],this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0},t.exports=n},{"@marcom/ac-polyfills/performance/now":void 0}],39:[function(e,t,r){"use strict";var n=e("@marcom/ac-shared-instance").SharedInstance,i="ac-raf-executor:sharedRAFExecutorInstance",a="2.0.1",s=e("./RAFExecutor");t.exports=n.share(i,a,s)},{"./RAFExecutor":38,"@marcom/ac-shared-instance":46}],40:[function(e,t,r){"use strict";function n(e){e=e||{},a.call(this),this.id=o.getNewID(),this.executor=e.executor||s,this._reset(),this._willRun=!1,this._didDestroy=!1}var i,a=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,s=e("@marcom/ac-raf-executor/sharedRAFExecutorInstance"),o=e("@marcom/ac-raf-emitter-id-generator/sharedRAFEmitterIDGeneratorInstance");i=n.prototype=Object.create(a.prototype),i.run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},i.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},i.destroy=function(){var e=this.willRun();return this.cancel(),this.executor=null,a.prototype.destroy.call(this),this._didDestroy=!0,e},i.willRun=function(){return this._willRun},i.isRunning=function(){return this._isRunning},i._subscribe=function(){return this.executor.subscribe(this)},i._unsubscribe=function(){return this.executor.unsubscribe(this)},i._onAnimationFrameStart=function(e){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",e))},i._onAnimationFrameEnd=function(e){this._willRun||(this.trigger("stop",e),this._reset())},i._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},t.exports=n},{"@marcom/ac-event-emitter-micro":5,"@marcom/ac-raf-emitter-id-generator/sharedRAFEmitterIDGeneratorInstance":37,"@marcom/ac-raf-executor/sharedRAFExecutorInstance":39}],41:[function(e,t,r){"use strict";var n=e("./SingleCallRAFEmitter"),i=function(e){this.rafEmitter=new n,this.rafEmitter.on(e,this._onRAFExecuted.bind(this)),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._frameCallbacks=[],this._nextFrameCallbacks=[],this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},a=i.prototype;a.requestAnimationFrame=function(e){return this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,e),this._nextFrameCallbacksLength+=2,this._currentFrameID},a.cancelAnimationFrame=function(e){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(e),this._cancelFrameIdx!==-1&&(this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel())},a._onRAFExecuted=function(e){for(this._frameCallbacks=this._nextFrameCallbacks,this._frameCallbackLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks=[],this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](e.time,e)},t.exports=i},{"./SingleCallRAFEmitter":43}],42:[function(e,t,r){"use strict";var n=e("./RAFInterface"),i=function(){this.events={}},a=i.prototype;a.requestAnimationFrame=function(e){return this.events[e]||(this.events[e]=new n(e)),this.events[e].requestAnimationFrame},a.cancelAnimationFrame=function(e){return this.events[e]||(this.events[e]=new n(e)),this.events[e].cancelAnimationFrame},t.exports=new i},{"./RAFInterface":41}],43:[function(e,t,r){"use strict";var n=e("./RAFEmitter"),i=function(e){n.call(this,e)},a=i.prototype=Object.create(n.prototype);a._subscribe=function(){return this.executor.subscribe(this,!0)},t.exports=i},{"./RAFEmitter":40}],44:[function(e,t,r){"use strict";var n=e("./RAFInterfaceController");t.exports=n.requestAnimationFrame("draw")},{"./RAFInterfaceController":42}],45:[function(e,t,r){"use strict";var n=e("./RAFInterfaceController");t.exports=n.requestAnimationFrame("update")},{"./RAFInterfaceController":42}],46:[function(e,t,r){"use strict";t.exports={SharedInstance:e("./ac-shared-instance/SharedInstance")}},{"./ac-shared-instance/SharedInstance":47}],47:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/typeof")),a=window,s="AC",o="SharedInstance",l=a[s],u=function(){
var e={};return{get:function(t,r){var n=null;return e[t]&&e[t][r]&&(n=e[t][r]),n},set:function(t,r,n){return e[t]||(e[t]={}),"function"==typeof n?e[t][r]=new n:e[t][r]=n,e[t][r]},share:function(e,t,r){var n=this.get(e,t);return n||(n=this.set(e,t,r)),n},remove:function(t,r){var n=(0,i["default"])(r);if("string"===n||"number"===n){if(!e[t]||!e[t][r])return;return void(e[t][r]=null)}e[t]&&(e[t]=null)}}}();l||(l=a[s]={}),l[o]||(l[o]=u),t.exports=l[o]},{"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/typeof":27}],48:[function(e,t,r){arguments[4][5][0].apply(r,arguments)},{"./ac-event-emitter-micro/EventEmitterMicro":49,dup:5}],49:[function(e,t,r){arguments[4][6][0].apply(r,arguments)},{dup:6}],50:[function(e,t,r){"use strict";t.exports={majorVersionNumber:"3.x"}},{}],51:[function(e,t,r){"use strict";function n(e){e=e||{},a.call(this),this.id=o.getNewID(),this.executor=e.executor||s,this._reset(),this._willRun=!1,this._didDestroy=!1}var i,a=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,s=e("./sharedRAFExecutorInstance"),o=e("./sharedRAFEmitterIDGeneratorInstance");i=n.prototype=Object.create(a.prototype),i.run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},i.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},i.destroy=function(){var e=this.willRun();return this.cancel(),this.executor=null,a.prototype.destroy.call(this),this._didDestroy=!0,e},i.willRun=function(){return this._willRun},i.isRunning=function(){return this._isRunning},i._subscribe=function(){return this.executor.subscribe(this)},i._unsubscribe=function(){return this.executor.unsubscribe(this)},i._onAnimationFrameStart=function(e){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",e))},i._onAnimationFrameEnd=function(e){this._willRun||(this.trigger("stop",e),this._reset())},i._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},t.exports=n},{"./sharedRAFEmitterIDGeneratorInstance":59,"./sharedRAFExecutorInstance":60,"@marcom/ac-event-emitter-micro":48}],52:[function(e,t,r){"use strict";function n(e){e=e||{},this._reset(),this.updatePhases(),this.eventEmitter=new a,this._willRun=!1,this._totalSubscribeCount=-1,this._requestAnimationFrame=window.requestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}var i,a=e("@marcom/ac-event-emitter-micro/EventEmitterMicro");i=n.prototype,i.frameRequestedPhase="requested",i.startPhase="start",i.runPhases=["update","external","draw"],i.endPhase="end",i.disabledPhase="disabled",i.beforePhaseEventPrefix="before:",i.afterPhaseEventPrefix="after:",i.subscribe=function(e,t){return this._totalSubscribeCount++,this._nextFrameSubscribers[e.id]||(t?this._nextFrameSubscribersOrder.unshift(e.id):this._nextFrameSubscribersOrder.push(e.id),this._nextFrameSubscribers[e.id]=e,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},i.subscribeImmediate=function(e,t){return this._totalSubscribeCount++,this._subscribers[e.id]||(t?this._subscribersOrder.splice(this._currentSubscriberIndex+1,0,e.id):this._subscribersOrder.unshift(e.id),this._subscribers[e.id]=e,this._subscriberArrayLength++,this._subscriberCount++),this._totalSubscribeCount},i.unsubscribe=function(e){return!!this._nextFrameSubscribers[e.id]&&(this._nextFrameSubscribers[e.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},i.getSubscribeID=function(){return this._totalSubscribeCount+=1},i.destroy=function(){var e=this._cancel();return this.eventEmitter.destroy(),this.eventEmitter=null,this.phases=null,this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,e},i.useExternalAnimationFrame=function(e){if("boolean"==typeof e){var t=this._isUsingExternalAnimationFrame;return e&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||e||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=e,e?this._boundOnExternalAnimationFrame:t||!1}},i.updatePhases=function(){this.phases||(this.phases=[]),this.phases.length=0,this.phases.push(this.frameRequestedPhase),this.phases.push(this.startPhase),Array.prototype.push.apply(this.phases,this.runPhases),this.phases.push(this.endPhase),this._runPhasesLength=this.runPhases.length,this._phasesLength=this.phases.length},i._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this.phase===this.disabledPhase&&(this.phaseIndex=0,this.phase=this.phases[this.phaseIndex]),!0},i._cancel=function(){var e=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,e=!0),this._isRunning||this._reset(),e},i._onAnimationFrame=function(e){for(this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this.phaseIndex=0,this.phase=this.phases[this.phaseIndex],this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=e-this.lastFrameTime,this.lastFrameTime=e,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=e,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameStart(this._rafData);for(this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._runPhaseIndex=0;this._runPhaseIndex<this._runPhasesLength;this._runPhaseIndex++){for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]].trigger(this.phase,this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase)}for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameEnd(this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._willRun?(this.phaseIndex=0,this.phaseIndex=this.phases[this.phaseIndex]):this._reset()},i._onExternalAnimationFrame=function(e){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(e)},i._reset=function(){this._rafData||(this._rafData={}),this._rafData.time=0,this._rafData.delta=0,this._rafData.fps=0,this._rafData.naturalFps=0,this._rafData.timeNow=0,this._subscribers={},this._subscribersOrder=[],this._currentSubscriberIndex=-1,this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0,this._runPhaseIndex=-1,this.phaseIndex=-1,this.phase=this.disabledPhase},t.exports=n},{"@marcom/ac-event-emitter-micro/EventEmitterMicro":49}],53:[function(e,t,r){"use strict";var n=e("./SingleCallRAFEmitter"),i=function(e){this.phase=e,this.rafEmitter=new n,this._cachePhaseIndex(),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._onBeforeRAFExecutorStart=this._onBeforeRAFExecutorStart.bind(this),this._onBeforeRAFExecutorPhase=this._onBeforeRAFExecutorPhase.bind(this),this._onAfterRAFExecutorPhase=this._onAfterRAFExecutorPhase.bind(this),this.rafEmitter.on(this.phase,this._onRAFExecuted.bind(this)),this.rafEmitter.executor.eventEmitter.on("before:start",this._onBeforeRAFExecutorStart),this.rafEmitter.executor.eventEmitter.on("before:"+this.phase,this._onBeforeRAFExecutorPhase),this.rafEmitter.executor.eventEmitter.on("after:"+this.phase,this._onAfterRAFExecutorPhase),this._frameCallbacks=[],this._currentFrameCallbacks=[],this._nextFrameCallbacks=[],this._phaseActive=!1,this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._currentFrameCallbacksLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},a=i.prototype;a.requestAnimationFrame=function(e,t){return t===!0&&this.rafEmitter.executor.phaseIndex>0&&this.rafEmitter.executor.phaseIndex<=this.phaseIndex?this._phaseActive?(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!0),this._frameCallbacks.push(this._currentFrameID,e),this._frameCallbackLength+=2):(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!1),this._currentFrameCallbacks.push(this._currentFrameID,e),this._currentFrameCallbacksLength+=2):(this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,e),this._nextFrameCallbacksLength+=2),this._currentFrameID},a.cancelAnimationFrame=function(e){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(e),this._cancelFrameIdx>-1?this._cancelNextAnimationFrame():(this._cancelFrameIdx=this._currentFrameCallbacks.indexOf(e),this._cancelFrameIdx>-1?this._cancelCurrentAnimationFrame():(this._cancelFrameIdx=this._frameCallbacks.indexOf(e),this._cancelFrameIdx>-1&&this._cancelRunningAnimationFrame()))},a._onRAFExecuted=function(e){for(this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](e.time,e);this._frameCallbacks.length=0,this._frameCallbackLength=0},a._onBeforeRAFExecutorStart=function(){Array.prototype.push.apply(this._currentFrameCallbacks,this._nextFrameCallbacks.splice(0,this._nextFrameCallbacksLength)),this._currentFrameCallbacksLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks.length=0,this._nextFrameCallbacksLength=0},a._onBeforeRAFExecutorPhase=function(){this._phaseActive=!0,Array.prototype.push.apply(this._frameCallbacks,this._currentFrameCallbacks.splice(0,this._currentFrameCallbacksLength)),this._frameCallbackLength=this._currentFrameCallbacksLength,this._currentFrameCallbacks.length=0,this._currentFrameCallbacksLength=0},a._onAfterRAFExecutorPhase=function(){this._phaseActive=!1},a._cachePhaseIndex=function(){this.phaseIndex=this.rafEmitter.executor.phases.indexOf(this.phase)},a._cancelRunningAnimationFrame=function(){this._frameCallbacks.splice(this._cancelFrameIdx,2),this._frameCallbackLength-=2},a._cancelCurrentAnimationFrame=function(){this._currentFrameCallbacks.splice(this._cancelFrameIdx,2),this._currentFrameCallbacksLength-=2},a._cancelNextAnimationFrame=function(){this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel()},t.exports=i},{"./SingleCallRAFEmitter":55}],54:[function(e,t,r){"use strict";var n=e("./RAFInterface"),i=function(){this.events={}},a=i.prototype;a.requestAnimationFrame=function(e){return this.events[e]||(this.events[e]=new n(e)),this.events[e].requestAnimationFrame},a.cancelAnimationFrame=function(e){return this.events[e]||(this.events[e]=new n(e)),this.events[e].cancelAnimationFrame},t.exports=new i},{"./RAFInterface":53}],55:[function(e,t,r){"use strict";var n=e("./RAFEmitter"),i=function(e){n.call(this,e)},a=i.prototype=Object.create(n.prototype);a._subscribe=function(){return this.executor.subscribe(this,!0)},t.exports=i},{"./RAFEmitter":51}],56:[function(e,t,r){"use strict";var n=e("./RAFInterfaceController");t.exports=n.cancelAnimationFrame("update")},{"./RAFInterfaceController":54}],57:[function(e,t,r){"use strict";var n=e("./RAFInterfaceController");t.exports=n.requestAnimationFrame("draw")},{"./RAFInterfaceController":54}],58:[function(e,t,r){"use strict";var n=e("./RAFInterfaceController");t.exports=n.requestAnimationFrame("external")},{"./RAFInterfaceController":54}],59:[function(e,t,r){"use strict";var n=e("@marcom/ac-shared-instance").SharedInstance,i=e("../.release-info.js").majorVersionNumber,a=function(){this._currentID=0};a.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},t.exports=n.share("@marcom/ac-raf-emitter/sharedRAFEmitterIDGeneratorInstance",i,a)},{"../.release-info.js":50,"@marcom/ac-shared-instance":62}],60:[function(e,t,r){"use strict";var n=e("@marcom/ac-shared-instance").SharedInstance,i=e("../.release-info.js").majorVersionNumber,a=e("./RAFExecutor");t.exports=n.share("@marcom/ac-raf-emitter/sharedRAFExecutorInstance",i,a)},{"../.release-info.js":50,"./RAFExecutor":52,"@marcom/ac-shared-instance":62}],61:[function(e,t,r){"use strict";var n=e("./RAFInterfaceController");t.exports=n.requestAnimationFrame("update")},{"./RAFInterfaceController":54}],62:[function(e,t,r){arguments[4][46][0].apply(r,arguments)},{"./ac-shared-instance/SharedInstance":63,dup:46}],63:[function(e,t,r){arguments[4][47][0].apply(r,arguments)},{"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/typeof":27,dup:47}],64:[function(e,t,r){"use strict";t.exports={version:"3.3.5",major:"3.x",majorMinor:"3.3"}},{}],65:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/assertThisInitialized")),u=n(e("@babel/runtime/helpers/inherits")),c=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,h=e("./Model/AnimSystemModel"),m=e("./Keyframes/Keyframe"),f=e("./Keyframes/KeyframeCSSClass"),p=e("./Keyframes/KeyframeDiscreteEvent"),d=e("./ScrollGroup"),b=e("./TimeGroup"),y=e("./TweenGroup"),v=e("./.release-info"),_={};"undefined"!=typeof window&&(_.update=e("@marcom/ac-raf-emitter/update"),_.cancelUpdate=e("@marcom/ac-raf-emitter/cancelUpdate"),_.external=e("@marcom/ac-raf-emitter/external"),_.draw=e("@marcom/ac-raf-emitter/draw"));var g=null,E=function(e){function t(){var e;if((0,i["default"])(this,t),e=(0,s["default"])(this,(0,o["default"])(t).call(this)),g)throw"You cannot create multiple AnimSystems. You probably want to create multiple groups instead. You can have unlimited groups on a page";return g=(0,l["default"])(e),e.groups=[],e.scrollSystems=[],e.timeSystems=[],e.tweenGroup=null,e._forceUpdateRAFId=-1,e.initialized=!1,e.model=h,e.version=v.version,e._resolveReady=function(){},e.ready=new Promise(function(t){return e._resolveReady=t}),e.onScroll=e.onScroll.bind((0,l["default"])(e)),e.onResizedDebounced=e.onResizedDebounced.bind((0,l["default"])(e)),e.onResizeImmediate=e.onResizeImmediate.bind((0,l["default"])(e)),e}return(0,u["default"])(t,e),(0,a["default"])(t,[{key:"initialize",value:function(){return this.initialized||"undefined"==typeof window?this.ready:(this.initialized=!0,this.timeSystems=[],this.scrollSystems=[],this.groups=[],this.setupEvents(),this.initializeResizeFilter(),this.initializeModel(),this.createDOMGroups(),this.createDOMKeyframes(),this.tweenGroup=new y(null,this),this.groups.push(this.tweenGroup),this._resolveReady(),this.ready)}},{key:"remove",value:function(){var e=this;return this.initialized?Promise.all(this.groups.map(function(e){return e.remove()})).then(function(){e.groups=null,e.scrollSystems=null,e.timeSystems=null,window.clearTimeout(h.RESIZE_TIMEOUT),window.removeEventListener("scroll",e.onScroll),window.removeEventListener("resize",e.onResizeImmediate),e._events={},e.initialized=!1,e.ready=new Promise(function(t){return e._resolveReady=t})}):(this.ready=new Promise(function(t){return e._resolveReady=t}),Promise.resolve())}},{key:"destroy",value:function(){return this.remove()}},{key:"createTimeGroup",value:function(e){var t=new b(e,this);return this.groups.push(t),this.timeSystems.push(t),this.trigger(h.EVENTS.ON_GROUP_CREATED,t),t}},{key:"createScrollGroup",value:function(e){if(!e)throw"AnimSystem scroll based groups must supply an HTMLElement";var t=new d(e,this);return this.groups.push(t),this.scrollSystems.push(t),this.trigger(h.EVENTS.ON_GROUP_CREATED,t),t}},{key:"removeGroup",value:function(e){var t=this;return Promise.all(e.keyframeControllers.map(function(t){return e.removeKeyframeController(t)})).then(function(){var r=t.groups.indexOf(e);r!==-1&&t.groups.splice(r,1),r=t.scrollSystems.indexOf(e),r!==-1&&t.scrollSystems.splice(r,1),r=t.timeSystems.indexOf(e),r!==-1&&t.timeSystems.splice(r,1),e.destroy()})}},{key:"createDOMGroups",value:function(){var e=this;document.body.setAttribute("data-anim-scroll-group","body"),document.querySelectorAll("[data-anim-scroll-group]").forEach(function(t){return e.createScrollGroup(t)}),document.querySelectorAll("[data-anim-time-group]").forEach(function(t){return e.createTimeGroup(t)}),this.trigger(h.EVENTS.ON_DOM_GROUPS_CREATED,this.groups)}},{key:"createDOMKeyframes",value:function(){var e=this,t=[];["data-anim-keyframe",m.DATA_ATTRIBUTE,f.DATA_ATTRIBUTE,p.DATA_ATTRIBUTE].forEach(function(e){for(var r=0;r<12;r++)t.push(e+(0===r?"":"-"+(r-1)))});for(var r=0;r<t.length;r++)for(var n=t[r],i=document.querySelectorAll("["+n+"]"),a=0;a<i.length;a++){var s=i[a],o=JSON.parse(s.getAttribute(n));this.addKeyframe(s,o)}_.update(function(){null!==e.groups&&(e.groups.forEach(function(e){return e.onKeyframesDirty({silent:!0})}),e.groups.forEach(function(e){return e.trigger(h.EVENTS.ON_DOM_KEYFRAMES_CREATED,e)}),e.trigger(h.EVENTS.ON_DOM_KEYFRAMES_CREATED,e),e.groups.forEach(function(e){e.forceUpdate({waitForNextUpdate:!1,silent:!0}),e.reconcile()}),e.onScroll())},!0)}},{key:"initializeResizeFilter",value:function(){if(!h.cssDimensionsTracker){var e=document.querySelector(".cssDimensionsTracker")||document.createElement("div");e.setAttribute("cssDimensionsTracker","true"),e.style.position="fixed",e.style.top="0",e.style.width="100%",e.style.height="100vh",e.style.pointerEvents="none",e.style.visibility="hidden",e.style.zIndex="-1",document.documentElement.appendChild(e),h.cssDimensionsTracker=e}}},{key:"initializeModel",value:function(){h.pageMetrics.windowHeight=h.cssDimensionsTracker.clientHeight,h.pageMetrics.windowWidth=h.cssDimensionsTracker.clientWidth,h.pageMetrics.scrollY=window.scrollY||window.pageYOffset,h.pageMetrics.scrollX=window.scrollX||window.pageXOffset,h.pageMetrics.breakpoint=h.getBreakpoint();var e=document.documentElement.getBoundingClientRect();h.pageMetrics.documentOffsetX=e.left+h.pageMetrics.scrollX,h.pageMetrics.documentOffsetY=e.top+h.pageMetrics.scrollY}},{key:"setupEvents",value:function(){window.removeEventListener("scroll",this.onScroll),window.addEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResizeImmediate),window.addEventListener("resize",this.onResizeImmediate)}},{key:"onScroll",value:function(){h.pageMetrics.scrollY=window.scrollY||window.pageYOffset,h.pageMetrics.scrollX=window.scrollX||window.pageXOffset;for(var e=0,t=this.scrollSystems.length;e<t;e++)this.scrollSystems[e].updateTimeline();this.trigger(h.PageEvents.ON_SCROLL,h.pageMetrics)}},{key:"onResizeImmediate",value:function(){var e=h.cssDimensionsTracker.clientWidth,t=h.cssDimensionsTracker.clientHeight;if(e!==h.pageMetrics.windowWidth||t!==h.pageMetrics.windowHeight){h.pageMetrics.windowWidth=e,h.pageMetrics.windowHeight=t,h.pageMetrics.scrollY=window.scrollY||window.pageYOffset,h.pageMetrics.scrollX=window.scrollX||window.pageXOffset;var r=document.documentElement.getBoundingClientRect();h.pageMetrics.documentOffsetX=r.left+h.pageMetrics.scrollX,h.pageMetrics.documentOffsetY=r.top+h.pageMetrics.scrollY,window.clearTimeout(h.RESIZE_TIMEOUT),h.RESIZE_TIMEOUT=window.setTimeout(this.onResizedDebounced,250),this.trigger(h.PageEvents.ON_RESIZE_IMMEDIATE,h.pageMetrics)}}},{key:"onResizedDebounced",value:function(){var e=this;_.update(function(){var t=h.pageMetrics.breakpoint,r=h.getBreakpoint(),n=r!==t;if(n){h.pageMetrics.previousBreakpoint=t,h.pageMetrics.breakpoint=r;for(var i=0,a=e.groups.length;i<a;i++)e.groups[i]._onBreakpointChange();e.trigger(h.PageEvents.ON_BREAKPOINT_CHANGE,h.pageMetrics)}for(var s=0,o=e.groups.length;s<o;s++)e.groups[s].forceUpdate({waitForNextUpdate:!1});e.trigger(h.PageEvents.ON_RESIZE_DEBOUNCED,h.pageMetrics)},!0)}},{key:"forceUpdate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.waitForNextUpdate,n=void 0===r||r,i=t.silent,a=void 0!==i&&i;this._forceUpdateRAFId!==-1&&_.cancelUpdate(this._forceUpdateRAFId);var s=function(){for(var t=0,r=e.groups.length;t<r;t++){var n=e.groups[t];n.forceUpdate({waitForNextUpdate:!1,silent:a})}return-1};this._forceUpdateRAFId=n?_.update(s,!0):s()}},{key:"addKeyframe",value:function(e,t){var r=this.getGroupForTarget(e);return r=r||this.getGroupForTarget(document.body),r.addKeyframe(e,t)}},{key:"addEvent",value:function(e,t){var r=this.getGroupForTarget(e);return r=r||this.getGroupForTarget(document.body),r.addEvent(e,t)}},{key:"getTimeGroupForTarget",value:function(e){return this._getGroupForTarget(e,function(e){return e instanceof b})}},{key:"getScrollGroupForTarget",value:function(e){return this._getGroupForTarget(e,function(e){return!(e instanceof b)})}},{key:"getGroupForTarget",value:function(e){return this._getGroupForTarget(e,function(){return!0})}},{key:"_getGroupForTarget",value:function(e,t){if(e._animInfo&&e._animInfo.group&&t(e._animInfo.group))return e._animInfo.group;for(var r=e;r;){if(r._animInfo&&r._animInfo.isGroup&&t(r._animInfo.group))return r._animInfo.group;r=r.parentElement}}},{key:"getControllerForTarget",value:function(e){return e._animInfo&&e._animInfo.controller?e._animInfo.controller:null}},{key:"addTween",value:function(e,t){return this.tweenGroup.addKeyframe(e,t)}}]),t}(c);t.exports="undefined"==typeof window?new E:window.AC.SharedInstance.share("AnimSystem",v.major,E),t.exports["default"]=t.exports},{"./.release-info":64,"./Keyframes/Keyframe":67,"./Keyframes/KeyframeCSSClass":68,"./Keyframes/KeyframeDiscreteEvent":70,"./Model/AnimSystemModel":72,"./ScrollGroup":87,"./TimeGroup":88,"./TweenGroup":89,"@babel/runtime/helpers/assertThisInitialized":9,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,"@marcom/ac-event-emitter-micro":5,"@marcom/ac-raf-emitter/cancelUpdate":56,"@marcom/ac-raf-emitter/draw":57,"@marcom/ac-raf-emitter/external":58,"@marcom/ac-raf-emitter/update":61}],66:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=e("./Model/AnimSystemModel"),o=function(){function e(t,r){(0,i["default"])(this,e),this._index=0,this.keyframe=t,r&&(this.name=r)}return(0,a["default"])(e,[{key:"start",get:function(){return this.keyframe.jsonProps.start}},{key:"index",set:function(e){this._index=e},get:function(){return this._index}}]),e}(),l=function(){function e(t){(0,i["default"])(this,e),this.timeGroup=t,this.chapters=[],this.chapterNames={},this.currentChapter=null,this.clip=null}return(0,a["default"])(e,[{key:"addChapter",value:function(e){var t=e.position,r=e.name;if("undefined"==typeof t)throw ReferenceError("Cannot add chapter without target position.");e._impIsFirst||0!==this.chapters.length||this.addChapter({position:0,_impIsFirst:!0});var n=this.timeGroup.addKeyframe(this,{start:t,end:t,event:"Chapter"});this.timeGroup.forceUpdate({waitForNextFrame:!1,silent:!0});var i=new o(n,r);if(this.chapters.push(i),r){if(this.chapterNames.hasOwnProperty(r))throw ReferenceError('Duplicate chapter name assigned - "'.concat(r,'" is already in use'));this.chapterNames[r]=i}return this.chapters.sort(function(e,t){return e.start-t.start}).forEach(function(e,t){return e.index=t}),this.currentChapter=this.currentChapter||this.chapters[0],i}},{key:"playToChapter",value:function(e){var t,r=this;if(e.hasOwnProperty("index"))t=this.chapters[e.index];else{if(!e.hasOwnProperty("name"))throw ReferenceError("Cannot play to chapter without target index or name");t=this.chapterNames[e.name]}if(t&&(this.currentChapter!==t||e.force===!0)){var n=e.ease||"easeInOutCubic";this.clip&&(this.clip.destroy(),n="easeOutQuint"),this.timeGroup.timeScale(e.timeScale||1);var i=void 0!==e.duration?e.duration:this.getDurationToChapter(t),a=this.timeGroup.time(),o=t.start,l=!1;this.tween=this.timeGroup.anim.addTween({time:a},{easeFunction:n,duration:i,time:[a,o],onStart:function(){return r.timeGroup.trigger(s.EVENTS.ON_CHAPTER_INITIATED,{player:r,next:t})},onDraw:function(e){var n=e.tweenProps.time.current;r.timeGroup.time(n),e.keyframe.curvedT>.5&&!l&&(l=!0,r.currentIndex=t.index,r.currentChapter=t,r.timeGroup.trigger(s.EVENTS.ON_CHAPTER_OCCURRED,{player:r,current:t}))},onComplete:function(){r.timeGroup.trigger(s.EVENTS.ON_CHAPTER_COMPLETED,{player:r,current:t}),r.timeGroup.paused(!0),r.clip=null}})}}},{key:"getDurationToChapter",value:function(e){var t=this.chapters[e.index-1]||this.chapters[e.index+1];return Math.abs(t.start-e.start)}}]),e}();t.exports=l},{"./Model/AnimSystemModel":72,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/interopRequireDefault":16}],67:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=e("../Model/AnimSystemModel"),o=e("../Model/TargetValue"),l=e("@marcom/sm-math-utils"),u=e("../Model/EasingFunctions"),c=e("../Model/UnitBezier"),h=e("../Model/SpringEasing"),m=e("../utils/arrayToObject"),f=e("../utils/toValidAnchor"),p=e("../Model/UUID"),d=function(){function e(t,r){(0,i["default"])(this,e),this.controller=t,this.anchors=[],this.jsonProps=r,this.ease=t.group.defaultEase,this.easeFunction=u.linear,this.start=0,this.end=0,this.localT=0,this.curvedT=0,this.id=0,this.event="",this.needsEventDispatch=!1,this.snapAtCreation=!1,this.isEnabled=!1,this.animValues={},this.breakpointMask="SMLX",this.disabledWhen=[],this.keyframeType=s.KeyframeTypes.Interpolation,this.hold=!1,this.preserveState=!1,this.markedForRemoval=!1;var n=!1;Object.defineProperty(this,"hidden",{get:function(){return n},set:function(e){n=e,t.group.keyframesDirty=!0}}),this.uuid=p(),this.destroyed=!1}return(0,a["default"])(e,[{key:"destroy",value:function(){this.destroyed=!0,this.controller=null,this.disabledWhen=null,this.anchors=null,this.jsonProps=null,this.easeFunction=null,this.animValues=null}},{key:"remove",value:function(){return this.controller.removeKeyframe(this)}},{key:"parseOptions",value:function(e){var t=this;this.jsonProps=e,e.relativeTo&&console.error("KeyframeError: relativeTo has been removed. Use 'anchors' property instead. Found 'relativeTo':\"".concat(e.relativeTo,'"')),void 0===e.end&&void 0===e.duration&&(e.end=e.start),""!==e.anchors&&e.anchors?(this.anchors=[],e.anchors=Array.isArray(e.anchors)?e.anchors:[e.anchors],e.anchors.forEach(function(r,n){var i=f(r,t.controller.group.element);if(!i){var a="";return"string"==typeof r&&(a=" Provided value was a string, so a failed attempt was made to find anchor with the provided querystring in group.element, or in the document."),void console.warn("Keyframe on",t.controller.element," failed to find anchor at index ".concat(n," in array"),e.anchors,". Anchors must be JS Object references, Elements references, or valid query selector strings. ".concat(a))}t.anchors.push(i),t.controller.group.metrics.add(i)})):(this.anchors=[],e.anchors=[]),e.ease?this.ease=parseFloat(e.ease):e.ease=this.ease,e.hasOwnProperty("snapAtCreation")?this.snapAtCreation=e.snapAtCreation:e.snapAtCreation=this.snapAtCreation,e.easeFunction||(e.easeFunction=s.KeyframeDefaults.easeFunctionString),e.breakpointMask?this.breakpointMask=e.breakpointMask:e.breakpointMask=this.breakpointMask,e.disabledWhen?this.disabledWhen=Array.isArray(e.disabledWhen)?e.disabledWhen:[e.disabledWhen]:e.disabledWhen=this.disabledWhen,e.hasOwnProperty("hold")?this.hold=e.hold:e.hold=this.hold,e.hasOwnProperty("preserveState")?this.preserveState=e.preserveState:e.preserveState=s.KeyframeDefaults.preserveState,this.easeFunction=u[e.easeFunction],u.hasOwnProperty(e.easeFunction)||(e.easeFunction.includes("bezier")?this.easeFunction=c.fromCSSString(e.easeFunction):e.easeFunction.includes("spring")?this.easeFunction=h.fromCSSString(e.easeFunction):console.error("Keyframe parseOptions cannot find 'easeFunction' named '"+e.easeFunction+"'"));for(var r in e)if(s.KeyframeJSONReservedWords.indexOf(r)===-1){var n=e[r];if(Array.isArray(n)){if(1===n.length&&(n[0]=null,n[1]=n[0]),this.animValues[r]=this.controller.group.expressionParser.parseArray(this,n),void 0===this.controller.tweenProps[r]||!this.controller._ownerIsElement){var i=0;this.controller._ownerIsElement||(i=this.controller.element[r]||0);var a=new o(i,s.KeyframeDefaults.epsilon,this.snapAtCreation);this.controller.tweenProps[r]=a}var l=this.controller.tweenProps[r];if(e.epsilon)l.epsilon=e.epsilon;else{var m=Math.abs(this.animValues[r][0]-this.animValues[r][1]),p=Math.min(.001*m,l.epsilon,s.KeyframeDefaults.epsilon);l.epsilon=Math.max(p,1e-4)}}}this.keyframeType=this.hold?s.KeyframeTypes.InterpolationForward:s.KeyframeTypes.Interpolation,e.event&&(this.event=e.event)}},{key:"overwriteProps",value:function(e){this.animValues={};var t=Object.assign({},this.jsonProps,e);this.controller.updateKeyframe(this,t)}},{key:"updateLocalProgress",value:function(e){if(this.start===this.end||e<this.start||e>this.end)return this.localT=e<this.start?this.hold?this.localT:0:e>this.end?1:0,void(this.curvedT=this.easeFunction(this.localT));var t=(e-this.start)/(this.end-this.start),r=this.hold?this.localT:0;this.localT=l.clamp(t,r,1),this.curvedT=this.easeFunction(this.localT)}},{key:"reconcile",value:function(e){var t=this.animValues[e],r=this.controller.tweenProps[e];r.initialValue=t[0],r.target=t[0]+this.curvedT*(t[1]-t[0]),r.current!==r.target&&(r.current=r.target,this.needsEventDispatch||(this.needsEventDispatch=!0,
this.controller.keyframesRequiringDispatch.push(this)))}},{key:"reset",value:function(e){this.localT=e||0;var t=this.ease;this.ease=1;for(var r in this.animValues)this.reconcile(r);this.ease=t}},{key:"onDOMRead",value:function(e){var t=this.animValues[e],r=this.controller.tweenProps[e];r.target=t[0]+this.curvedT*(t[1]-t[0]);var n=r.current;r.current+=(r.target-r.current)*this.ease;var i=r.current-r.target;i<r.epsilon&&i>-r.epsilon&&(r.current=r.target,i=0),""===this.event||this.needsEventDispatch||(i>r.epsilon||i<-r.epsilon||0===i&&n!==r.current)&&(this.needsEventDispatch=!0,this.controller.keyframesRequiringDispatch.push(this))}},{key:"isInRange",value:function(e){return e>=this.start&&e<=this.end}},{key:"setEnabled",value:function(e){e=e||m(Array.from(document.documentElement.classList));var t=this.breakpointMask.indexOf(s.pageMetrics.breakpoint)!==-1,r=!1;return this.disabledWhen.length>0&&(r=this.disabledWhen.some(function(t){return"undefined"!=typeof e[t]})),this.isEnabled=t&&!r,this.isEnabled}},{key:"evaluateConstraints",value:function(){this.start=this.controller.group.expressionParser.parseTimeValue(this,this.jsonProps.start),this.end=this.controller.group.expressionParser.parseTimeValue(this,this.jsonProps.end),this.evaluateInterpolationConstraints()}},{key:"evaluateInterpolationConstraints",value:function(){for(var e in this.animValues){var t=this.jsonProps[e];this.animValues[e]=this.controller.group.expressionParser.parseArray(this,t)}}}]),e}();d.DATA_ATTRIBUTE="data-anim-tween",t.exports=d},{"../Model/AnimSystemModel":72,"../Model/EasingFunctions":74,"../Model/SpringEasing":79,"../Model/TargetValue":80,"../Model/UUID":82,"../Model/UnitBezier":83,"../utils/arrayToObject":90,"../utils/toValidAnchor":91,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/interopRequireDefault":16,"@marcom/sm-math-utils":165}],68:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/typeof")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),l=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),c=e("./Keyframe"),h=e("../Model/AnimSystemModel.js"),m=e("../Model/TargetValue.js"),f=function(e){function t(e,r){var n;return(0,a["default"])(this,t),n=(0,o["default"])(this,(0,l["default"])(t).call(this,e,r)),n.keyframeType=h.KeyframeTypes.CSSClass,n._triggerType=t.TRIGGER_TYPE_CSS_CLASS,n.cssClass="",n.friendlyName="",n.style={on:null,off:null},n.toggle=!1,n.isApplied=!1,n}return(0,u["default"])(t,e),(0,s["default"])(t,[{key:"parseOptions",value:function(e){if(!this.controller._ownerIsElement)throw new TypeError("CSS Keyframes cannot be applied to JS Objects");if(e.x=void 0,e.y=void 0,e.z=void 0,e.scale=void 0,e.scaleX=void 0,e.scaleY=void 0,e.rotationX=void 0,e.rotationY=void 0,e.rotationZ=void 0,e.rotation=void 0,e.opacity=void 0,e.hold=void 0,void 0!==e.toggle&&(this.toggle=e.toggle),void 0!==e.cssClass)this._triggerType=t.TRIGGER_TYPE_CSS_CLASS,this.cssClass=e.cssClass,this.friendlyName="."+this.cssClass,void 0===this.controller.tweenProps.targetClasses&&(this.controller.tweenProps.targetClasses={add:[],remove:[]});else{if(void 0===e.style||!this.isValidStyleProperty(e.style))throw new TypeError("KeyframeCSSClass no 'cssClass` property found. If using `style` property its also missing or invalid");if(this._triggerType=t.TRIGGER_TYPE_STYLE_PROPERTY,this.style=e.style,this.friendlyName="style",this.toggle=void 0!==this.style.off||this.toggle,this.toggle&&void 0===this.style.off){this.style.off={};for(var r in this.style.on)this.style.off[r]=""}void 0===this.controller.tweenProps.targetStyles&&(this.controller.tweenProps.targetStyles={})}if(void 0===e.end&&(e.end=e.start),e.toggle=this.toggle,this._triggerType===t.TRIGGER_TYPE_CSS_CLASS)this.isApplied=this.controller.element.classList.contains(this.cssClass);else{var n=getComputedStyle(this.controller.element);this.isApplied=!0;for(var i in this.style.on)if(n[i]!==this.style.on[i]){this.isApplied=!1;break}}c.prototype.parseOptions.call(this,e),this.animValues[this.friendlyName]=[0,0],void 0===this.controller.tweenProps[this.friendlyName]&&(this.controller.tweenProps[this.friendlyName]=new m(0,1,(!1))),this.keyframeType=h.KeyframeTypes.CSSClass}},{key:"updateLocalProgress",value:function(e){this.isApplied&&!this.toggle||(this.start!==this.end?!this.isApplied&&e>=this.start&&e<=this.end?this._apply():this.isApplied&&this.toggle&&(e<this.start||e>this.end)&&this._unapply():!this.isApplied&&e>=this.start?this._apply():this.isApplied&&this.toggle&&e<this.start&&this._unapply())}},{key:"_apply",value:function(){if(this._triggerType===t.TRIGGER_TYPE_CSS_CLASS)this.controller.tweenProps.targetClasses.add.push(this.cssClass),this.controller.needsClassUpdate=!0;else{for(var e in this.style.on)this.controller.tweenProps.targetStyles[e]=this.style.on[e];this.controller.needsStyleUpdate=!0}this.isApplied=!0}},{key:"_unapply",value:function(){if(this._triggerType===t.TRIGGER_TYPE_CSS_CLASS)this.controller.tweenProps.targetClasses.remove.push(this.cssClass),this.controller.needsClassUpdate=!0;else{for(var e in this.style.off)this.controller.tweenProps.targetStyles[e]=this.style.off[e];this.controller.needsStyleUpdate=!0}this.isApplied=!1}},{key:"isValidStyleProperty",value:function(e){if(!e.hasOwnProperty("on"))return!1;if("object"!==(0,i["default"])(e.on))throw new TypeError("KeyframeCSSClass `style` property should be in the form of: {on:{visibility:'hidden', otherProperty: 'value'}}");if(this.toggle&&e.hasOwnProperty("off")&&"object"!==(0,i["default"])(e.off))throw new TypeError("KeyframeCSSClass `style` property should be in the form of: {on:{visibility:'hidden', otherProperty: 'value'}}");return!0}},{key:"reconcile",value:function(e){}},{key:"onDOMRead",value:function(e){}},{key:"evaluateInterpolationConstraints",value:function(){}}]),t}(c);f.TRIGGER_TYPE_CSS_CLASS=0,f.TRIGGER_TYPE_STYLE_PROPERTY=1,f.DATA_ATTRIBUTE="data-anim-classname",t.exports=f},{"../Model/AnimSystemModel.js":72,"../Model/TargetValue.js":80,"./Keyframe":67,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,"@babel/runtime/helpers/typeof":27}],69:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/assertThisInitialized")),l=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/get")),c=n(e("@babel/runtime/helpers/inherits")),h=e("../Model/AnimSystemModel"),m=e("../Model/TargetValue"),f=e("../Model/CSSTargetValue"),p=e("../Model/EventObject"),d=e("../Model/AnimInfo"),b=(e("./Keyframe"),e("./KeyframeCSSClass")),y=e("../Model/InferKeyframeFromProps"),v=e("../utils/arrayToObject"),_=e("../Model/UUID"),g=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,E=e("@marcom/decompose-css-transform"),C={};"undefined"!=typeof window&&(C.update=e("@marcom/ac-raf-emitter/update"),C.external=e("@marcom/ac-raf-emitter/external"),C.draw=e("@marcom/ac-raf-emitter/draw"));var k=Math.PI/180,w=["x","y","z","scale","scaleX","scaleY","rotation","rotationX","rotationY","rotationZ"],A=["borderRadius","bottom","fontSize","fontWeight","height","left","lineHeight","marginBottom","marginLeft","marginRight","marginTop","maxHeight","maxWidth","opacity","paddingBottom","paddingLeft","paddingRight","paddingTop","right","top","width","zIndex","strokeDashoffset"],S=["currentTime","scrollLeft","scrollTop"],O={create:e("gl-mat4/create"),rotateX:e("gl-mat4/rotateX"),rotateY:e("gl-mat4/rotateY"),rotateZ:e("gl-mat4/rotateZ"),scale:e("gl-mat4/scale")},P=function(e){function t(e,r){var n;return(0,i["default"])(this,t),n=(0,s["default"])(this,(0,l["default"])(t).call(this)),n._events.draw=[],n.uuid=_(),n.group=e,n.element=r,n._ownerIsElement=n.element instanceof Element,n._ownerIsElement?n.friendlyName=n.element.tagName+"."+Array.from(n.element.classList).join("."):n.friendlyName=n.element.friendlyName||n.uuid,n.element._animInfo=n.element._animInfo||new d(e,(0,o["default"])(n)),n.element._animInfo.controller=(0,o["default"])(n),n.element._animInfo.group=n.group,n.element._animInfo.controllers.push((0,o["default"])(n)),n.tweenProps=n.element._animInfo.tweenProps,n.eventObject=new p((0,o["default"])(n)),n.needsStyleUpdate=!1,n.needsClassUpdate=!1,n.elementMetrics=n.group.metrics.add(n.element),n.attributes=[],n.cssAttributes=[],n.domAttributes=[],n.keyframes={},n._allKeyframes=[],n._activeKeyframes=[],n.keyframesRequiringDispatch=[],n.updateCachedValuesFromElement(),n.boundsMin=0,n.boundsMax=0,n.mat2d=new Float32Array(6),n.mat4=O.create(),n.needsWrite=!0,n.onDOMWriteImp=n._ownerIsElement?n.onDOMWriteForElement:n.onDOMWriteForObject,n}return(0,c["default"])(t,e),(0,a["default"])(t,[{key:"destroy",value:function(){if(this.element._animInfo){this.element._animInfo.controller===this&&(this.element._animInfo.controller=null);var e=this.element._animInfo.controllers.indexOf(this);if(e!==-1&&this.element._animInfo.controllers.splice(e,1),0===this.element._animInfo.controllers.length)this.element._animInfo=null;else{var r=this.element._animInfo.controllers.find(function(e){return e.group!==e.group.anim.tweenGroup});r&&(this.element._animInfo.controller=r,this.element._animInfo.group=r.group)}}this.eventObject.controller=null,this.eventObject.element=null,this.eventObject.keyframe=null,this.eventObject.tweenProps=null,this.eventObject=null,this.elementMetrics=null,this.group=null,this.keyframesRequiringDispatch=null;for(var n=0;n<this._allKeyframes.length;n++)this._allKeyframes[n].destroy();this._allKeyframes=null,this._activeKeyframes=null,this.attributes=null,this.keyframes=null,this.element=null,this.tweenProps=null,this.destroyed=!0,(0,u["default"])((0,l["default"])(t.prototype),"destroy",this).call(this)}},{key:"remove",value:function(){return this.group.removeKeyframeController(this)}},{key:"updateCachedValuesFromElement",value:function(){var e=this;if(this._ownerIsElement){var t=getComputedStyle(this.element),r=new DOMMatrix(t.getPropertyValue("transform")),n=E(r),i=h.KeyframeDefaults.epsilon,a=!1;["x","y","z"].forEach(function(t,r){e.tweenProps[t]=new m(n.translation[r],i,a)}),this.tweenProps.rotation=new m(n.rotation[2],i,a),["rotationX","rotationY","rotationZ"].forEach(function(t,r){e.tweenProps[t]=new m(n.rotation[r],i,a)}),this.tweenProps.scale=new m(n.scale[0],i,a),["scaleX","scaleY","scaleZ"].forEach(function(t,r){e.tweenProps[t]=new m(n.scale[r],i,a)}),A.forEach(function(r){var n=["zIndex"].includes(r),s=["opacity","zIndex","fontWeight"].includes(r)?void 0:"px",o=parseFloat(t[r]);isNaN(o)&&(o=0),e.tweenProps[r]=new f(o,i,a,r,n,s)}),S.forEach(function(t){var r=isNaN(e.element[t])?0:e.element[t];e.tweenProps[t]=new f(r,i,a,t,(!1))})}}},{key:"addKeyframe",value:function(e){var t=y(e);if(!t)throw new Error("AnimSystem Cannot create keyframe for from options `"+e+"`");var r=new t(this,e);return r.parseOptions(e),r.id=this._allKeyframes.length,this._allKeyframes.push(r),r}},{key:"needsUpdate",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var r=this.attributes[e],n=this.tweenProps[r],i=Math.abs(n.current-n.target);if(i>n.epsilon)return!0}return!1}},{key:"updateLocalProgress",value:function(e){for(var t=0,r=this.attributes.length;t<r;t++){var n=this.attributes[t],i=this.keyframes[this.attributes[t]];if(1!==i.length){var a=this.getNearestKeyframeForAttribute(n,e);a&&a.updateLocalProgress(e)}else i[0].updateLocalProgress(e)}}},{key:"reconcile",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var r=this.attributes[e],n=this.getNearestKeyframeForAttribute(r,this.group.position.local);n.updateLocalProgress(this.group.position.local),n.snapAtCreation&&n.reconcile(r)}}},{key:"determineActiveKeyframes",value:function(e){var t=this;e=e||v(Array.from(document.documentElement.classList));var r=this._activeKeyframes,n=this.attributes,i={};this._activeKeyframes=[],this.attributes=[],this.keyframes={};for(var a=0;a<this._allKeyframes.length;a++){var s=this._allKeyframes[a];if(s.markedForRemoval||s.hidden||!s.setEnabled(e))for(var o in s.animValues)this.tweenProps[o].isActive=s.preserveState,s.preserveState&&(i[o]=!0);else{this._activeKeyframes.push(s);for(var l in s.animValues)this.keyframes[l]=this.keyframes[l]||[],this.keyframes[l].push(s),this.attributes.indexOf(l)===-1&&(i[l]=!0,this.attributes.push(l),this.tweenProps[l].isActive=!0)}}this.attributes.forEach(function(e){return t.tweenProps[e].isActive=!0}),this.cssAttributes=A.filter(function(e){return t.attributes.includes(e)}).map(function(e){return t.tweenProps[e]}),this.domAttributes=S.filter(function(e){return t.attributes.includes(e)}).map(function(e){return t.tweenProps[e]});var u=r.filter(function(e){return t._activeKeyframes.indexOf(e)===-1});if(0!==u.length){var c=n.filter(function(e){return t.attributes.indexOf(e)===-1&&!i.hasOwnProperty(e)});if(0!==c.length)if(this.needsWrite=!0,this._ownerIsElement)C.external(function(){var e=c.some(function(e){return w.includes(e)}),r=e&&Object.keys(i).some(function(e){return w.includes(e)});e&&!r&&t.element.style.removeProperty("transform");for(var n=0,a=c.length;n<a;++n){var s=c[n],o=t.tweenProps[s],l=o.isActive?o.target:o.initialValue;o.current=o.target=l,!o.isActive&&A.includes(s)&&(t.element.style[s]=null)}for(var h=0,m=u.length;h<m;++h){var f=u[h];f instanceof b&&!f.preserveState&&f._unapply()}},!0);else for(var h=0,m=c.length;h<m;++h){var f=this.tweenProps[c[h]];f.current=f.target,f.isActive=!1}}}},{key:"onDOMRead",value:function(e){for(var t=0,r=this.attributes.length;t<r;t++){var n=this.attributes[t];this.tweenProps[n].previousValue=this.tweenProps[n].current;var i=this.getNearestKeyframeForAttribute(n,e);i&&i.onDOMRead(n),this.tweenProps[n].previousValue!==this.tweenProps[n].current&&(this.needsWrite=!0)}}},{key:"onDOMWrite",value:function(){(this.needsWrite||this.needsClassUpdate||this.needsStyleUpdate)&&(this.needsWrite=!1,this.onDOMWriteImp(),this.handleEventDispatch())}},{key:"onDOMWriteForObject",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var r=this.attributes[e];this.element[r]=this.tweenProps[r].current}}},{key:"onDOMWriteForElement",value:function(){var e=this.element.style;this.handleStyleTransform();for(var t=0,r=this.cssAttributes.length;t<r;t++)this.cssAttributes[t].set(e);for(var n=0,i=this.domAttributes.length;n<i;n++)this.domAttributes[n].set(this.element);if(this.needsStyleUpdate){for(var a in this.tweenProps.targetStyles)null!==this.tweenProps.targetStyles[a]&&(this.element.style[a]=this.tweenProps.targetStyles[a]),this.tweenProps.targetStyles[a]=null;this.needsStyleUpdate=!1}this.needsClassUpdate&&(this.tweenProps.targetClasses.add.length>0&&this.element.classList.add.apply(this.element.classList,this.tweenProps.targetClasses.add),this.tweenProps.targetClasses.remove.length>0&&this.element.classList.remove.apply(this.element.classList,this.tweenProps.targetClasses.remove),this.tweenProps.targetClasses.add.length=0,this.tweenProps.targetClasses.remove.length=0,this.needsClassUpdate=!1)}},{key:"handleStyleTransform",value:function(){var e=this.tweenProps,t=this.element.style;if(e.z.isActive||e.rotationX.isActive||e.rotationY.isActive){var r=this.mat4;r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1;var n=e.x.current,i=e.y.current,a=e.z.current;if(r[12]=r[0]*n+r[4]*i+r[8]*a+r[12],r[13]=r[1]*n+r[5]*i+r[9]*a+r[13],r[14]=r[2]*n+r[6]*i+r[10]*a+r[14],r[15]=r[3]*n+r[7]*i+r[11]*a+r[15],0!==e.rotation.current||0!==e.rotationZ.current){var s=(e.rotation.current||e.rotationZ.current)*k;O.rotateZ(r,r,s)}if(0!==e.rotationX.current){var o=e.rotationX.current*k;O.rotateX(r,r,o)}if(0!==e.rotationY.current){var l=e.rotationY.current*k;O.rotateY(r,r,l)}1===e.scale.current&&1===e.scaleX.current&&1===e.scaleY.current||O.scale(r,r,[e.scale.current,e.scale.current,1]),t.transform="matrix3d("+r[0]+","+r[1]+","+r[2]+","+r[3]+","+r[4]+","+r[5]+","+r[6]+","+r[7]+","+r[8]+","+r[9]+","+r[10]+","+r[11]+","+r[12]+","+r[13]+","+r[14]+","+r[15]+")"}else if(e.x.isActive||e.y.isActive||e.rotation.isActive||e.rotationZ.isActive||e.scale.isActive||e.scaleX.isActive||e.scaleY.isActive){var u=this.mat2d;u[0]=1,u[1]=0,u[2]=0,u[3]=1,u[4]=0,u[5]=0;var c=e.x.current,h=e.y.current,m=u[0],f=u[1],p=u[2],d=u[3],b=u[4],y=u[5];if(u[0]=m,u[1]=f,u[2]=p,u[3]=d,u[4]=m*c+p*h+b,u[5]=f*c+d*h+y,0!==e.rotation.current||0!==e.rotationZ.current){var v=(e.rotation.current||e.rotationZ.current)*k,_=u[0],g=u[1],E=u[2],C=u[3],w=u[4],A=u[5],S=Math.sin(v),P=Math.cos(v);u[0]=_*P+E*S,u[1]=g*P+C*S,u[2]=_*-S+E*P,u[3]=g*-S+C*P,u[4]=w,u[5]=A}e.scaleX.isActive||e.scaleY.isActive?(u[0]=u[0]*e.scaleX.current,u[1]=u[1]*e.scaleX.current,u[2]=u[2]*e.scaleY.current,u[3]=u[3]*e.scaleY.current):(u[0]=u[0]*e.scale.current,u[1]=u[1]*e.scale.current,u[2]=u[2]*e.scale.current,u[3]=u[3]*e.scale.current),t.transform="matrix("+u[0]+", "+u[1]+", "+u[2]+", "+u[3]+", "+u[4]+", "+u[5]+")"}}},{key:"handleEventDispatch",value:function(){if(0!==this.keyframesRequiringDispatch.length){for(var e=0,t=this.keyframesRequiringDispatch.length;e<t;e++){var r=this.keyframesRequiringDispatch[e];r.needsEventDispatch=!1,this.eventObject.keyframe=r,this.eventObject.pageMetrics=h.pageMetrics,this.eventObject.event=r.event,this.trigger(r.event,this.eventObject)}this.keyframesRequiringDispatch.length=0}if(0!==this._events.draw.length){this.eventObject.keyframe=null,this.eventObject.event="draw";for(var n=this._events.draw.length-1;n>=0;n--)this._events.draw[n](this.eventObject)}}},{key:"updateAnimationConstraints",value:function(){for(var e=this,t=0,r=this._activeKeyframes.length;t<r;t++)this._activeKeyframes[t].evaluateConstraints();this.attributes.forEach(function(t){1!==e.keyframes[t].length&&e.keyframes[t].sort(h.KeyframeComparison)}),this.updateDeferredPropertyValues()}},{key:"refreshMetrics",value:function(){var e=new Set([this.element]);this._allKeyframes.forEach(function(t){return t.anchors.forEach(function(t){return e.add(t)})}),this.group.metrics.refreshCollection(e),this.group.keyframesDirty=!0}},{key:"updateDeferredPropertyValues",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var r=this.attributes[e],n=this.keyframes[r],i=n[0];if(!(i.keyframeType>h.KeyframeTypes.InterpolationForward))for(var a=0,s=n.length;a<s;a++){var o=n[a];null===o.jsonProps[r][0]&&(0===a?o.jsonProps[r][0]=o.animValues[r][0]=this.tweenProps[r].current:o.animValues[r][0]=n[a-1].animValues[r][1]),null===o.jsonProps[r][1]&&(a===s-1?o.animValues[r][1]=this.tweenProps[r].current:o.animValues[r][1]=n[a+1].animValues[r][0]),o.snapAtCreation&&(o.jsonProps[r][0]=o.animValues[r][0],o.jsonProps[r][1]=o.animValues[r][1])}}}},{key:"getBounds",value:function(e){this.boundsMin=Number.MAX_VALUE,this.boundsMax=-Number.MAX_VALUE;for(var t=0,r=this.attributes.length;t<r;t++)for(var n=this.keyframes[this.attributes[t]],i=0;i<n.length;i++){var a=n[i];this.boundsMin=Math.min(a.start,this.boundsMin),this.boundsMax=Math.max(a.end,this.boundsMax),e.min=Math.min(a.start,e.min),e.max=Math.max(a.end,e.max)}}},{key:"getNearestKeyframeForAttribute",value:function(e,t){t=void 0!==t?t:this.group.position.local;var r=null,n=Number.POSITIVE_INFINITY,i=this.keyframes[e];if(void 0===i)return null;var a=i.length;if(0===a)return null;if(1===a)return i[0];for(var s=0;s<a;s++){var o=i[s];if(o.isInRange(t)){r=o;break}var l=Math.min(Math.abs(t-o.start),Math.abs(t-o.end));l<n&&(n=l,r=o)}return r}},{key:"getAllKeyframesForAttribute",value:function(e){return this.keyframes[e]}},{key:"updateKeyframe",value:function(e,t){var r=this;e.parseOptions(t),e.evaluateConstraints(),this.group.keyframesDirty=!0,C.update(function(){r.trigger(h.EVENTS.ON_KEYFRAME_UPDATED,e),r.group.trigger(h.EVENTS.ON_KEYFRAME_UPDATED,e)},!0)}},{key:"removeKeyframe",value:function(e){var t=this;return e.controller!==this?Promise.resolve(null):(e.markedForRemoval=!0,this.group.keyframesDirty=!0,new Promise(function(r){t.group.rafEmitter.executor.eventEmitter.once("before:draw",function(){r(e),e.destroy();var n=t._allKeyframes.indexOf(e);n!==-1&&t._allKeyframes.splice(n,1)})}))}},{key:"updateAnimation",value:function(e,t){return this.group.gui&&console.warn("KeyframeController.updateAnimation(keyframe,props) has been deprecated. Please use updateKeyframe(keyframe,props)"),this.updateKeyframe(e,t)}}]),t}(g);t.exports=P},{"../Model/AnimInfo":71,"../Model/AnimSystemModel":72,"../Model/CSSTargetValue":73,"../Model/EventObject":76,"../Model/InferKeyframeFromProps":77,"../Model/TargetValue":80,"../Model/UUID":82,"../utils/arrayToObject":90,"./Keyframe":67,"./KeyframeCSSClass":68,"@babel/runtime/helpers/assertThisInitialized":9,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/get":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,"@marcom/ac-event-emitter-micro":5,"@marcom/ac-raf-emitter/draw":57,"@marcom/ac-raf-emitter/external":58,"@marcom/ac-raf-emitter/update":61,"@marcom/decompose-css-transform":136,"gl-mat4/create":181,"gl-mat4/rotateX":182,"gl-mat4/rotateY":183,"gl-mat4/rotateZ":184,"gl-mat4/scale":185}],70:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/get")),u=n(e("@babel/runtime/helpers/inherits")),c=e("./Keyframe"),h=e("../Model/AnimSystemModel.js"),m=e("../Model/TargetValue.js"),f=function(e){function t(e,r){var n;return(0,i["default"])(this,t),n=(0,s["default"])(this,(0,o["default"])(t).call(this,e,r)),n.keyframeType=h.KeyframeTypes.Event,n.isApplied=!1,n.hasDuration=!1,n.isCurrentlyInRange=!1,n}return(0,u["default"])(t,e),(0,a["default"])(t,[{key:"parseOptions",value:function(e){e.x=void 0,e.y=void 0,e.scale=void 0,e.scaleX=void 0,e.scaleY=void 0,e.rotation=void 0,e.style=void 0,e.cssClass=void 0,e.rotation=void 0,e.opacity=void 0,e.hold=void 0,this.event=e.event,this.animValues[this.event]=[0,0],"undefined"==typeof this.controller.tweenProps[this.event]&&(this.controller.tweenProps[this.event]=new m(0,1,(!1))),(0,l["default"])((0,o["default"])(t.prototype),"parseOptions",this).call(this,e),this.keyframeType=h.KeyframeTypes.Event}},{key:"updateLocalProgress",value:function(e){if(this.hasDuration){var t=this.isCurrentlyInRange,r=e>=this.start&&e<=this.end;if(t===r)return;return this.isCurrentlyInRange=r,void(r&&!t?this._trigger(this.event+":enter"):t&&!r&&this._trigger(this.event+":exit"))}!this.isApplied&&e>=this.start?(this.isApplied=!0,this._trigger(this.event)):this.isApplied&&e<this.start&&(this.isApplied=!1,this._trigger(this.event+":reverse"))}},{key:"_trigger",value:function(e){this.controller.eventObject.event=e,this.controller.eventObject.keyframe=this,this.controller.trigger(e,this.controller.eventObject)}},{key:"evaluateConstraints",value:function(){(0,l["default"])((0,o["default"])(t.prototype),"evaluateConstraints",this).call(this),this.hasDuration=this.start!==this.end}},{key:"reset",value:function(e){this.isApplied=!1,this.isCurrentlyInRange=!1,(0,l["default"])((0,o["default"])(t.prototype),"reset",this).call(this,e)}},{key:"onDOMRead",value:function(e){}},{key:"reconcile",value:function(e){}},{key:"evaluateInterpolationConstraints",value:function(){}}]),t}(c);f.DATA_ATTRIBUTE="data-anim-event",t.exports=f},{"../Model/AnimSystemModel.js":72,"../Model/TargetValue.js":80,"./Keyframe":67,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/get":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22}],71:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),a=e("./TweenProps"),s=function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,i["default"])(this,o),this.isGroup=r,this.group=e,this.controller=t,this.controllers=[],this.tweenProps=new a};t.exports=s},{"./TweenProps":81,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/interopRequireDefault":16}],72:[function(e,t,r){"use strict";var n={GUI_INSTANCE:null,ANIM_INSTANCE:null,VIEWPORT_EMITTER_ELEMENT:void 0,LOCAL_STORAGE_KEYS:{GuiPosition:"anim-ui.position",GroupCollapsedStates:"anim-ui.group-collapsed-states",scrollY:"anim-ui.scrollY-position",path:"anim-ui.path"},RESIZE_TIMEOUT:-1,BREAKPOINTS:[{name:"S",mediaQuery:"only screen and (max-width: 734px)"},{name:"M",mediaQuery:"only screen and (max-width: 1068px)"},{name:"L",mediaQuery:"only screen and (min-width: 1069px)"}],getBreakpoint:function(){for(var e=0;e<n.BREAKPOINTS.length;e++){var t=n.BREAKPOINTS[e],r=window.matchMedia(t.mediaQuery);if(r.matches)return t.name}},KeyframeDefaults:{ease:1,epsilon:.05,preserveState:!1,easeFunctionString:"linear",easeFunction:"linear",hold:!1,snapAtCreation:!1,toggle:!1,breakpointMask:"SMLX",event:"",disabledWhen:[],cssClass:""},KeyframeTypes:{Interpolation:0,InterpolationForward:1,CSSClass:2,Event:3},EVENTS:{ON_DOM_KEYFRAMES_CREATED:"ON_DOM_KEYFRAMES_CREATED",ON_DOM_GROUPS_CREATED:"ON_DOM_GROUPS_CREATED",ON_GROUP_CREATED:"ON_GROUP_CREATED",ON_KEYFRAME_UPDATED:"ON_KEYFRAME_UPDATED",ON_TIMELINE_START:"ON_TIMELINE_START",ON_TIMELINE_UPDATE:"ON_TIMELINE_UPDATE",ON_TIMELINE_COMPLETE:"ON_TIMELINE_COMPLETE",ON_CHAPTER_INITIATED:"ON_CHAPTER_INITIATED",ON_CHAPTER_OCCURRED:"ON_CHAPTER_OCCURRED",ON_CHAPTER_COMPLETED:"ON_CHAPTER_COMPLETED"},PageEvents:{ON_SCROLL:"ON_SCROLL",ON_RESIZE_IMMEDIATE:"ON_RESIZE_IMMEDIATE",ON_RESIZE_DEBOUNCED:"ON_RESIZE_DEBOUNCED",ON_BREAKPOINT_CHANGE:"ON_BREAKPOINT_CHANGE"},KeyframeJSONReservedWords:["event","cssClass","style","anchors","start","end","epsilon","easeFunction","ease","breakpointMask","disabledWhen"],TweenProps:e("./TweenProps"),TargetValue:e("./TargetValue"),CSSTargetValue:e("./CSSTargetValue"),pageMetrics:new function(){this.scrollX=0,this.scrollY=0,this.windowWidth=0,this.windowHeight=0,this.documentOffsetX=0,this.documentOffsetY=0,this.previousBreakpoint="",this.breakpoint=""},KeyframeComparison:function(e,t){return e.start<t.start?-1:e.start>t.start?1:0}};t.exports=n},{"./CSSTargetValue":73,"./TargetValue":80,"./TweenProps":81}],73:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/inherits")),u=e("./TargetValue"),c=function(e){function t(e,r,n,a){var l,u=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;return(0,i["default"])(this,t),l=(0,s["default"])(this,(0,o["default"])(t).call(this,e,r,n)),l.key=a,l.round=u,l.suffix=c,l}return(0,l["default"])(t,e),(0,a["default"])(t,[{key:"set",value:function(e){var t=this.current;this.round&&(t=Math.round(t)),this.suffix&&(t+=this.suffix),e[this.key]=t}}]),t}(u);t.exports=c},{"./TargetValue":80,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22}],74:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),a=function s(){(0,i["default"])(this,s),this.linear=function(e){return e},this.easeInQuad=function(e){return e*e},this.easeOutQuad=function(e){return e*(2-e)},this.easeInOutQuad=function(e){return e<.5?2*e*e:-1+(4-2*e)*e},this.easeInSin=function(e){return 1+Math.sin(Math.PI/2*e-Math.PI/2)},this.easeOutSin=function(e){return Math.sin(Math.PI/2*e)},this.easeInOutSin=function(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2},this.easeInElastic=function(e){return 0===e?e:(.04-.04/e)*Math.sin(25*e)+1},this.easeOutElastic=function(e){return.04*e/--e*Math.sin(25*e)},this.easeInOutElastic=function(e){return(e-=.5)<0?(.02+.01/e)*Math.sin(50*e):(.02-.01/e)*Math.sin(50*e)+1},this.easeOutBack=function(e){return e-=1,e*e*(2.70158*e+1.70158)+1},this.easeInCubic=function(e){return e*e*e},this.easeOutCubic=function(e){return--e*e*e+1},this.easeInOutCubic=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},this.easeInQuart=function(e){return e*e*e*e},this.easeOutQuart=function(e){return 1- --e*e*e*e},this.easeInOutQuart=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},this.easeInQuint=function(e){return e*e*e*e*e},this.easeOutQuint=function(e){return 1+--e*e*e*e*e},this.easeInOutQuint=function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};t.exports=new a},{"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/interopRequireDefault":16}],75:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=e("./AnimSystemModel"),o=function(e,t){return void 0===e||null===e?t:e},l=function(){function e(){(0,i["default"])(this,e),this.clear()}return(0,a["default"])(e,[{key:"clear",value:function(){this._metrics=new WeakMap}},{key:"destroy",value:function(){this._metrics=null}},{key:"add",value:function(e){var t=this._metrics.get(e);if(t)return t;var r=new u(e);return this._metrics.set(e,r),this._refreshMetrics(e,r)}},{key:"get",value:function(e){return this._metrics.get(e)}},{key:"refreshCollection",value:function(e){var t=this;e.forEach(function(e){return t._refreshMetrics(e,null)})}},{key:"refreshMetrics",value:function(e){return this._refreshMetrics(e)}},{key:"_refreshMetrics",value:function(e,t){if(t=t||this._metrics.get(e),!(e instanceof Element))return t.width=o(e.width,0),t.height=o(e.height,0),t.top=o(e.top,o(e.y,0)),t.left=o(e.left,o(e.x,0)),t.right=t.left+t.width,t.bottom=t.top+t.height,t;if(void 0===e.offsetWidth){var r=e.getBoundingClientRect();return t.width=r.width,t.height=r.height,t.top=s.pageMetrics.scrollY+r.top,t.left=s.pageMetrics.scrollX+r.left,t.right=t.left+t.width,t.bottom=t.top+t.height,t}t.width=e.offsetWidth,t.height=e.offsetHeight,t.top=s.pageMetrics.documentOffsetY,t.left=s.pageMetrics.documentOffsetX;for(var n=e;n;)t.top+=n.offsetTop,t.left+=n.offsetLeft,n=n.offsetParent;return t.right=t.left+t.width,t.bottom=t.top+t.height,t}}]),e}(),u=function(){function e(t){(0,i["default"])(this,e),this.top=0,this.bottom=0,this.left=0,this.right=0,this.height=0,this.width=0}return(0,a["default"])(e,[{key:"toString",value:function(){return"top:".concat(this.top,", bottom:").concat(this.bottom,", left:").concat(this.left,", right:").concat(this.right,", height:").concat(this.height,", width:").concat(this.width)}},{key:"toObject",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right,height:this.height,width:this.width}}}]),e}();t.exports=l},{"./AnimSystemModel":72,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/interopRequireDefault":16}],76:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),a=function s(e){
(0,i["default"])(this,s),this.controller=e,this.element=this.controller.element,this.keyframe=null,this.event="",this.tweenProps=this.controller.tweenProps};t.exports=a},{"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/interopRequireDefault":16}],77:[function(e,t,r){"use strict";var n=e("./AnimSystemModel"),i=e("../Keyframes/Keyframe"),a=e("../Keyframes/KeyframeDiscreteEvent"),s=e("../Keyframes/KeyframeCSSClass"),o=function(e){for(var t in e){var r=e[t];if(n.KeyframeJSONReservedWords.indexOf(t)===-1&&Array.isArray(r))return!0}return!1},l=function(e){if(void 0!==e.cssClass||void 0!==e.style){if(o(e))throw"CSS Keyframes cannot tween values, please use multiple keyframes instead";return s}if(o(e))return i;if(e.event)return a;throw delete e.anchors,"Could not determine tween type based on ".concat(JSON.stringify(e))};t.exports=l},{"../Keyframes/Keyframe":67,"../Keyframes/KeyframeCSSClass":68,"../Keyframes/KeyframeDiscreteEvent":70,"./AnimSystemModel":72}],78:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),a=function s(){(0,i["default"])(this,s),this.local=0,this.localUnclamped=0,this.lastPosition=0};t.exports=a},{"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/interopRequireDefault":16}],79:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/construct")),a=n(e("@babel/runtime/helpers/toConsumableArray")),s=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),l=e("@marcom/sm-math-utils"),u=l.map,c={},h=function(){function e(t,r,n,i){(0,s["default"])(this,e),this.mass=t,this.stiffness=r,this.damping=n,this.initialVelocity=i,this.m_w0=Math.sqrt(this.stiffness/this.mass),this.m_zeta=this.damping/(2*Math.sqrt(this.stiffness*this.mass)),this.m_zeta<1?(this.m_wd=this.m_w0*Math.sqrt(1-this.m_zeta*this.m_zeta),this.m_A=1,this.m_B=(this.m_zeta*this.m_w0+-this.initialVelocity)/this.m_wd):(this.m_wd=0,this.m_A=1,this.m_B=-this.initialVelocity+this.m_w0)}return(0,o["default"])(e,[{key:"solve",value:function(e){return e=this.m_zeta<1?Math.exp(-e*this.m_zeta*this.m_w0)*(this.m_A*Math.cos(this.m_wd*e)+this.m_B*Math.sin(this.m_wd*e)):(this.m_A+this.m_B*e)*Math.exp(-e*this.m_w0),1-e}}]),e}(),m=/\d*\.?\d+/g;h.fromCSSString=function(e){function t(){if(c[e])return c[e];for(var t,r=1/6,n=0;;){l+=r;var i=o(l);if(1===i){if(n++,n>=16){t=l*r;break}}else n=0}return c[e]=t,c[e]}var r=e.match(m);if(4!==r.length)throw"SpringEasing could not convert ".concat(cssString," to spring params");var n=r.map(Number),s=(0,i["default"])(h,(0,a["default"])(n)),o=s.solve.bind(s),l=0,f=t();return function(e){return 0===e||1===e?e:o(u(e,0,1,0,f))}},t.exports=h},{"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/construct":11,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/toConsumableArray":26,"@marcom/sm-math-utils":165}],80:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),a=function s(e,t,r){(0,i["default"])(this,s),this.epsilon=parseFloat(t),this.snapAtCreation=r,this.initialValue=e,this.target=e,this.current=e,this.previousValue=e,this.isActive=!1};t.exports=a},{"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/interopRequireDefault":16}],81:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),a=function s(){(0,i["default"])(this,s)};t.exports=a},{"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/interopRequireDefault":16}],82:[function(e,t,r){"use strict";var n=function(){return Math.random().toString(16).slice(-4)};t.exports=n},{}],83:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=1e-5,o=Math.abs,l=5,u=function(){function e(t,r,n,a){(0,i["default"])(this,e),this.cp=new Float32Array(6),this.cp[0]=3*t,this.cp[1]=3*(n-t)-this.cp[0],this.cp[2]=1-this.cp[0]-this.cp[1],this.cp[3]=3*r,this.cp[4]=3*(a-r)-this.cp[3],this.cp[5]=1-this.cp[3]-this.cp[4]}return(0,a["default"])(e,[{key:"sampleCurveX",value:function(e){return((this.cp[2]*e+this.cp[1])*e+this.cp[0])*e}},{key:"sampleCurveY",value:function(e){return((this.cp[5]*e+this.cp[4])*e+this.cp[3])*e}},{key:"sampleCurveDerivativeX",value:function(e){return(3*this.cp[2]*e+2*this.cp[1])*e+this.cp[0]}},{key:"solveCurveX",value:function(e){var t,r,n,i,a,u;for(n=e,u=0;u<l;u++){if(i=this.sampleCurveX(n)-e,o(i)<s)return n;if(a=this.sampleCurveDerivativeX(n),o(a)<s)break;n-=i/a}if(t=0,r=1,n=e,n<t)return t;if(n>r)return r;for(;t<r;){if(i=this.sampleCurveX(n),o(i-e)<s)return n;e>i?t=n:r=n,n=.5*(r-t)+t}return n}},{key:"solve",value:function(e){return this.sampleCurveY(this.solveCurveX(e))}}]),e}(),c=/\d*\.?\d+/g;u.fromCSSString=function(e){var t=e.match(c);if(4!==t.length)throw"UnitBezier could not convert ".concat(e," to cubic-bezier");var r=t.map(Number),n=new u(r[0],r[1],r[2],r[3]);return n.solve.bind(n)},t.exports=u},{"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/interopRequireDefault":16}],84:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),a=function s(e,t){(0,i["default"])(this,s),this.a=e.top-t,this.a<0&&(this.a=e.top),this.b=e.top,this.d=e.bottom,this.c=Math.max(this.d-t,this.b)};t.exports=a},{"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/interopRequireDefault":16}],85:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/typeof")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=e("./Interpreter"),l=new(e("../Model/ElementMetricsLookup")),u=function(){function e(t){(0,a["default"])(this,e),this.group=t,this.data={target:null,anchors:null,metrics:this.group.metrics}}return(0,s["default"])(e,[{key:"parseArray",value:function(e,t){return[this.parseExpression(e,t[0]),this.parseExpression(e,t[1])]}},{key:"parseExpression",value:function(t,r){if(!r)return null;if("number"==typeof r)return r;if("string"!=typeof r)throw"Expression must be a string, received ".concat((0,i["default"])(r),": ").concat(r);return this.data.target=t.controller.element,this.data.anchors=t.anchors,this.data.keyframe=t.keyframe,e._parse(r,this.data)}},{key:"parseTimeValue",value:function(e,t){if("number"==typeof t)return t;var r=this.group.expressionParser.parseExpression(e,t);return this.group.convertScrollPositionToTValue(r)}},{key:"destroy",value:function(){this.group=null}}],[{key:"parse",value:function(t,r){return r=r||{},r&&(l.clear(),r.target&&l.add(r.target),r.anchors&&r.anchors.forEach(function(e){return l.add(e)})),r.metrics=l,e._parse(t,r)}},{key:"_parse",value:function(e,t){return o.Parse(e).execute(t)}}]),e}();u.programs=o.programs,"undefined"!=typeof window&&(window.ExpressionParser=u),t.exports=u},{"../Model/ElementMetricsLookup":75,"./Interpreter":86,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/typeof":27}],86:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/createClass")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),o=n(e("@babel/runtime/helpers/inherits")),l=n(e("@babel/runtime/helpers/classCallCheck")),u=e("../Model/AnimSystemModel"),c=e("@marcom/sm-math-utils"),h={},m={smoothstep:function(e,t,r){return r=m.clamp((r-e)/(t-e),0,1),r*r*(3-2*r)},deg:function(e){return 180*e/Math.PI},rad:function(e){return e*Math.PI/180},random:function(e,t){return Math.random()*(t-e)+e},atan:Math.atan2};Object.getOwnPropertyNames(Math).forEach(function(e){return m[e]?null:m[e.toLowerCase()]=Math[e]}),Object.getOwnPropertyNames(c).forEach(function(e){return m[e]?null:m[e.toLowerCase()]=c[e]});var f=null,p={ANCHOR_CONST:"a",ALPHA:"ALPHA",LPAREN:"(",RPAREN:")",PLUS:"PLUS",MINUS:"MINUS",MUL:"MUL",DIV:"DIV",INTEGER_CONST:"INTEGER_CONST",FLOAT_CONST:"FLOAT_CONST",COMMA:",",EOF:"EOF"},d={NUMBERS:/\d|\d\.\d/,DIGIT:/\d/,OPERATOR:/[-+*\/]/,PAREN:/[()]/,WHITE_SPACE:/\s/,ALPHA:/[a-zA-Z]|%/,ALPHANUMERIC:/[a-zA-Z0-9]/,OBJECT_UNIT:/^(t|l|b|r|%w|%h|%|h|w)$/,GLOBAL_METRICS_UNIT:/^(px|vh|vw)$/,ANY_UNIT:/^(t|l|b|r|%w|%h|%|h|w|px|vh|vw)$/,MATH_FUNCTION:new RegExp("\\b(".concat(Object.keys(m).join("|"),")\\b"),"i")},b=function(e,t,r){var n=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",t.slice(Math.max(r,0),Math.min(t.length,r+3))),i=new Error("Expression Error. ".concat(e,' in expression "').concat(t,'", near "').concat(n,'"'));throw console.error(i.message,f?f.keyframe||f.target:""),i},y={round:1,clamp:3,lerp:3,random:2,atan:2,floor:1,ceil:1,abs:1,cos:1,sin:1,smoothstep:3,rad:1,deg:1,pow:2,calc:1},v=function T(e,t){(0,l["default"])(this,T),this.type=e,this.value=t};v.ONE=new v("100",100),v.EOF=new v(p.EOF,null);var _=function R(e){(0,l["default"])(this,R),this.type=e},g=function(e){function t(e,r){var n;return(0,l["default"])(this,t),n=(0,a["default"])(this,(0,s["default"])(t).call(this,"UnaryOp")),n.token=n.op=e,n.expr=r,n}return(0,o["default"])(t,e),t}(_),E=function(e){function t(e,r,n){var i;return(0,l["default"])(this,t),i=(0,a["default"])(this,(0,s["default"])(t).call(this,"BinOp")),i.left=e,i.op=r,i.right=n,i}return(0,o["default"])(t,e),t}(_),C=function(e){function t(e,r){var n;if((0,l["default"])(this,t),n=(0,a["default"])(this,(0,s["default"])(t).call(this,"MathOp")),n.op=e,n.list=r,y[e.value]&&r.length!==y[e.value])throw new Error("Incorrect number of arguments for '".concat(e.value,"'. Received ").concat(r.length,", expected ").concat(y[e.value]));return n}return(0,o["default"])(t,e),t}(_),k=function(e){function t(e){var r;return(0,l["default"])(this,t),r=(0,a["default"])(this,(0,s["default"])(t).call(this,"Num")),r.token=e,r.value=e.value,r}return(0,o["default"])(t,e),t}(_),w=(function(e){function t(e){var r;return(0,l["default"])(this,t),r=(0,a["default"])(this,(0,s["default"])(t).call(this,"Unit")),r.token=e,r.value=e.value,r}return(0,o["default"])(t,e),t}(_),function(e){function t(e,r,n){var i;return(0,l["default"])(this,t),i=(0,a["default"])(this,(0,s["default"])(t).call(this,"RefValue")),i.num=e,i.ref=r,i.unit=n,i}return(0,o["default"])(t,e),t}(_)),A=function(e){function t(e,r){var n;return(0,l["default"])(this,t),n=(0,a["default"])(this,(0,s["default"])(t).call(this,"CSSValue")),n.ref=e,n.propertyName=r,n}return(0,o["default"])(t,e),t}(_),S=function(e){function t(e,r){var n;return(0,l["default"])(this,t),n=(0,a["default"])(this,(0,s["default"])(t).call(this,"PropValue")),n.ref=e,n.propertyName=r,n}return(0,o["default"])(t,e),t}(_),O=function(){function e(t){(0,l["default"])(this,e),this.text=t,this.pos=0,this["char"]=this.text[this.pos],this.tokens=[];for(var r;(r=this.getNextToken())&&r!==v.EOF;)this.tokens.push(r);this.tokens.push(r)}return(0,i["default"])(e,[{key:"advance",value:function(){this["char"]=this.text[++this.pos]}},{key:"skipWhiteSpace",value:function(){for(;null!=this["char"]&&d.WHITE_SPACE.test(this["char"]);)this.advance()}},{key:"name",value:function(){for(var e="";null!=this["char"]&&d.ALPHA.test(this["char"]);)e+=this["char"],this.advance();return new v(p.ALPHA,e)}},{key:"number",value:function(){var e="";for("."===this["char"]&&(e+=this["char"],this.advance());null!=this["char"]&&d.DIGIT.test(this["char"]);)e+=this["char"],this.advance();if(null!=this["char"]&&"."===this["char"])for(e.includes(".")&&b("Number appears to contain 2 decimal points",this.text,this.pos),e+=this["char"],this.advance();null!=this["char"]&&d.DIGIT.test(this["char"]);)e+=this["char"],this.advance();return"."===e&&b("Attempted to parse a number, but found only a decimal point",this.text,this.pos),e.includes(".")?new v(p.FLOAT_CONST,parseFloat(e)):new v(p.INTEGER_CONST,parseInt(e))}},{key:"getNextToken",value:function(){for(;null!=this["char"];)if(d.WHITE_SPACE.test(this["char"]))this.skipWhiteSpace();else{if("."===this["char"]||d.DIGIT.test(this["char"]))return this.number();if(","===this["char"])return this.advance(),new v(p.COMMA,",");if(d.OPERATOR.test(this["char"])){var e="",t=this["char"];switch(t){case"+":e=p.PLUS;break;case"-":e=p.MINUS;break;case"*":e=p.MUL;break;case"/":e=p.DIV}return this.advance(),new v(e,t)}if(d.PAREN.test(this["char"])){var r="",n=this["char"];switch(n){case"(":r=p.LPAREN;break;case")":r=p.RPAREN}return this.advance(),new v(r,n)}if(d.ALPHA.test(this["char"]))return this.name();b('Unexpected character "'.concat(this["char"],'"'),this.text,this.pos)}return v.EOF}}]),e}(),P=function(){function e(t){(0,l["default"])(this,e),this.lexer=t,this.pos=0}return(0,i["default"])(e,[{key:"error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";b(e,t,this.lexer.text,this.pos)}},{key:"consume",value:function(e){var t=this.currentToken;return t.type===e?this.pos+=1:this.error("Invalid token ".concat(this.currentToken.value,", expected ").concat(e)),t}},{key:"consumeList",value:function(e){e.includes(this.currentToken)?this.pos+=1:this.error("Invalid token ".concat(this.currentToken.value,", expected ").concat(tokenType))}},{key:"expr",value:function(){for(var e=this.term();this.currentToken.type===p.PLUS||this.currentToken.type===p.MINUS;){var t=this.currentToken;switch(t.value){case"+":this.consume(p.PLUS);break;case"-":this.consume(p.MINUS)}e=new E(e,t,this.term())}return e}},{key:"term",value:function(){for(var e=this.factor();this.currentToken.type===p.MUL||this.currentToken.type===p.DIV;){var t=this.currentToken;switch(t.value){case"*":this.consume(p.MUL);break;case"/":this.consume(p.DIV)}e=new E(e,t,this.factor())}return e}},{key:"factor",value:function(){if(this.currentToken.type===p.PLUS)return new g(this.consume(p.PLUS),this.factor());if(this.currentToken.type===p.MINUS)return new g(this.consume(p.MINUS),this.factor());if(this.currentToken.type===p.INTEGER_CONST||this.currentToken.type===p.FLOAT_CONST){var e=new k(this.currentToken);if(this.pos+=1,d.OPERATOR.test(this.currentToken.value)||this.currentToken.type===p.RPAREN||this.currentToken.type===p.COMMA||this.currentToken.type===p.EOF)return e;if(this.currentToken.type===p.ALPHA&&this.currentToken.value===p.ANCHOR_CONST)return this.consume(p.ALPHA),new w(e,this.anchorIndex(),this.unit(d.ANY_UNIT));if(this.currentToken.type===p.ALPHA)return"%a"===this.currentToken.value&&this.error("%a is invalid, try removing the %"),new w(e,null,this.unit());this.error("Expected a scaling unit type","Such as 'h' / 'w'")}else{if(d.OBJECT_UNIT.test(this.currentToken.value))return new w(new k(v.ONE),null,this.unit());if(this.currentToken.value===p.ANCHOR_CONST){this.consume(p.ALPHA);var t=this.anchorIndex();if(d.OBJECT_UNIT.test(this.currentToken.value))return new w(new k(v.ONE),t,this.unit())}else if(this.currentToken.type===p.ALPHA){if("calc"===this.currentToken.value)return this.consume(p.ALPHA),this.expr();if("css"===this.currentToken.value||"var"===this.currentToken.value||"prop"===this.currentToken.value){var r="prop"!==this.currentToken.value?A:S;this.consume(p.ALPHA),this.consume(p.LPAREN);var n=this.propertyName(),i=null;return this.currentToken.type===p.COMMA&&(this.consume(p.COMMA),this.consume(p.ALPHA),i=this.anchorIndex()),this.consume(p.RPAREN),new r(i,n)}if(d.MATH_FUNCTION.test(this.currentToken.value)){var a=this.currentToken.value.toLowerCase();if("number"==typeof m[a])return this.consume(p.ALPHA),new k(new v(p.ALPHA,m[a]));var s=v[a]||new v(a,a),o=[];this.consume(p.ALPHA),this.consume(p.LPAREN);var l=null;do this.currentToken.value===p.COMMA&&this.consume(p.COMMA),l=this.expr(),o.push(l);while(this.currentToken.value===p.COMMA);return this.consume(p.RPAREN),new C(s,o)}}else if(this.currentToken.type===p.LPAREN){this.consume(p.LPAREN);var u=this.expr();return this.consume(p.RPAREN),u}}this.error("Unexpected token ".concat(this.currentToken.value))}},{key:"propertyName",value:function(){for(var e="";this.currentToken.type===p.ALPHA||this.currentToken.type===p.MINUS;)e+=this.currentToken.value,this.pos+=1;return e}},{key:"unit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.ANY_UNIT,t=this.currentToken;return t.type===p.ALPHA&&e.test(t.value)?(this.consume(p.ALPHA),new v(p.ALPHA,t.value=t.value.replace(/%(h|w)/,"$1").replace("%","h"))):void this.error("Expected unit type")}},{key:"anchorIndex",value:function(){var e=this.currentToken;return e.type===p.INTEGER_CONST?(this.consume(p.INTEGER_CONST),new k(e)):void this.error("Invalid anchor reference",". Should be something like a0, a1, a2")}},{key:"parse",value:function(){var e=this.expr();return this.currentToken!==v.EOF&&this.error("Unexpected token ".concat(this.currentToken.value)),e}},{key:"currentToken",get:function(){return this.lexer.tokens[this.pos]}}]),e}(),x=function(){function e(t){(0,l["default"])(this,e),this.parser=t,this.root=t.parse()}return(0,i["default"])(e,[{key:"visit",value:function(e){var t=this[e.type];if(!t)throw new Error("No visit method named, ".concat(t));var r=t.call(this,e);return r}},{key:"BinOp",value:function(e){switch(e.op.type){case p.PLUS:return this.visit(e.left)+this.visit(e.right);case p.MINUS:return this.visit(e.left)-this.visit(e.right);case p.MUL:return this.visit(e.left)*this.visit(e.right);case p.DIV:return this.visit(e.left)/this.visit(e.right)}}},{key:"RefValue",value:function(e){var t=this.unwrapReference(e),r=e.unit.value,n=e.num.value,i=f.metrics.get(t);switch(r){case"h":return.01*n*i.height;case"t":return.01*n*i.top;case"vh":return.01*n*u.pageMetrics.windowHeight;case"vw":return.01*n*u.pageMetrics.windowWidth;case"px":return n;case"w":return.01*n*i.width;case"b":return.01*n*i.bottom;case"l":return.01*n*i.left;case"r":return.01*n*i.right}}},{key:"PropValue",value:function(e){var t=null===e.ref?f.target:f.anchors[e.ref.value];return t[e.propertyName]}},{key:"CSSValue",value:function(t){var r=this.unwrapReference(t),n=getComputedStyle(r).getPropertyValue(t.propertyName);return""===n?0:e.Parse(n).execute(f)}},{key:"Num",value:function(e){return e.value}},{key:"UnaryOp",value:function(e){return e.op.type===p.PLUS?+this.visit(e.expr):e.op.type===p.MINUS?-this.visit(e.expr):void 0}},{key:"MathOp",value:function(e){var t=this,r=e.list.map(function(e){return t.visit(e)});return m[e.op.value].apply(null,r)}},{key:"unwrapReference",value:function(e){return null===e.ref?f.target:(e.ref.value>=f.anchors.length&&console.error("Not enough anchors supplied for expression ".concat(this.parser.lexer.text),f.target),f.anchors[e.ref.value])}},{key:"execute",value:function(e){return f=e,this.visit(this.root)}}],[{key:"Parse",value:function(t){return h[t]||(h[t]=new e(new P(new O(t))))}}]),e}();x.programs=h,t.exports=x},{"../Model/AnimSystemModel":72,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,"@marcom/sm-math-utils":165}],87:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/assertThisInitialized")),l=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/get")),c=n(e("@babel/runtime/helpers/inherits")),h=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,m=e("@marcom/sm-math-utils"),f=e("./utils/arrayToObject"),p=e("./Model/AnimSystemModel"),d=e("./Model/AnimInfo"),b=e("./Model/Progress"),y=e("./Model/ViewableRange"),v=e("./Model/ElementMetricsLookup"),_=e("./Parsing/ExpressionParser"),g=e("./Keyframes/KeyframeController"),E={};"undefined"!=typeof window&&(E.create=e("@marcom/ac-raf-emitter/RAFEmitter"),E.update=e("@marcom/ac-raf-emitter/update"),E.draw=e("@marcom/ac-raf-emitter/draw"));var C=0,k=function(e){function t(e,r){var n;return(0,i["default"])(this,t),n=(0,s["default"])(this,(0,l["default"])(t).call(this)),n.anim=r,n.element=e,n.name=n.name||e.getAttribute("data-anim-scroll-group"),n.isEnabled=!0,n.position=new b,n.metrics=new v,n.metrics.add(n.element),n.expressionParser=new _((0,o["default"])(n)),n.boundsMin=0,n.boundsMax=0,n.timelineUpdateRequired=!1,n._keyframesDirty=!1,n.viewableRange=n.createViewableRange(),n.defaultEase=p.KeyframeDefaults.ease,n.keyframeControllers=[],n.updateProgress(n.getPosition()),n.onDOMRead=n.onDOMRead.bind((0,o["default"])(n)),n.onDOMWrite=n.onDOMWrite.bind((0,o["default"])(n)),n.gui=null,n.finalizeInit(),n}return(0,c["default"])(t,e),(0,a["default"])(t,[{key:"finalizeInit",value:function(){this.element._animInfo=new d(this,null,(!0)),this.setupRAFEmitter()}},{key:"destroy",value:function(){this.destroyed=!0,this.expressionParser.destroy(),this.expressionParser=null;for(var e=0,r=this.keyframeControllers.length;e<r;e++)this.keyframeControllers[e].destroy();this.keyframeControllers=null,this.position=null,this.viewableRange=null,this.gui&&(this.gui.destroy(),this.gui=null),this.metrics.destroy(),this.metrics=null,this.rafEmitter.destroy(),this.rafEmitter=null,this.anim=null,this.element._animInfo&&this.element._animInfo.group===this&&(this.element._animInfo.group=null,this.element._animInfo=null),this.element=null,this.isEnabled=!1,(0,u["default"])((0,l["default"])(t.prototype),"destroy",this).call(this)}},{key:"removeKeyframeController",value:function(e){var t=this;return this.keyframeControllers.includes(e)?(e._allKeyframes.forEach(function(e){return e.markedForRemoval=!0}),this.keyframesDirty=!0,new Promise(function(r){E.draw(function(){var n=t.keyframeControllers.indexOf(e);return n===-1?void r():(t.keyframeControllers.splice(n,1),e.onDOMWrite(),e.destroy(),t.gui&&t.gui.create(),void r())})})):Promise.resolve()}},{key:"remove",value:function(){return this.anim.removeGroup(this)}},{key:"clear",value:function(){var e=this;return Promise.all(this.keyframeControllers.map(function(t){return e.removeKeyframeController(t)}))}},{key:"setupRAFEmitter",value:function(e){var t=this;this.rafEmitter&&this.rafEmitter.destroy(),this.rafEmitter=e||new E.create,this.rafEmitter.on("update",this.onDOMRead),this.rafEmitter.on("draw",this.onDOMWrite),this.rafEmitter.once("external",function(){return t.reconcile()})}},{key:"requestDOMChange",value:function(){return!!this.isEnabled&&this.rafEmitter.run()}},{key:"onDOMRead",value:function(){this.keyframesDirty&&this.onKeyframesDirty();for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].onDOMRead(this.position.local)}},{key:"onDOMWrite",value:function(){for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].onDOMWrite();this.needsUpdate()&&this.requestDOMChange()}},{key:"needsUpdate",value:function(){if(this._keyframesDirty)return!0;for(var e=0,t=this.keyframeControllers.length;e<t;e++)if(this.keyframeControllers[e].needsUpdate())return!0;return!1}},{key:"addKeyframe",value:function(e,t){var r=this.getControllerForTarget(e);return null===r&&(r=new g(this,e),this.keyframeControllers.push(r)),this.keyframesDirty=!0,r.addKeyframe(t)}},{key:"addEvent",value:function(e,t){t.event=t.event||"Generic-Event-Name-"+C++;var r=void 0!==t.end&&t.end!==t.start,n=this.addKeyframe(e,t);return r?(t.onEnterOnce&&n.controller.once(t.event+":enter",t.onEnterOnce),t.onExitOnce&&n.controller.once(t.event+":exit",t.onExitOnce),t.onEnter&&n.controller.on(t.event+":enter",t.onEnter),t.onExit&&n.controller.on(t.event+":exit",t.onExit)):(t.onEventOnce&&n.controller.once(t.event,t.onEventOnce),t.onEventReverseOnce&&n.controller.once(t.event+":reverse",t.onEventReverseOnce),t.onEvent&&n.controller.on(t.event,t.onEvent),t.onEventReverse&&n.controller.on(t.event+":reverse",t.onEventReverse)),n}},{key:"forceUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.waitForNextUpdate,r=void 0===t||t,n=e.silent,i=void 0!==n&&n;this.isEnabled&&(this.refreshMetrics(),this.timelineUpdateRequired=!0,r?this.keyframesDirty=!0:this.onKeyframesDirty({silent:i}))}},{key:"onKeyframesDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.silent,r=void 0!==t&&t;this.determineActiveKeyframes(),this.keyframesDirty=!1,this.metrics.refreshMetrics(this.element),this.viewableRange=this.createViewableRange();for(var n=0,i=this.keyframeControllers.length;n<i;n++)this.keyframeControllers[n].updateAnimationConstraints();this.updateBounds(),this.updateProgress(this.getPosition()),r||this.updateTimeline(),this.gui&&this.gui.create()}},{key:"refreshMetrics",value:function(){var e=new Set([this.element]);this.keyframeControllers.forEach(function(t){e.add(t.element),t._allKeyframes.forEach(function(t){return t.anchors.forEach(function(t){return e.add(t)})})}),this.metrics.refreshCollection(e),this.viewableRange=this.createViewableRange()}},{key:"reconcile",value:function(){for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].reconcile()}},{key:"determineActiveKeyframes",value:function(e){e=e||f(Array.from(document.documentElement.classList));for(var t=0,r=this.keyframeControllers.length;t<r;t++)this.keyframeControllers[t].determineActiveKeyframes(e)}},{key:"updateBounds",value:function(){if(0===this.keyframeControllers.length)return this.boundsMin=0,void(this.boundsMax=0);for(var e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},t=0,r=this.keyframeControllers.length;t<r;t++)this.keyframeControllers[t].getBounds(e);var n=this.convertTValueToScrollPosition(e.min),i=this.convertTValueToScrollPosition(e.max);i-n<p.pageMetrics.windowHeight?(e.min=this.convertScrollPositionToTValue(n-.5*p.pageMetrics.windowHeight),e.max=this.convertScrollPositionToTValue(i+.5*p.pageMetrics.windowHeight)):(e.min-=.001,e.max+=.001),this.boundsMin=e.min,this.boundsMax=e.max,this.timelineUpdateRequired=!0}},{key:"createViewableRange",value:function(){return new y(this.metrics.get(this.element),p.pageMetrics.windowHeight)}},{key:"_onBreakpointChange",value:function(e,t){this.keyframesDirty=!0,this.determineActiveKeyframes()}},{key:"updateProgress",value:function(e){return this.hasDuration()?(this.position.localUnclamped=(e-this.viewableRange.a)/(this.viewableRange.d-this.viewableRange.a),void(this.position.local=m.clamp(this.position.localUnclamped,this.boundsMin,this.boundsMax))):void(this.position.local=this.position.localUnclamped=0)}},{key:"performTimelineDispatch",value:function(){for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].updateLocalProgress(this.position.local);this.trigger(p.EVENTS.ON_TIMELINE_UPDATE,this.position.local),this.trigger("update",this.position.local),this.timelineUpdateRequired=!1,this.position.lastPosition!==this.position.local&&(this.position.lastPosition<=this.boundsMin&&this.position.localUnclamped>this.boundsMin?(this.trigger(p.EVENTS.ON_TIMELINE_START,this),this.trigger("start",this)):this.position.lastPosition>=this.boundsMin&&this.position.localUnclamped<this.boundsMin?(this.trigger(p.EVENTS.ON_TIMELINE_START+":reverse",this),this.trigger("start:reverse",this)):this.position.lastPosition<=this.boundsMax&&this.position.localUnclamped>=this.boundsMax?(this.trigger(p.EVENTS.ON_TIMELINE_COMPLETE,this),this.trigger("complete",this)):this.position.lastPosition>=this.boundsMax&&this.position.localUnclamped<this.boundsMax&&(this.trigger(p.EVENTS.ON_TIMELINE_COMPLETE+":reverse",this),this.trigger("complete:reverse",this))),null!==this.gui&&this.gui.onScrollUpdate(this.position)}},{key:"updateTimeline",value:function(e){if(!this.isEnabled)return!1;void 0===e&&(e=this.getPosition()),this.updateProgress(e);var t=this.position.lastPosition===this.boundsMin||this.position.lastPosition===this.boundsMax,r=this.position.localUnclamped===this.boundsMin||this.position.localUnclamped===this.boundsMax;if(!this.timelineUpdateRequired&&t&&r&&this.position.lastPosition===e)return void(this.position.local=this.position.localUnclamped);if(this.timelineUpdateRequired||this.position.localUnclamped>this.boundsMin&&this.position.localUnclamped<this.boundsMax)return this.performTimelineDispatch(),this.requestDOMChange(),void(this.position.lastPosition=this.position.localUnclamped);var n=this.position.lastPosition>this.boundsMin&&this.position.lastPosition<this.boundsMax,i=this.position.localUnclamped<=this.boundsMin||this.position.localUnclamped>=this.boundsMax;if(n&&i)return this.performTimelineDispatch(),this.requestDOMChange(),void(this.position.lastPosition=this.position.localUnclamped);var a=this.position.lastPosition<this.boundsMin&&this.position.localUnclamped>this.boundsMax,s=this.position.lastPosition>this.boundsMax&&this.position.localUnclamped<this.boundsMax;(a||s)&&(this.performTimelineDispatch(),this.requestDOMChange(),this.position.lastPosition=this.position.localUnclamped),null!==this.gui&&this.gui.onScrollUpdate(this.position)}},{key:"_onScroll",value:function(e){this.updateTimeline(e)}},{key:"convertScrollPositionToTValue",value:function(e){return this.hasDuration()?m.map(e,this.viewableRange.a,this.viewableRange.d,0,1):0}},{key:"convertTValueToScrollPosition",value:function(e){return this.hasDuration()?m.map(e,0,1,this.viewableRange.a,this.viewableRange.d):0}},{key:"hasDuration",value:function(){return this.viewableRange.a!==this.viewableRange.d}},{key:"getPosition",value:function(){return p.pageMetrics.scrollY}},{key:"getControllerForTarget",value:function(e){if(!e._animInfo||!e._animInfo.controllers)return null;if(e._animInfo.controller&&e._animInfo.controller.group===this)return e._animInfo.controller;for(var t=e._animInfo.controllers,r=0,n=t.length;r<n;r++)if(t[r].group===this)return t[r];return null}},{key:"trigger",value:function(e,t){if("undefined"!=typeof this._events[e])for(var r=this._events[e].length-1;r>=0;r--)void 0!==t?this._events[e][r](t):this._events[e][r]()}},{key:"keyframesDirty",set:function(e){this._keyframesDirty=e,this._keyframesDirty&&this.requestDOMChange()},get:function(){return this._keyframesDirty}}]),t}(h);t.exports=k},{"./Keyframes/KeyframeController":69,"./Model/AnimInfo":71,"./Model/AnimSystemModel":72,"./Model/ElementMetricsLookup":75,"./Model/Progress":78,"./Model/ViewableRange":84,"./Parsing/ExpressionParser":85,"./utils/arrayToObject":90,"@babel/runtime/helpers/assertThisInitialized":9,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/get":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,"@marcom/ac-event-emitter-micro":5,"@marcom/ac-raf-emitter/RAFEmitter":51,"@marcom/ac-raf-emitter/draw":57,"@marcom/ac-raf-emitter/update":61,"@marcom/sm-math-utils":165}],88:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/assertThisInitialized")),l=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/get")),c=n(e("@babel/runtime/helpers/inherits")),h=e("./ScrollGroup"),m=e("./ChapterPlayer"),f=e("@marcom/sm-math-utils"),p=0,d={};"undefined"!=typeof window&&(d.create=e("@marcom/ac-raf-emitter/RAFEmitter"));var b=function(e){function t(e,r){var n;return(0,i["default"])(this,t),e||(e=document.createElement("div"),e.className="TimeGroup-"+p++),n=(0,s["default"])(this,(0,
l["default"])(t).call(this,e,r)),n.name=n.name||e.getAttribute("data-anim-time-group"),n._isPaused=!0,n._repeats=0,n._isReversed=!1,n._timeScale=1,n._chapterPlayer=new m((0,o["default"])(n)),n.now=performance.now(),n}return(0,c["default"])(t,e),(0,a["default"])(t,[{key:"finalizeInit",value:function(){if(!this.anim)throw"TimeGroup not instantiated correctly. Please use `AnimSystem.createTimeGroup(el)`";this.onPlayTimeUpdate=this.onPlayTimeUpdate.bind(this),(0,u["default"])((0,l["default"])(t.prototype),"finalizeInit",this).call(this)}},{key:"progress",value:function(e){if(void 0===e)return 0===this.boundsMax?0:this.position.local/this.boundsMax;var t=e*this.boundsMax;this.timelineUpdateRequired=!0,this.updateTimeline(t)}},{key:"time",value:function(e){return void 0===e?this.position.local:(e=f.clamp(e,this.boundsMin,this.duration),this.timelineUpdateRequired=!0,void this.updateTimeline(e))}},{key:"play",value:function(e){this.reversed(!1),this.isEnabled=!0,this._isPaused=!1,this.time(e),this.now=performance.now(),this._playheadEmitter.run()}},{key:"reverse",value:function(e){this.reversed(!0),this.isEnabled=!0,this._isPaused=!1,this.time(e),this.now=performance.now(),this._playheadEmitter.run()}},{key:"reversed",value:function(e){return void 0===e?this._isReversed:void(this._isReversed=e)}},{key:"restart",value:function(){this._isReversed?(this.progress(1),this.reverse(this.time())):(this.progress(0),this.play(this.time()))}},{key:"pause",value:function(e){this.time(e),this._isPaused=!0}},{key:"paused",value:function(e){return void 0===e?this._isPaused:(this._isPaused=e,this._isPaused||this.play(),this)}},{key:"onPlayTimeUpdate",value:function(){if(!this._isPaused){var e=performance.now(),r=(e-this.now)/1e3;this.now=e,this._isReversed&&(r=-r);var n=this.time(),i=n+r*this._timeScale;if(this._repeats===t.REPEAT_FOREVER||this._repeats>0){var a=!1;!this._isReversed&&i>this.boundsMax?(i-=this.boundsMax,a=!0):this._isReversed&&i<0&&(i=this.boundsMax+i,a=!0),a&&(this._repeats=this._repeats===t.REPEAT_FOREVER?t.REPEAT_FOREVER:this._repeats-1)}this.time(i);var s=!this._isReversed&&this.position.local!==this.duration,o=this._isReversed&&0!==this.position.local;s||o?this._playheadEmitter.run():this.paused(!0)}}},{key:"updateProgress",value:function(e){return this.hasDuration()?(this.position.localUnclamped=e,void(this.position.local=f.clamp(this.position.localUnclamped,this.boundsMin,this.boundsMax))):void(this.position.local=this.position.localUnclamped=0)}},{key:"updateBounds",value:function(){if(0===this.keyframeControllers.length)return this.boundsMin=0,void(this.boundsMax=0);for(var e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},t=0,r=this.keyframeControllers.length;t<r;t++)this.keyframeControllers[t].getBounds(e);this.boundsMin=0,this.boundsMax=e.max,this.viewableRange.a=this.viewableRange.b=0,this.viewableRange.c=this.viewableRange.d=this.boundsMax,this.timelineUpdateRequired=!0}},{key:"setupRAFEmitter",value:function(e){this._playheadEmitter=new d.create,this._playheadEmitter.on("update",this.onPlayTimeUpdate),(0,u["default"])((0,l["default"])(t.prototype),"setupRAFEmitter",this).call(this,e)}},{key:"timeScale",value:function(e){return void 0===e?this._timeScale:(this._timeScale=e,this)}},{key:"repeats",value:function(e){return void 0===e?this._repeats:void(this._repeats=e)}},{key:"getPosition",value:function(){return this.position.local}},{key:"addChapter",value:function(e){return this._chapterPlayer.addChapter(e)}},{key:"playToChapter",value:function(e){this._chapterPlayer.playToChapter(e)}},{key:"convertScrollPositionToTValue",value:function(e){return e}},{key:"convertTValueToScrollPosition",value:function(e){return e}},{key:"hasDuration",value:function(){return this.duration>0}},{key:"destroy",value:function(){this._playheadEmitter.destroy(),this._playheadEmitter=null,(0,u["default"])((0,l["default"])(t.prototype),"destroy",this).call(this)}},{key:"duration",get:function(){return this.keyframesDirty&&this.onKeyframesDirty({silent:!0}),this.boundsMax}},{key:"timelineProgress",set:function(e){this.progress(e)},get:function(){return this.progress()}}]),t}(h);b.REPEAT_FOREVER=-1,t.exports=b},{"./ChapterPlayer":66,"./ScrollGroup":87,"@babel/runtime/helpers/assertThisInitialized":9,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/get":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,"@marcom/ac-raf-emitter/RAFEmitter":51,"@marcom/sm-math-utils":165}],89:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/toConsumableArray")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),l=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/get")),c=n(e("@babel/runtime/helpers/inherits")),h=e("./ScrollGroup"),m=(e("./ChapterPlayer"),e("@marcom/sm-math-utils")),f=0,p={};"undefined"!=typeof window&&(p.create=e("@marcom/ac-raf-emitter/RAFEmitter"));var d=function(e){function t(e,r){var n;return(0,a["default"])(this,t),e||(e=document.createElement("div"),e.className="TweenGroup-"+f++),n=(0,o["default"])(this,(0,l["default"])(t).call(this,e,r)),n.name="Tweens",n.keyframes=[],n._isPaused=!1,n.now=performance.now(),n}return(0,c["default"])(t,e),(0,s["default"])(t,[{key:"finalizeInit",value:function(){this.onTimeEmitterUpdate=this.onTimeEmitterUpdate.bind(this),this.removeExpiredKeyframeControllers=this.removeExpiredKeyframeControllers.bind(this),(0,u["default"])((0,l["default"])(t.prototype),"finalizeInit",this).call(this)}},{key:"destroy",value:function(){this._timeEmitter.destroy(),this._timeEmitter=null,this._keyframes=[],(0,u["default"])((0,l["default"])(t.prototype),"destroy",this).call(this)}},{key:"setupRAFEmitter",value:function(e){this.now=performance.now(),this._timeEmitter=new p.create,this._timeEmitter.on("update",this.onTimeEmitterUpdate),this._timeEmitter.run(),(0,u["default"])((0,l["default"])(t.prototype),"setupRAFEmitter",this).call(this,e)}},{key:"addKeyframe",value:function(e,r){if(void 0!==r.start||void 0!==r.end)throw Error("Tweens do not have a start or end, they can only have a duration. Consider using a TimeGroup instead");if("number"!=typeof r.duration)throw Error("Tween options.duration is undefined, or is not a number");r.start=(r.delay||0)+this.position.localUnclamped,r.end=r.start+r.duration,r.preserveState=!0,r.snapAtCreation=!0;var n,i;e._animInfo&&(n=e._animInfo.group,i=e._animInfo.controller);var a=(0,u["default"])((0,l["default"])(t.prototype),"addKeyframe",this).call(this,e,r);return e._animInfo.group=n,e._animInfo.controller=i,r.onStart&&a.controller.once("draw",function(e){e.keyframe=a,r.onStart(e),e.keyframe=null}),r.onDraw&&a.controller.on("draw",function(e){e.keyframe=a,r.onDraw(e),e.keyframe=null}),this.removeOverlappingProps(a),this.keyframes.push(a),this._timeEmitter.willRun()||(this.now=performance.now(),this._timeEmitter.run()),a}},{key:"removeOverlappingProps",value:function(e){if(!(e.controller._allKeyframes.length<=1))for(var t=Object.keys(e.animValues),r=e.controller,n=function(n,i){var a=r._allKeyframes[n];if(a===e)return"continue";if(a.markedForRemoval)return"continue";var s=Object.keys(a.animValues),o=s.filter(function(e){return t.includes(e)});return o.length===s.length?(a.markedForRemoval=!0,"continue"):void o.forEach(function(e){return delete a.animValues[e]})},i=0,a=r._allKeyframes.length;i<a;i++){n(i,a)}}},{key:"onTimeEmitterUpdate",value:function(e){if(!this._isPaused&&0!==this.keyframeControllers.length){var t=performance.now(),r=(t-this.now)/1e3;this.now=t;var n=this.position.local+r;this.position.local=this.position.localUnclamped=n,this.onTimeUpdate()}}},{key:"onTimeUpdate",value:function(){for(var e=0,t=this.keyframes.length;e<t;e++)this.keyframes[e].updateLocalProgress(this.position.localUnclamped);this.requestDOMChange(),this._timeEmitter.run(),null!==this.gui&&this.gui.onScrollUpdate(this.position)}},{key:"onDOMRead",value:function(){if(this.keyframesDirty&&this.onKeyframesDirty(),0!==this.keyframes.length)for(var e=0,t=this.keyframes.length;e<t;e++){this.keyframes[e].controller.needsWrite=!0;for(var r in this.keyframes[e].animValues)this.keyframes[e].onDOMRead(r)}}},{key:"onDOMWrite",value:function(){(0,u["default"])((0,l["default"])(t.prototype),"onDOMWrite",this).call(this),this.removeExpiredKeyframes()}},{key:"removeExpiredKeyframes",value:function(){for(var e=this.keyframes.length,t=e;e--;){var r=this.keyframes[e];r.destroyed?this.keyframes.splice(e,1):(r.markedForRemoval&&(r.jsonProps.onComplete&&1===r.localT&&(r.controller.eventObject.keyframe=r,r.jsonProps.onComplete(r.controller.eventObject),r.jsonProps.onComplete=null),null!==this.gui&&this.gui.isDraggingPlayhead||(r.remove(),this.keyframes.splice(e,1))),1===r.localT&&(r.markedForRemoval=!0))}this.keyframes.length===t&&0!==this.keyframes.length||this._timeEmitter.executor.eventEmitter.once("after:draw",this.removeExpiredKeyframeControllers)}},{key:"removeExpiredKeyframeControllers",value:function(){for(var e=0,t=this.keyframeControllers.length;e<t;e++){for(var r=!0,n=this.keyframeControllers[e],i=0,a=n._allKeyframes.length;i<a;i++)if(!n._allKeyframes[i].destroyed){r=!1;break}r&&n.remove()}}},{key:"updateBounds",value:function(){this.boundsMin=Math.min.apply(Math,(0,i["default"])(this.keyframes.map(function(e){return e.start}))),this.boundsMax=Math.max.apply(Math,(0,i["default"])(this.keyframes.map(function(e){return e.end})))}},{key:"play",value:function(){this.isEnabled=!0,this._isPaused=!1,this.now=performance.now(),this._timeEmitter.run()}},{key:"pause",value:function(){this._isPaused=!0}},{key:"paused",value:function(){return this._isPaused}},{key:"time",value:function(e){return void 0===e?this.position.local:(this.position.local=this.position.localUnclamped=m.clamp(e,this.boundsMin,this.boundsMax),void this.onTimeUpdate())}},{key:"performTimelineDispatch",value:function(){}},{key:"hasDuration",value:function(){return!0}},{key:"getPosition",value:function(){return this.position.local}},{key:"updateProgress",value:function(e){}},{key:"duration",get:function(){return this.boundsMax}}]),t}(h);t.exports=d},{"./ChapterPlayer":66,"./ScrollGroup":87,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/get":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,"@babel/runtime/helpers/toConsumableArray":26,"@marcom/ac-raf-emitter/RAFEmitter":51,"@marcom/sm-math-utils":165}],90:[function(e,t,r){"use strict";var n=function(e){return e.reduce(function(e,t){return e[t]=t,e},{})};t.exports=n},{}],91:[function(e,t,r){"use strict";t.exports=function(e,t){if("string"!=typeof e)return e;try{return(t||document).querySelector(e)||document.querySelector(e)}catch(r){return!1}}},{}],92:[function(e,t,r){arguments[4][50][0].apply(r,arguments)},{dup:50}],93:[function(e,t,r){arguments[4][51][0].apply(r,arguments)},{"./sharedRAFEmitterIDGeneratorInstance":101,"./sharedRAFExecutorInstance":102,"@marcom/ac-event-emitter-micro":5,dup:51}],94:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{"@marcom/ac-event-emitter-micro/EventEmitterMicro":6,dup:52}],95:[function(e,t,r){arguments[4][53][0].apply(r,arguments)},{"./SingleCallRAFEmitter":97,dup:53}],96:[function(e,t,r){arguments[4][54][0].apply(r,arguments)},{"./RAFInterface":95,dup:54}],97:[function(e,t,r){arguments[4][55][0].apply(r,arguments)},{"./RAFEmitter":93,dup:55}],98:[function(e,t,r){arguments[4][56][0].apply(r,arguments)},{"./RAFInterfaceController":96,dup:56}],99:[function(e,t,r){arguments[4][57][0].apply(r,arguments)},{"./RAFInterfaceController":96,dup:57}],100:[function(e,t,r){arguments[4][58][0].apply(r,arguments)},{"./RAFInterfaceController":96,dup:58}],101:[function(e,t,r){arguments[4][59][0].apply(r,arguments)},{"../.release-info.js":92,"@marcom/ac-shared-instance":46,dup:59}],102:[function(e,t,r){arguments[4][60][0].apply(r,arguments)},{"../.release-info.js":92,"./RAFExecutor":94,"@marcom/ac-shared-instance":46,dup:60}],103:[function(e,t,r){arguments[4][61][0].apply(r,arguments)},{"./RAFInterfaceController":96,dup:61}],104:[function(e,t,r){arguments[4][64][0].apply(r,arguments)},{dup:64}],105:[function(e,t,r){arguments[4][65][0].apply(r,arguments)},{"./.release-info":104,"./Keyframes/Keyframe":107,"./Keyframes/KeyframeCSSClass":108,"./Keyframes/KeyframeDiscreteEvent":110,"./Model/AnimSystemModel":112,"./ScrollGroup":127,"./TimeGroup":128,"./TweenGroup":129,"@babel/runtime/helpers/assertThisInitialized":9,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,"@marcom/ac-event-emitter-micro":5,"@marcom/ac-raf-emitter/cancelUpdate":98,"@marcom/ac-raf-emitter/draw":99,"@marcom/ac-raf-emitter/external":100,"@marcom/ac-raf-emitter/update":103,dup:65}],106:[function(e,t,r){arguments[4][66][0].apply(r,arguments)},{"./Model/AnimSystemModel":112,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/interopRequireDefault":16,dup:66}],107:[function(e,t,r){arguments[4][67][0].apply(r,arguments)},{"../Model/AnimSystemModel":112,"../Model/EasingFunctions":114,"../Model/SpringEasing":119,"../Model/TargetValue":120,"../Model/UUID":122,"../Model/UnitBezier":123,"../utils/arrayToObject":130,"../utils/toValidAnchor":131,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/interopRequireDefault":16,"@marcom/sm-math-utils":165,dup:67}],108:[function(e,t,r){arguments[4][68][0].apply(r,arguments)},{"../Model/AnimSystemModel.js":112,"../Model/TargetValue.js":120,"./Keyframe":107,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,"@babel/runtime/helpers/typeof":27,dup:68}],109:[function(e,t,r){arguments[4][69][0].apply(r,arguments)},{"../Model/AnimInfo":111,"../Model/AnimSystemModel":112,"../Model/CSSTargetValue":113,"../Model/EventObject":116,"../Model/InferKeyframeFromProps":117,"../Model/TargetValue":120,"../Model/UUID":122,"../utils/arrayToObject":130,"./Keyframe":107,"./KeyframeCSSClass":108,"@babel/runtime/helpers/assertThisInitialized":9,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/get":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,"@marcom/ac-event-emitter-micro":5,"@marcom/ac-raf-emitter/draw":99,"@marcom/ac-raf-emitter/external":100,"@marcom/ac-raf-emitter/update":103,"@marcom/decompose-css-transform":132,dup:69,"gl-mat4/create":181,"gl-mat4/rotateX":182,"gl-mat4/rotateY":183,"gl-mat4/rotateZ":184,"gl-mat4/scale":185}],110:[function(e,t,r){arguments[4][70][0].apply(r,arguments)},{"../Model/AnimSystemModel.js":112,"../Model/TargetValue.js":120,"./Keyframe":107,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/get":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,dup:70}],111:[function(e,t,r){arguments[4][71][0].apply(r,arguments)},{"./TweenProps":121,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/interopRequireDefault":16,dup:71}],112:[function(e,t,r){arguments[4][72][0].apply(r,arguments)},{"./CSSTargetValue":113,"./TargetValue":120,"./TweenProps":121,dup:72}],113:[function(e,t,r){arguments[4][73][0].apply(r,arguments)},{"./TargetValue":120,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,dup:73}],114:[function(e,t,r){arguments[4][74][0].apply(r,arguments)},{"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/interopRequireDefault":16,dup:74}],115:[function(e,t,r){arguments[4][75][0].apply(r,arguments)},{"./AnimSystemModel":112,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/interopRequireDefault":16,dup:75}],116:[function(e,t,r){arguments[4][76][0].apply(r,arguments)},{"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/interopRequireDefault":16,dup:76}],117:[function(e,t,r){arguments[4][77][0].apply(r,arguments)},{"../Keyframes/Keyframe":107,"../Keyframes/KeyframeCSSClass":108,"../Keyframes/KeyframeDiscreteEvent":110,"./AnimSystemModel":112,dup:77}],118:[function(e,t,r){arguments[4][78][0].apply(r,arguments)},{"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/interopRequireDefault":16,dup:78}],119:[function(e,t,r){arguments[4][79][0].apply(r,arguments)},{"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/construct":11,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/toConsumableArray":26,"@marcom/sm-math-utils":165,dup:79}],120:[function(e,t,r){arguments[4][80][0].apply(r,arguments)},{"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/interopRequireDefault":16,dup:80}],121:[function(e,t,r){arguments[4][81][0].apply(r,arguments)},{"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/interopRequireDefault":16,dup:81}],122:[function(e,t,r){arguments[4][82][0].apply(r,arguments)},{dup:82}],123:[function(e,t,r){arguments[4][83][0].apply(r,arguments)},{"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/interopRequireDefault":16,dup:83}],124:[function(e,t,r){arguments[4][84][0].apply(r,arguments)},{"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/interopRequireDefault":16,dup:84}],125:[function(e,t,r){arguments[4][85][0].apply(r,arguments)},{"../Model/ElementMetricsLookup":115,"./Interpreter":126,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/typeof":27,dup:85}],126:[function(e,t,r){arguments[4][86][0].apply(r,arguments)},{"../Model/AnimSystemModel":112,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,"@marcom/sm-math-utils":165,dup:86}],127:[function(e,t,r){arguments[4][87][0].apply(r,arguments)},{"./Keyframes/KeyframeController":109,"./Model/AnimInfo":111,"./Model/AnimSystemModel":112,"./Model/ElementMetricsLookup":115,"./Model/Progress":118,"./Model/ViewableRange":124,"./Parsing/ExpressionParser":125,"./utils/arrayToObject":130,"@babel/runtime/helpers/assertThisInitialized":9,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/get":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,"@marcom/ac-event-emitter-micro":5,"@marcom/ac-raf-emitter/RAFEmitter":93,"@marcom/ac-raf-emitter/draw":99,"@marcom/ac-raf-emitter/update":103,"@marcom/sm-math-utils":165,dup:87}],128:[function(e,t,r){arguments[4][88][0].apply(r,arguments)},{"./ChapterPlayer":106,"./ScrollGroup":127,"@babel/runtime/helpers/assertThisInitialized":9,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/get":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,"@marcom/ac-raf-emitter/RAFEmitter":93,"@marcom/sm-math-utils":165,dup:88}],129:[function(e,t,r){arguments[4][89][0].apply(r,arguments)},{"./ChapterPlayer":106,"./ScrollGroup":127,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/get":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,"@babel/runtime/helpers/toConsumableArray":26,"@marcom/ac-raf-emitter/RAFEmitter":93,"@marcom/sm-math-utils":165,dup:89}],130:[function(e,t,r){arguments[4][90][0].apply(r,arguments)},{dup:90}],131:[function(e,t,r){arguments[4][91][0].apply(r,arguments)},{dup:91}],132:[function(e,t,r){"use strict";function n(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}function i(e,t){return 0===t?Array.from(e):[e[0]/t,e[1]/t,e[2]/t]}function a(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function s(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function o(e,t,r,n){return[e[0]*r+t[0]*n,e[1]*r+t[1]*n,e[2]*r+t[2]*n]}function l(e){var t=new Float32Array(4),r=new Float32Array(3),l=new Float32Array(3),u=new Float32Array(3);u[0]=e[3][0],u[1]=e[3][1],u[2]=e[3][2];for(var c=new Array(3),h=0;h<3;h++)c[h]=e[h].slice(0,3);r[0]=n(c[0]),c[0]=i(c[0],r[0]),l[0]=a(c[0],c[1]),c[1]=o(c[1],c[0],1,-l[0]),r[1]=n(c[1]),c[1]=i(c[1],r[1]),l[0]/=r[1],l[1]=a(c[0],c[2]),c[2]=o(c[2],c[0],1,-l[1]),l[2]=a(c[1],c[2]),c[2]=o(c[2],c[1],1,-l[2]),r[2]=n(c[2]),c[2]=i(c[2],r[2]),l[1]/=r[2],l[2]/=r[2];var p=s(c[1],c[2]);if(a(c[0],p)<0)for(var d=0;d<3;d++)r[d]*=-1,c[d][0]*=-1,c[d][1]*=-1,c[d][2]*=-1;t[0]=.5*Math.sqrt(Math.max(1+c[0][0]-c[1][1]-c[2][2],0)),t[1]=.5*Math.sqrt(Math.max(1-c[0][0]+c[1][1]-c[2][2],0)),t[2]=.5*Math.sqrt(Math.max(1-c[0][0]-c[1][1]+c[2][2],0)),t[3]=.5*Math.sqrt(Math.max(1+c[0][0]+c[1][1]+c[2][2],0)),c[2][1]>c[1][2]&&(t[0]=-t[0]),c[0][2]>c[2][0]&&(t[1]=-t[1]),c[1][0]>c[0][1]&&(t[2]=-t[2]);var b;return b=t[0]<.001&&t[0]>=0&&t[1]<.001&&t[1]>=0?[0,0,m(180*Math.atan2(c[0][1],c[0][0])/Math.PI)]:f(t),{translation:u,rotation:b,eulerRotation:b,scale:[m(r[0]),m(r[1]),m(r[2])]}}var u=e("@babel/runtime/helpers/interopRequireDefault"),c=u(e("@babel/runtime/helpers/slicedToArray"));"undefined"!=typeof window&&(window.DOMMatrix=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix);var h=180/Math.PI,m=function(e){return Math.round(1e6*e)/1e6},f=function(e){var t=(0,c["default"])(e,4),r=t[0],n=t[1],i=t[2],a=t[3],s=a*a,o=r*r,l=n*n,u=i*i,f=r*n+i*a,p=s+o+l+u;return f>.49999*p?[0,2*Math.atan2(r,a)*h,90]:f<-.49999*p?[0,-2*Math.atan2(r,a)*h,-90]:[m(Math.atan2(2*r*a-2*n*i,1-2*o-2*u)*h),m(Math.atan2(2*n*a-2*r*i,1-2*l-2*u)*h),m(Math.asin(2*r*n+2*i*a)*h)]},p=function(e){e instanceof Element&&(e=String(getComputedStyle(e).transform).trim());for(var t=new DOMMatrix(e),r=new Array(4),n=1;n<5;n++)for(var i=r[n-1]=new Float32Array(4),a=1;a<5;a++)i[a-1]=t["m".concat(n).concat(a)];return l(r)};t.exports=p},{"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/slicedToArray":24}],133:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/get")),u=n(e("@babel/runtime/helpers/inherits")),c=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,h=e("@marcom/anim-system/Model/AnimSystemModel"),m={create:e("@marcom/ac-raf-emitter/RAFEmitter"),update:e("@marcom/ac-raf-emitter/update"),draw:e("@marcom/ac-raf-emitter/draw")},f=function(){},p=0,d=function(e){function t(e){var r;return(0,i["default"])(this,t),r=(0,s["default"])(this,(0,o["default"])(t).call(this)),r.el=e.el,r.gum=e.gum,r.componentName=e.componentName,r._keyframeController=null,r}return(0,u["default"])(t,e),(0,a["default"])(t,[{key:"destroy",value:function(){this.el=null,this.gum=null,this._keyframeController=null,(0,l["default"])((0,o["default"])(t.prototype),"destroy",this).call(this)}},{key:"addKeyframe",value:function(e){var t=e.el||this.el;return(e.group||this.anim).addKeyframe(t,e)}},{key:"addDiscreteEvent",value:function(e){e.event=e.event||"Generic-Event-Name-"+p++;var t=void 0!==e.end&&e.end!==e.start,r=this.addKeyframe(e);return t?(e.onEnterOnce&&r.controller.once(e.event+":enter",e.onEnterOnce),e.onExitOnce&&r.controller.once(e.event+":exit",e.onExitOnce),e.onEnter&&r.controller.on(e.event+":enter",e.onEnter),e.onExit&&r.controller.on(e.event+":exit",e.onExit)):(e.onEventOnce&&r.controller.once(e.event,e.onEventOnce),e.onEventReverseOnce&&r.controller.once(e.event+":reverse",e.onEventReverseOnce),e.onEvent&&r.controller.on(e.event,e.onEvent),e.onEventReverse&&r.controller.on(e.event+":reverse",e.onEventReverse)),r}},{key:"addRAFLoop",value:function(e){var t=["start","end"];if(!t.every(function(t){return e.hasOwnProperty(t)}))return void console.log("BubbleGum.BaseComponent::addRAFLoop required options are missing: "+t.join(" "));var r=new m.create;r.on("update",e.onUpdate||f),r.on("draw",e.onDraw||f),r.on("draw",function(){return r.run()});var n=e.onEnter,i=e.onExit;return e.onEnter=function(){r.run(),n?n():0},e.onExit=function(){r.cancel(),i?i():0},this.addDiscreteEvent(e)}},{key:"addContinuousEvent",value:function(e){e.onDraw||console.log("BubbleGum.BaseComponent::addContinuousEvent required option `onDraw` is missing. Consider using a regular keyframe if you do not need a callback"),e.event=e.event||"Generic-Event-Name-"+p++;var t=this.addKeyframe(e);return t.controller.on(e.event,e.onDraw),t}},{key:"mounted",value:function(){}},{key:"onResizeImmediate",value:function(e){}},{key:"onResizeDebounced",value:function(e){}},{key:"onBreakpointChange",value:function(e){}},{key:"anim",get:function(){return this.gum.anim}},{key:"keyframeController",get:function(){return this._keyframeController||(this._keyframeController=this.anim.getControllerForTarget(this.el))}},{key:"pageMetrics",get:function(){return h.pageMetrics}}]),t}(c);t.exports=d},{"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/get":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,"@marcom/ac-event-emitter-micro":5,"@marcom/ac-raf-emitter/RAFEmitter":93,"@marcom/ac-raf-emitter/draw":99,"@marcom/ac-raf-emitter/update":103,"@marcom/anim-system/Model/AnimSystemModel":112}],134:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/inherits")),u=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,c=e("@marcom/delayed-initializer"),h=e("@marcom/anim-system"),m=e("@marcom/anim-system/Model/AnimSystemModel"),f=e("./ComponentMap"),p={},d=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i["default"])(this,t),r=(0,s["default"])(this,(0,o["default"])(t).call(this)),r.el=e,r.anim=h,r.componentAttribute=n.attribute||"data-component-list",r.components=[],r.componentsInitialized=!1,r.el.getAttribute("data-anim-scroll-group")||r.el.setAttribute("data-anim-scroll-group","bubble-gum-group"),c.add(function(){h.initialize().then(function(){r.initComponents(),r.setupEvents(),r.components.forEach(function(e){return e.mounted()}),r.trigger(t.EVENTS.DOM_COMPONENTS_MOUNTED)})}),r}return(0,l["default"])(t,e),(0,a["default"])(t,[{key:"initComponents",value:function(){var e=Array.prototype.slice.call(this.el.querySelectorAll("[".concat(this.componentAttribute,"]")));this.el.hasAttribute(this.componentAttribute)&&e.push(this.el);for(var t=0;t<e.length;t++)for(var r=e[t],n=r.getAttribute(this.componentAttribute),i=n.split(" "),a=0,s=i.length;a<s;a++){var o=i[a];""!==o&&" "!==o&&this.addComponent({el:r,componentName:o})}this.componentsInitialized=!0}},{key:"setupEvents",value:function(){this.onResizeDebounced=this.onResizeDebounced.bind(this),this.onResizeImmediate=this.onResizeImmediate.bind(this),this.onBreakpointChange=this.onBreakpointChange.bind(this),h.on(m.PageEvents.ON_RESIZE_IMMEDIATE,this.onResizeImmediate),h.on(m.PageEvents.ON_RESIZE_DEBOUNCED,this.onResizeDebounced),h.on(m.PageEvents.ON_BREAKPOINT_CHANGE,this.onBreakpointChange)}},{key:"addComponent",value:function(e){var r=e.el,n=e.componentName,i=e.data;if(!f.hasOwnProperty(n))throw"BubbleGum::addComponent could not add component to '"+r.className+"'. No component type '"+n+"' found!";var a=f[n];if(!t.componentIsSupported(a,n))return void 0===p[n]&&(console.log("BubbleGum::addComponent unsupported component '"+n+"'. Reason: '"+n+".IS_SUPPORTED' returned false"),p[n]=!0),null;var s=r.dataset.componentList||"";s.includes(n)||(r.dataset.componentList=s.split(" ").concat(n).join(" "));var o=new a({el:r,data:i,componentName:e.componentName,gum:this,pageMetrics:m.pageMetrics});return this.components.push(o),this.componentsInitialized&&o.mounted(),o}},{key:"removeComponent",value:function(e){var t=this.components.indexOf(e);t!==-1&&(this.components.splice(t,1),e.el.dataset.componentList=e.el.dataset.componentList.split(" ").filter(function(t){return t!==e.componentName}).join(" "),e.destroy())}},{key:"getComponentOfType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement,r="[".concat(this.componentAttribute,"*=").concat(e,"]"),n=t.matches(r)?t:t.querySelector(r);return n?this.components.find(function(t){return t instanceof f[e]&&t.el===n}):null}},{key:"getComponentsOfType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement,r="[".concat(this.componentAttribute,"*=").concat(e,"]"),n=t.matches(r)?[t]:Array.from(t.querySelectorAll(r));return this.components.filter(function(t){return t instanceof f[e]&&n.includes(t.el)})}},{key:"getComponentsForElement",value:function(e){return this.components.filter(function(t){return t.el===e})}},{key:"onResizeImmediate",value:function(){this.components.forEach(function(e){return e.onResizeImmediate(m.pageMetrics)})}},{key:"onResizeDebounced",value:function(){this.components.forEach(function(e){return e.onResizeDebounced(m.pageMetrics)})}},{key:"onBreakpointChange",value:function(){this.components.forEach(function(e){return e.onBreakpointChange(m.pageMetrics)})}}],[{key:"componentIsSupported",value:function(e,t){var r=e.IS_SUPPORTED;if(void 0===r)return!0;if("function"!=typeof r)return console.error('BubbleGum::addComponent error in "'+t+'".IS_SUPPORTED - it should be a function which returns true/false'),!0;var n=e.IS_SUPPORTED();return void 0===n?(console.error('BubbleGum::addComponent error in "'+t+'".IS_SUPPORTED - it should be a function which returns true/false'),!0):n}}]),t}(u);d.EVENTS={DOM_COMPONENTS_MOUNTED:"DOM_COMPONENTS_MOUNTED"},t.exports=d},{"./ComponentMap":135,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,
"@marcom/ac-event-emitter-micro":5,"@marcom/anim-system":105,"@marcom/anim-system/Model/AnimSystemModel":112,"@marcom/delayed-initializer":137}],135:[function(e,t,r){"use strict";t.exports={BaseComponent:e("./BaseComponent")}},{"./BaseComponent":133}],136:[function(e,t,r){arguments[4][132][0].apply(r,arguments)},{"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/slicedToArray":24,dup:132}],137:[function(e,t,r){"use strict";var n=!1,i=!1,a=[],s=-1;t.exports={NUMBER_OF_FRAMES_TO_WAIT:30,add:function(e){var t=this;if(i&&e(),a.push(e),!n){n=!0;var r=document.documentElement.scrollHeight,o=0,l=function u(){var e=document.documentElement.scrollHeight;if(r!==e)o=0;else if(o++,o>=t.NUMBER_OF_FRAMES_TO_WAIT)return void a.forEach(function(e){return e()});r=e,s=requestAnimationFrame(u)};s=requestAnimationFrame(l)}},reset:function(){cancelAnimationFrame(s),n=!1,i=!1,a=[]}}},{}],138:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=r.pluginCache=void 0;var i=n(e("@babel/runtime/regenerator")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),l=n(e("@babel/runtime/helpers/assertThisInitialized")),u=n(e("@babel/runtime/helpers/getPrototypeOf")),c=n(e("@babel/runtime/helpers/get")),h=n(e("@babel/runtime/helpers/inherits")),m=n(e("@marcom/ac-event-emitter-micro/EventEmitterMicro")),f=n(e("./plugins/DefaultPlugins")),p=n(e("./auto-init/auto-init")),d=n(e("./constants/MediaEvents")),b={};r.pluginCache=b;var y=[],v=1,_=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a["default"])(this,t),e=(0,o["default"])(this,(0,u["default"])(t).call(this)),e.el=r.el||document.createElement("video"),e.id=r.id||e.el.id||e.el.dataset.inlineMediaId||"inlineMedia-".concat(v++);var n=(r.plugins||[]).concat(f["default"]);return e._initPlugins(n,r),y.push((0,l["default"])(e)),e}return(0,h["default"])(t,e),(0,s["default"])(t,[{key:"load",value:function(e){var t,r,n,a,s,o;return i["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:t=!0,r=!1,n=void 0,i.prev=3,a=this.plugins[Symbol.iterator]();case 5:if(t=(s=a.next()).done){i.next=12;break}if(o=s.value,"function"!=typeof o.load){i.next=9;break}return i.abrupt("return",o.load(e));case 9:t=!0,i.next=5;break;case 12:i.next=18;break;case 14:i.prev=14,i.t0=i["catch"](3),r=!0,n=i.t0;case 18:i.prev=18,i.prev=19,t||null==a["return"]||a["return"]();case 21:if(i.prev=21,!r){i.next=24;break}throw n;case 24:return i.finish(21);case 25:return i.finish(18);case 26:case"end":return i.stop()}},null,this,[[3,14,18,26],[19,,21,25]])}},{key:"abortLoad",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=this.plugins[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value;if("function"==typeof a.abortLoad){a.abortLoad();break}}}catch(s){t=!0,r=s}finally{try{e||null==i["return"]||i["return"]()}finally{if(t)throw r}}}},{key:"play",value:function(){var e,t,r,n,a,s;return i["default"].async(function(i){for(;;)switch(i.prev=i.next){case 0:e=!0,t=!1,r=void 0,i.prev=3,n=this.plugins[Symbol.iterator]();case 5:if(e=(a=n.next()).done){i.next=12;break}if(s=a.value,"function"!=typeof s.play){i.next=9;break}return i.abrupt("return",s.play());case 9:e=!0,i.next=5;break;case 12:i.next=18;break;case 14:i.prev=14,i.t0=i["catch"](3),t=!0,r=i.t0;case 18:i.prev=18,i.prev=19,e||null==n["return"]||n["return"]();case 21:if(i.prev=21,!t){i.next=24;break}throw r;case 24:return i.finish(21);case 25:return i.finish(18);case 26:case"end":return i.stop()}},null,this,[[3,14,18,26],[19,,21,25]])}},{key:"_initPlugins",value:function(e,t){this.plugins=[],this.pluginMap=new Map;var r=!0,n=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var o=a.value;if("string"==typeof o){if(!b[o])throw new Error("Trying to use undefined Plugin named: ".concat(o," . Ensure you call Media.addPlugin() first!"));o=b[o]}if(o.isSupported!==!1){var l=new o(Object.assign({media:this},t));this.plugins.push(l),this.pluginMap.set(o,l)}}}catch(u){n=!0,i=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(n)throw i}}this.trigger(d["default"].MOUNTED)}},{key:"destroy",value:function(){if(!this._destroyed){var e=!0,r=!1,n=void 0;try{for(var i,a=this.plugins[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var s=i.value;"function"==typeof s.destroy&&s.destroy()}}catch(o){r=!0,n=o}finally{try{e||null==a["return"]||a["return"]()}finally{if(r)throw n}}(0,c["default"])((0,u["default"])(t.prototype),"destroy",this).call(this),y.splice(y.indexOf(this),1),this._destroyed=!0}}},{key:"src",get:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=this.plugins[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value;if(a.src)return a.src}}catch(s){t=!0,r=s}finally{try{e||null==i["return"]||i["return"]()}finally{if(t)throw r}}return""}},{key:"playbackState",get:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=this.plugins[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value,s=a.playbackState;if("undefined"!=typeof s)return s}}catch(o){t=!0,r=o}finally{try{e||null==i["return"]||i["return"]()}finally{if(t)throw r}}}},{key:"loadingState",get:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=this.plugins[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value,s=a.loadingState;if("undefined"!=typeof s)return s}}catch(o){t=!0,r=o}finally{try{e||null==i["return"]||i["return"]()}finally{if(t)throw r}}}}],[{key:"addPlugin",value:function(e,t){b[e]=t}},{key:"autoInitialize",value:function(){var e,t,r=arguments;return i["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:document,t=r.length>1&&void 0!==r[1]?r[1]:{},n.abrupt("return",(0,p["default"])(e,t));case 3:case"end":return n.stop()}})}},{key:"medias",get:function(){return y}}]),t}(m["default"]),g=_;r["default"]=g},{"./auto-init/auto-init":139,"./constants/MediaEvents":141,"./plugins/DefaultPlugins":149,"@babel/runtime/helpers/assertThisInitialized":9,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/get":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,"@babel/runtime/regenerator":29,"@marcom/ac-event-emitter-micro/EventEmitterMicro":6}],139:[function(e,t,r){"use strict";function n(){var e,t,r,n,i,a,c,h,m,f,p,d,b,y,v,_,g,E,C,k,w=arguments;return s["default"].async(function(A){for(;;)switch(A.prev=A.next){case 0:e=w.length>0&&void 0!==w[0]?w[0]:document,t=w.length>1&&void 0!==w[1]?w[1]:{},e||(e=document),r=e.querySelectorAll("[".concat(u,"]")),n=[],i=!0,a=!1,c=void 0,A.prev=8,h=r[Symbol.iterator]();case 10:if(i=(m=h.next()).done){A.next=48;break}f=m.value,p=f.dataset,d=p.inlineMediaPlugins?p.inlineMediaPlugins.split(",").map(function(e){return e.trim()}):[],b=[],y=!0,v=!1,_=void 0,A.prev=18,g=function(){var e=C.value;if(o.pluginCache[e])return"continue";if(!l["default"][e])throw new Error("Error Trying to use undefined Plugin named: ".concat(e," . Ensure you call Media.addPlugin() first to register this custom plugin!"));b.push(function(){var t,r;return s["default"].async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s["default"].awrap(l["default"][e]());case 2:t=n.sent,r=t["default"],o["default"].addPlugin(e,r);case 5:case"end":return n.stop()}})})},E=d[Symbol.iterator]();case 21:if(y=(C=E.next()).done){A.next=28;break}if(k=g(),"continue"!==k){A.next=25;break}return A.abrupt("continue",25);case 25:y=!0,A.next=21;break;case 28:A.next=34;break;case 30:A.prev=30,A.t0=A["catch"](18),v=!0,_=A.t0;case 34:A.prev=34,A.prev=35,y||null==E["return"]||E["return"]();case 37:if(A.prev=37,!v){A.next=40;break}throw _;case 40:return A.finish(37);case 41:return A.finish(34);case 42:return A.next=44,s["default"].awrap(Promise.all(b.map(function(e){return s["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}})})));case 44:n.push(new o["default"](Object.assign({el:f,plugins:d.map(function(e){return o.pluginCache[e]})},t)));case 45:i=!0,A.next=10;break;case 48:A.next=54;break;case 50:A.prev=50,A.t1=A["catch"](8),a=!0,c=A.t1;case 54:A.prev=54,A.prev=55,i||null==h["return"]||h["return"]();case 57:if(A.prev=57,!a){A.next=60;break}throw c;case 60:return A.finish(57);case 61:return A.finish(54);case 62:return A.abrupt("return",n);case 63:case"end":return A.stop()}},null,null,[[8,50,54,62],[18,30,34,42],[35,,37,41],[55,,57,61]])}var i=e("@babel/runtime/helpers/interopRequireWildcard"),a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n;var s=a(e("@babel/runtime/regenerator")),o=i(e("../Media")),l=a(e("../plugins/CommonPlugins.js")),u="data-inline-media"},{"../Media":138,"../plugins/CommonPlugins.js":145,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/interopRequireWildcard":17,"@babel/runtime/regenerator":29}],140:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var n={EMPTY:"loading-empty",LOADING:"loading",LOADED:"loaded",ERROR:"loading-error",DISABLED:"loading-disabled"};r["default"]=n},{}],141:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var n={MOUNTED:"MOUNTED",MEDIA_LOAD_START:"MEDIA_LOAD_START",MEDIA_LOAD_COMPLETE:"MEDIA_LOAD_COMPLETE",MEDIA_LOAD_ERROR:"MEDIA_LOAD_ERROR",PLAYBACK_STATE_CHANGE:"PLAYBACK_STATE_CHANGE",LOADING_STATE_CHANGE:"LOADING_STATE_CHANGE"};r["default"]=n},{}],142:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var n={LOAD_START:"loadstart",LOADED_DATA:"loadeddata",LOADED_METADATA:"loadedmetadata",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",PLAY:"play",PLAYING:"playing",PAUSE:"pause",WAITING:"waiting",SEEKING:"seeking",SEEKED:"seeked",ERROR:"error",ENDED:"ended",ABORT:"abort"};r["default"]=n},{}],143:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var n={IDLE:"idle",PLAYING:"playing",PAUSED:"paused",ENDED:"ended"};r["default"]=n},{}],144:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Media",{enumerable:!0,get:function(){return i["default"]}}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return i["default"]}}),Object.defineProperty(r,"Plugin",{enumerable:!0,get:function(){return a["default"]}}),r.autoInit=void 0;var i=n(e("./Media")),a=n(e("./plugins/Plugin")),s=i["default"].autoInitialize;r.autoInit=s},{"./Media":138,"./plugins/Plugin":151,"@babel/runtime/helpers/interopRequireDefault":16}],145:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var i=n(e("@babel/runtime/regenerator")),a=n(e("@babel/runtime/helpers/interopRequireWildcard")),s={AnimLoad:function(){return i["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve().then(function(){return(0,a["default"])(e("./anim/AnimLoad"))}));case 1:case"end":return t.stop()}})},AnimPlay:function(){return i["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve().then(function(){return(0,a["default"])(e("./anim/AnimPlay"))}));case 1:case"end":return t.stop()}})},FeatureObserver:function(){return i["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve().then(function(){return(0,a["default"])(e("./feature-observer/FeatureObserver"))}));case 1:case"end":return t.stop()}})},LoadTimeout:function(){return i["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve().then(function(){return(0,a["default"])(e("./load-timeout/LoadTimeout"))}));case 1:case"end":return t.stop()}})},PlayPauseButton:function(){return i["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve().then(function(){return(0,a["default"])(e("./ui/PlayPauseButton"))}));case 1:case"end":return t.stop()}})},ViewportSource:function(){return i["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve().then(function(){return(0,a["default"])(e("./viewport-source/ViewportSource"))}));case 1:case"end":return t.stop()}})}},o=s;r["default"]=o},{"./anim/AnimLoad":152,"./anim/AnimPlay":153,"./feature-observer/FeatureObserver":155,"./load-timeout/LoadTimeout":157,"./ui/PlayPauseButton":158,"./viewport-source/ViewportSource":161,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/interopRequireWildcard":17,"@babel/runtime/regenerator":29}],146:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var i=n(e("@babel/runtime/helpers/toConsumableArray")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),l=n(e("@babel/runtime/helpers/assertThisInitialized")),u=n(e("@babel/runtime/helpers/getPrototypeOf")),c=n(e("@babel/runtime/helpers/get")),h=n(e("@babel/runtime/helpers/inherits")),m=n(e("./Plugin")),f=n(e("../constants/PlaybackStates")),p=n(e("../constants/LoadingStates")),d=n(e("../constants/NativeMediaEvents")),b=n(e("../constants/MediaEvents")),y=[d["default"].LOADED_DATA,d["default"].LOAD_START,d["default"].CAN_PLAY,d["default"].CAN_PLAY_THROUGH,d["default"].PLAY,d["default"].PLAYING,d["default"].PAUSE,d["default"].WAITING,d["default"].SEEKING,d["default"].SEEKED,d["default"].ERROR,d["default"].ENDED],v="[data-inline-media-controller={id}]",_=function(e){function t(e){var r;if((0,a["default"])(this,t),r=(0,o["default"])(this,(0,u["default"])(t).call(this,e)),r._container=e.container||r.media.el.parentElement,r._playbackState=f["default"].IDLE,r._loadingState=p["default"].EMPTY,r._elementsToDecorate=[],r._container&&r._elementsToDecorate.push(r._container),r.media.id){var n;(n=r._elementsToDecorate).push.apply(n,(0,i["default"])(Array.from(document.querySelectorAll(v.replace("{id}",r.media.id)))))}var s=!0,c=!1,h=void 0;try{for(var m,d=r._elementsToDecorate[Symbol.iterator]();!(s=(m=d.next()).done);s=!0){var b=m.value;b.classList.add(r._playbackState),b.classList.add(r._loadingState)}}catch(y){c=!0,h=y}finally{try{s||null==d["return"]||d["return"]()}finally{if(c)throw h}}return r.updateState=r.updateState.bind((0,l["default"])(r)),r._addEventListeners(),r}return(0,h["default"])(t,e),(0,s["default"])(t,[{key:"_addEventListeners",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=y[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value;this.media.el.addEventListener(a,this.updateState)}}catch(s){t=!0,r=s}finally{try{e||null==i["return"]||i["return"]()}finally{if(t)throw r}}this.media.on(b["default"].LOADING_STATE_CHANGE,this.updateState),this.media.on(b["default"].PLAYBACK_STATE_CHANGE,this.updateState)}},{key:"_removeEventListeners",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=y[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value;this.media.el.removeEventListener(a,this.updateState)}}catch(s){t=!0,r=s}finally{try{e||null==i["return"]||i["return"]()}finally{if(t)throw r}}this.media.off(b["default"].LOADING_STATE_CHANGE,this.updateState),this.media.off(b["default"].PLAYBACK_STATE_CHANGE,this.updateState)}},{key:"updateState",value:function(e){var t=this.media.playbackState,r=this._playbackState,n=this.media.loadingState,i=this._loadingState;if(this._playbackState=t,this._loadingState=n,t!==r){var a=!0,s=!1,o=void 0;try{for(var l,u=this._elementsToDecorate[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;c.classList.add(t),c.classList.remove(r)}}catch(h){s=!0,o=h}finally{try{a||null==u["return"]||u["return"]()}finally{if(s)throw o}}this.media.trigger(b["default"].PLAYBACK_STATE_CHANGE)}if(n!==i){var m=!0,f=!1,p=void 0;try{for(var d,y=this._elementsToDecorate[Symbol.iterator]();!(m=(d=y.next()).done);m=!0){var v=d.value;v.classList.add(n),v.classList.remove(i)}}catch(h){f=!0,p=h}finally{try{m||null==y["return"]||y["return"]()}finally{if(f)throw p}}this.media.trigger(b["default"].LOADING_STATE_CHANGE)}}},{key:"destroy",value:function(){var e=!0,r=!1,n=void 0;try{for(var i,a=this._elementsToDecorate[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var s=i.value;s.classList.remove(this._playbackState),s.classList.remove(this._loadingState)}}catch(o){r=!0,n=o}finally{try{e||null==a["return"]||a["return"]()}finally{if(r)throw n}}this._removeEventListeners(),(0,c["default"])((0,u["default"])(t.prototype),"destroy",this).call(this)}}]),t}(m["default"]),g=_;r["default"]=g},{"../constants/LoadingStates":140,"../constants/MediaEvents":141,"../constants/NativeMediaEvents":142,"../constants/PlaybackStates":143,"./Plugin":151,"@babel/runtime/helpers/assertThisInitialized":9,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/get":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,"@babel/runtime/helpers/toConsumableArray":26}],147:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var i=n(e("@babel/runtime/regenerator")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),l=n(e("@babel/runtime/helpers/assertThisInitialized")),u=n(e("@babel/runtime/helpers/getPrototypeOf")),c=n(e("@babel/runtime/helpers/get")),h=n(e("@babel/runtime/helpers/inherits")),m=n(e("./Plugin")),f=n(e("../constants/NativeMediaEvents")),p=n(e("../constants/MediaEvents")),d=n(e("../constants/LoadingStates")),b=n(e("@marcom/ac-console/warn")),y=n(e("@marcom/useragent-detect")),v=f["default"].CAN_PLAY_THROUGH,_=HTMLMediaElement,g=_.HAVE_NOTHING,E=_.HAVE_CURRENT_DATA,C=_.NETWORK_EMPTY,k=function(e){function t(e){var r;return(0,a["default"])(this,t),r=(0,o["default"])(this,(0,u["default"])(t).call(this,e)),r._loadCompleteEvent=e.loadCompleteEvent||v,r._onLoaded=r._onLoaded.bind((0,l["default"])(r)),r._onError=r._onError.bind((0,l["default"])(r)),r}return(0,h["default"])(t,e),(0,s["default"])(t,[{key:"mounted",value:function(){var e=this;"none"!==this.media.el.preload&&this.media.src&&!function(){return i["default"].async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i["default"].awrap(e.media.load(e.media.src));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),(0,b["default"])("auto load of ".concat(e.media.src," failed or was aborted with err:").concat(t.t0));case 8:case"end":return t.stop()}},null,null,[[0,5]])}()}},{key:"load",value:function(e){var t=this;return i["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e&&this.media.src&&(e=this.media.src),e){r.next=3;break}throw new Error("No Media src was specified, can not fullfill load() request");case 3:return e!==this._currentLoadUrl&&(this.media.trigger(p["default"].MEDIA_LOAD_START),this._currentLoadUrl=e,this._pendingPromise=new Promise(function(r,n){t._resolvePendingPromise=function(){t._resolvePendingPromise=null,t._rejectPendingPromise=null,r()},t._rejectPendingPromise=function(){t._resolvePendingPromise=null,t._rejectPendingPromise=null,n()},t.media.el.addEventListener(t._loadCompleteEvent,t._onLoaded),y["default"].browser.firefox&&"canplaythrough"===t._loadCompleteEvent&&t.media.el.addEventListener("canplay",t._onLoaded),t.media.el.addEventListener(f["default"].ERROR,t._onError),t.media.el.addEventListener(f["default"].ABORT,t._onError),t.media.el.src=e,t.media.el.load()})),r.abrupt("return",this._pendingPromise);case 5:case"end":return r.stop()}},null,this)}},{key:"_clearLoadListeners",value:function(){this.media.el.removeEventListener(this._loadCompleteEvent,this._onLoaded),this.media.el.removeEventListener("canplay",this._onLoaded),this.media.el.removeEventListener(f["default"].ERROR,this._onError),this.media.el.removeEventListener(f["default"].ABORT,this._onError)}},{key:"_onLoaded",value:function(){this._clearLoadListeners(),this.media.trigger(p["default"].LOADING_STATE_CHANGE),this.media.trigger(p["default"].MEDIA_LOAD_COMPLETE),this._resolvePendingPromise()}},{key:"_onError",value:function(){this._clearLoadListeners(),this.media.trigger(p["default"].MEDIA_LOAD_ERROR),this.media.trigger(p["default"].LOADING_STATE_CHANGE),this._rejectPendingPromise()}},{key:"abortLoad",value:function(){this._rejectPendingPromise&&this._rejectPendingPromise()}},{key:"destroy",value:function(){this._clearLoadListeners(),(0,c["default"])((0,u["default"])(t.prototype),"destroy",this).call(this)}},{key:"loadingState",get:function(){return this.media.el.error?d["default"].ERROR:this.media.el.networkState===C&&this.media.el.readyState===g?d["default"].EMPTY:this.media.el.readyState<E?d["default"].LOADING:d["default"].LOADED}}]),t}(m["default"]),w=k;r["default"]=w},{"../constants/LoadingStates":140,"../constants/MediaEvents":141,"../constants/NativeMediaEvents":142,"./Plugin":151,"@babel/runtime/helpers/assertThisInitialized":9,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/get":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,"@babel/runtime/regenerator":29,"@marcom/ac-console/warn":4,"@marcom/useragent-detect":169}],148:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var i=n(e("@babel/runtime/regenerator")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),l=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/get")),c=n(e("@babel/runtime/helpers/inherits")),h=n(e("./Plugin")),m=n(e("../constants/PlaybackStates")),f=HTMLVideoElement,p=f.HAVE_METADATA,d=(f.HAVE_CURRENT_DATA,function(e){function t(e){var r;return(0,a["default"])(this,t),r=(0,o["default"])(this,(0,l["default"])(t).call(this,e)),r._initialize(),r}return(0,c["default"])(t,e),(0,s["default"])(t,[{key:"_initialize",value:function(){var e=this;this.media.el.playsInline=!0,this.media.el.autoplay&&(this._autoPlayTimer=setTimeout(function(){return e.media.play()}))}},{key:"play",value:function(){return i["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.media.el.readyState<p)){e.next=3;break}return e.next=3,i["default"].awrap(this.media.load());case 3:return e.next=5,i["default"].awrap(this.media.el.play());case 5:case"end":return e.stop()}},null,this)}},{key:"destroy",value:function(){clearTimeout(this._autoPlayTimer),(0,u["default"])((0,l["default"])(t.prototype),"destroy",this).call(this)}},{key:"playbackState",get:function(){return this.media.el.ended?m["default"].ENDED:this.media.el.paused&&!this.media.el.ended?m["default"].PAUSED:m["default"].PLAYING}}]),t}(h["default"])),b=d;r["default"]=b},{"../constants/PlaybackStates":143,"./Plugin":151,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/get":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,"@babel/runtime/regenerator":29}],149:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var i=n(e("./DefaultSource")),a=n(e("./DefaultLoad")),s=n(e("./DefaultPlay")),o=n(e("./DefaultCssState")),l=[i["default"],a["default"],s["default"],o["default"]];r["default"]=l},{"./DefaultCssState":146,"./DefaultLoad":147,"./DefaultPlay":148,"./DefaultSource":150,"@babel/runtime/helpers/interopRequireDefault":16}],150:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/inherits")),u=n(e("./Plugin")),c=function(e){function t(){return(0,i["default"])(this,t),(0,s["default"])(this,(0,o["default"])(t).apply(this,arguments))}return(0,l["default"])(t,e),(0,a["default"])(t,[{key:"src",get:function(){return this.media.el.currentSrc}}]),t}(u["default"]),h=c;r["default"]=h},{"./Plugin":151,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22}],151:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("../constants/MediaEvents")),o=function(){function e(t){(0,i["default"])(this,e),this.options=t,this.media=t.media,this.mounted=this.mounted.bind(this),this.media.on(s["default"].MOUNTED,this.mounted)}return(0,a["default"])(e,[{key:"mounted",value:function(){}},{key:"destroy",value:function(){}}],[{key:"isSupported",get:function(){return!0}}]),e}(),l=o;r["default"]=l},{"../constants/MediaEvents":141,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/interopRequireDefault":16}],152:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var i=n(e("@babel/runtime/regenerator")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),l=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/get")),c=n(e("@babel/runtime/helpers/inherits")),h=n(e("../../util/getOption")),m=n(e("../Plugin")),f=n(e("@marcom/ac-console/warn")),p="inline-media-load-kf",d={start:"t - 200vh",end:"b + 100vh"},b="loadKeyframe",y=function(e){function t(e){var r;return(0,a["default"])(this,t),r=(0,o["default"])(this,(0,l["default"])(t).call(this,e)),r._anim=e.anim,r._container=e.container||r.media.el.parentElement,r._scrollGroup=r.options.scrollGroup||r._anim.getGroupForTarget(r._container||r.media.el),r._initialize(),r}return(0,c["default"])(t,e),(0,s["default"])(t,[{key:"_initialize",value:function(){this._onLoadKeyframeEnter=this._onLoadKeyframeEnter.bind(this),this._onLoadKeyframeExit=this._onLoadKeyframeExit.bind(this);var e=(0,h["default"])(this.media.el.dataset,this.options,b,d);e.event||(e.event=p),this._loadKeyframe=this._scrollGroup.addKeyframe(this.media.el,e),this._loadKeyframe.controller.on("".concat(this._loadKeyframe.event,":enter"),this._onLoadKeyframeEnter),this._loadKeyframe.controller.on("".concat(this._loadKeyframe.event,":exit"),this._onLoadKeyframeExit)}},{key:"_onLoadKeyframeEnter",value:function(e){return i["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i["default"].awrap(this.media.load());case 3:this._loaded=!0,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),(0,f["default"])("AnimLoad: Load error occured");case 9:case"end":return e.stop()}},null,this,[[0,6]])}},{key:"_onLoadKeyframeExit",value:function(e){}},{key:"destroy",value:function(){this._loadKeyframe.controller.off("".concat(this._loadKeyframe.event,":enter"),this._onLoadKeyframeEnter),this._loadKeyframe.controller.off("".concat(this._loadKeyframe.event,":exit"),this._onLoadKeyframeExit),(0,u["default"])((0,l["default"])(t.prototype),"destroy",this).call(this)}},{key:"loadKeyframe",get:function(){return this._loadKeyframe}}]),t}(m["default"]);r["default"]=y},{"../../util/getOption":164,"../Plugin":151,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/get":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,"@babel/runtime/regenerator":29,"@marcom/ac-console/warn":4}],153:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var i=n(e("@babel/runtime/regenerator")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),l=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/get")),c=n(e("@babel/runtime/helpers/inherits")),h=n(e("../../constants/MediaEvents")),m=n(e("../../util/getOption")),f=n(e("../Plugin")),p="inline-media-play-kf",d={start:"t - 100vh",end:"b"},b="playKeyframe",y=function(e){function t(e){var r;return(0,a["default"])(this,t),r=(0,o["default"])(this,(0,l["default"])(t).call(this,e)),r._anim=e.anim,r._container=e.container||r.media.el.parentElement,r._scrollGroup=r.options.scrollGroup||r._anim.getGroupForTarget(r._container||r.media.el),r._initialize(),r}return(0,c["default"])(t,e),(0,s["default"])(t,[{key:"_initialize",value:function(){this._onPlayKeyframeEnter=this._onPlayKeyframeEnter.bind(this),this._onPlayKeyframeExit=this._onPlayKeyframeExit.bind(this);var e=this.media.el.dataset;if(this._autoPlayWithReducedMotion=(0,m["default"])(e,this.options,"autoPlayWithReducedMotion",!1),this._autoPlayWithReducedMotion||!t.prefersReducedMotion){this._pauseOnExit=(0,m["default"])(e,this.options,"pauseOnExit",!1),this._resetOnExit=(0,m["default"])(e,this.options,"resetOnExit",!1);var r=(0,m["default"])(e,this.options,b,d);r.event||(r.event=p),this._playKeyframe=this._scrollGroup.addKeyframe(this.media.el,r),this._playKeyframe.controller.on("".concat(this._playKeyframe.event,":enter"),this._onPlayKeyframeEnter),this._playKeyframe.controller.on("".concat(this._playKeyframe.event,":exit"),this._onPlayKeyframeExit),this._onLoadStart=this._onLoadStart.bind(this),this.media.on(h["default"].MEDIA_LOAD_START,this._onLoadStart)}}},{key:"_onLoadStart",value:function(){this._loaded=!1}},{key:"_onPlayKeyframeEnter",value:function(e){return i["default"].async(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._inFrame=!0,this._paused){e.next=14;break}if(this._loaded){e.next=6;break}return e.next=5,i["default"].awrap(this.media.load());case 5:this._loaded=!0;case 6:if(!this._inFrame){e.next=14;break}return e.prev=7,e.next=10,i["default"].awrap(this.media.play());case 10:e.next=14;break;case 12:e.prev=12,e.t0=e["catch"](7);case 14:case"end":return e.stop()}},null,this,[[7,12]])}},{key:"_onPlayKeyframeExit",value:function(e){this._inFrame=!1,this._loaded&&this.media.el.paused&&!this.media.el.ended?this._paused=!0:this._pauseOnExit&&(this._paused=!1,this.media.el.pause()),this._loaded&&this._resetOnExit&&(this.media.el.currentTime=0)}},{key:"destroy",value:function(){this._playKeyframe.controller.off("".concat(this._playKeyframe.event,":enter"),this._onPlayKeyframeEnter),this._playKeyframe.controller.off("".concat(this._playKeyframe.event,":exit"),this._onPlayKeyframeExit),
this.media.off(h["default"].MEDIA_LOAD_START,this._onLoadStart),(0,u["default"])((0,l["default"])(t.prototype),"destroy",this).call(this)}},{key:"playKeyframe",get:function(){return this._playKeyframe}}],[{key:"prefersReducedMotion",get:function(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}}]),t}(f["default"]);r["default"]=y},{"../../constants/MediaEvents":141,"../../util/getOption":164,"../Plugin":151,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/get":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,"@babel/runtime/regenerator":29}],154:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=function(){function e(t){(0,i["default"])(this,e),this.featureClass=t.featureClass,this._callback=t.callback,this._isPresent=!1,this._wasPresent=!1}return(0,a["default"])(e,[{key:"updatePresence",value:function(e){this._wasPresent=this._isPresent,this._isPresent=e.contains(this.featureClass)}},{key:"triggerCallback",value:function(e){return this._callback(e)}},{key:"presenceChanged",get:function(){return this._isPresent!==this._wasPresent}},{key:"isPresent",get:function(){return this._isPresent}}]),e}(),o=s;r["default"]=o},{"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/interopRequireDefault":16}],155:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var i=n(e("@babel/runtime/helpers/slicedToArray")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),l=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/assertThisInitialized")),c=n(e("@babel/runtime/helpers/inherits")),h=n(e("../Plugin")),m=n(e("../../constants/PlaybackStates")),f=n(e("../../constants/LoadingStates")),p=n(e("../../constants/MediaEvents")),d=n(e("./FeatureSet")),b=n(e("./FeatureCallback")),y=function(e){return e},v=function(e){return e?e.split(",").map(function(e){return e.trim()}):null},_=function(e){return e instanceof HTMLElement?e:document.querySelector(e)},g=function(e){function t(e){var r;(0,a["default"])(this,t),r=(0,o["default"])(this,(0,l["default"])(t).call(this,e));var n=function(t,n,i){var a="inlineMedia"+t[0].toUpperCase()+t.slice(1);return n(r.media.el.dataset[a])||e[t]||i};r._disabledStates=new d["default"]({features:n("disabledWhen",v,[]),onActivate:r.disable.bind((0,u["default"])(r)),onDeactivate:r.enable.bind((0,u["default"])(r))}),r._destroyStates=new d["default"]({features:n("destroyWhen",v,[]),onActivate:r.destroyMedia.bind((0,u["default"])(r))}),r._pausedStates=new d["default"]({features:n("pausedWhen",v,[]),onActivate:r.pauseMedia.bind((0,u["default"])(r))}),r._autoplayStates=new d["default"]({features:n("autoplayWhen",v,[]),onActivate:r.autoplayMedia.bind((0,u["default"])(r)),onDeactivate:r.disableAutoplay.bind((0,u["default"])(r))});var s=e.featureDetect||{};return r.featureCallbacks=Object.entries(s).map(function(e){var t=(0,i["default"])(e,2),r=t[0],n=t[1];return new b["default"]({featureClass:r,callback:n})}),r._featureElement=_(n("featureElement",y,document.documentElement)),r.featureSets=[r._autoplayStates,r._pausedStates,r._disabledStates,r._destroyStates],r._featuresUpdated=r._featuresUpdated.bind((0,u["default"])(r)),r.play=!1,r._observer=new MutationObserver(r._featuresUpdated),r._observer.observe(r._featureElement,{attributes:!0,attributeFilter:["class"]}),r._featuresUpdated(),r}return(0,c["default"])(t,e),(0,s["default"])(t,[{key:"_featuresUpdated",value:function(){var e=this,t=this._featureElement.classList;this.featureSets.filter(function(e){return e.updateFeatureState(t),e.detectionChanged}).forEach(function(e){return e.applyEffect()}),this.featureCallbacks.forEach(function(r){r.updatePresence(t),r.isPresent&&r.presenceChanged&&r.triggerCallback(e.media)})}},{key:"autoplayMedia",value:function(){this.media.el.setAttribute("autoplay",!0),this.media.play()}},{key:"disableAutoplay",value:function(){this.media.el.setAttribute("autoplay",!1)}},{key:"pauseMedia",value:function(){this.media.el.pause()}},{key:"destroyMedia",value:function(){this.media.destroy()}},{key:"destroy",value:function(){this._observer.disconnect()}},{key:"disable",value:function(){this.media.abortLoad(),this.media.el.pause(),this.play=y,this.media.trigger(p["default"].LOADING_STATE_CHANGE),this.media.trigger(p["default"].PLAYBACK_STATE_CHANGE)}},{key:"enable",value:function(){this.play=!1,this.media.trigger(p["default"].LOADING_STATE_CHANGE),this.media.trigger(p["default"].PLAYBACK_STATE_CHANGE)}},{key:"loadingState",get:function(){return this._disabledStates.isDetected?f["default"].DISABLED:void 0}},{key:"playbackState",get:function(){return this._disabledStates.isDetected?m["default"].PAUSED:void 0}}]),t}(h["default"]),E=g;r["default"]=E},{"../../constants/LoadingStates":140,"../../constants/MediaEvents":141,"../../constants/PlaybackStates":143,"../Plugin":151,"./FeatureCallback":154,"./FeatureSet":156,"@babel/runtime/helpers/assertThisInitialized":9,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,"@babel/runtime/helpers/slicedToArray":24}],156:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=function(e){return Array.isArray(e)?e:e?[e]:[]},o=function(){},l=function(){function e(t){(0,i["default"])(this,e),this._features=new Set(s(t.features)),this._isDetected=!1,this._wasDetected=!1,this._onActivate=t.onActivate||o,this._onDeactivate=t.onDeactivate||o}return(0,a["default"])(e,[{key:"updateFeatureState",value:function(e){this._wasDetected=this._isDetected;var t=!0,r=!1,n=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;if(this._features.has(s))return void(this._isDetected=!0)}}catch(o){r=!0,n=o}finally{try{t||null==a["return"]||a["return"]()}finally{if(r)throw n}}this._isDetected=!1}},{key:"applyEffect",value:function(){this._isDetected?this._onActivate():this._onDeactivate()}},{key:"detectionChanged",get:function(){return this._isDetected!==this._wasDetected}},{key:"isDetected",get:function(){return this._isDetected}}]),e}(),u=l;r["default"]=u},{"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/interopRequireDefault":16}],157:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),o=n(e("@babel/runtime/helpers/assertThisInitialized")),l=n(e("@babel/runtime/helpers/createClass")),u=n(e("@babel/runtime/helpers/inherits")),c=n(e("../Plugin")),h=n(e("../../constants/MediaEvents")),m=3e4,f="inline-media-timeout",p=function(e){function t(e){var r;(0,i["default"])(this,t),r=(0,a["default"])(this,(0,s["default"])(t).call(this,e));var n=r.media.el.dataset;return r._timeoutDelay=n.loadTimeout||e.loadTimeout||m,r._onLoadStart=r._onLoadStart.bind((0,o["default"])(r)),r._onLoadComplete=r._onLoadComplete.bind((0,o["default"])(r)),r._onTimerComplete=r._onTimerComplete.bind((0,o["default"])(r)),r.media.on(h["default"].MEDIA_LOAD_START,r._onLoadStart),r.media.on(h["default"].MEDIA_LOAD_COMPLETE,r._onLoadComplete),r}return(0,u["default"])(t,e),(0,l["default"])(t,null,[{key:"LOAD_TIMEOUT_EVENT",get:function(){return f}}]),(0,l["default"])(t,[{key:"_onLoadStart",value:function(){clearTimeout(this._timer),this._timer=setTimeout(this._onTimerComplete,this._timeoutDelay)}},{key:"_onLoadComplete",value:function(){clearTimeout(this._timer)}},{key:"_onTimerComplete",value:function(){this.media.trigger(f),this.media.destroy(),this.media.el.parentElement&&this.media.el.parentElement.removeChild(this.media.el)}},{key:"destroy",value:function(){clearTimeout(this._timer),this.media.off(h["default"].MEDIA_LOAD_START,this._onLoadStart)}}]),t}(c["default"]);r["default"]=p},{"../../constants/MediaEvents":141,"../Plugin":151,"@babel/runtime/helpers/assertThisInitialized":9,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22}],158:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/assertThisInitialized")),u=n(e("@babel/runtime/helpers/inherits")),c=n(e("../Plugin")),h=n(e("../../constants/MediaEvents")),m=n(e("../../constants/PlaybackStates")),f='[data-inline-media-control="PlayPause"]',p="[data-inline-media-controller='{id}']",d={playing:"Pause",paused:"Play"},b={CLICK:"data-analytics-click",TITLE:"data-analytics-title"},y=function(e){function t(e){var r;(0,i["default"])(this,t),r=(0,s["default"])(this,(0,o["default"])(t).call(this,e)),r._container=e.container||r.media.el.parentElement,r._button=r._findButton(),r._onClick=r._onClick.bind((0,l["default"])(r)),r._onPlaybackStateChange=r._onPlaybackStateChange.bind((0,l["default"])(r));var n=r._button.dataset;return r._ariaLabels={playing:n.ariaPlaying||e.ariaPlaying||d.playing,paused:n.ariaPaused||e.ariaPaused||d.paused},r._button.addEventListener("click",r._onClick),r.media.on(h["default"].PLAYBACK_STATE_CHANGE,r._onPlaybackStateChange),r._activeAnalytics=Object.values(b).filter(function(e){return r._button.hasAttribute(e+"-play")&&r._button.hasAttribute(e+"-pause")}),r}return(0,u["default"])(t,e),(0,a["default"])(t,[{key:"_findButton",value:function(){if(this.options.playPauseButton)return this.options.playPauseButton;var e=this._container.querySelector("".concat(f));if(!e){var t=document.querySelectorAll(p.replace("{id}",this.media.id)),r=!0,n=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var o=a.value;e="PlayPause"===o.getAttribute("data-inline-media-control")?o:o.querySelector("".concat(f))}}catch(l){n=!0,i=l}finally{try{r||null==s["return"]||s["return"]()}finally{if(n)throw i}}}return e}},{key:"_onPlaybackStateChange",value:function(){var e=this.media.playbackState===m["default"].PLAYING;e?this._button.setAttribute("aria-label",this._ariaLabels.playing):this._button.setAttribute("aria-label",this._ariaLabels.paused),this._setAnalyticsState(e)}},{key:"_setAnalyticsState",value:function(e){var t=this,r=e?"pause":"play";this._activeAnalytics.forEach(function(e){return t._button.setAttribute(e,t._button.getAttribute(e+"-".concat(r)))})}},{key:"_onClick",value:function(e){this.media.el.paused?this.media.play():this.media.el.pause()}},{key:"destroy",value:function(){this._button.removeEventListener("click",this._onClick),this.media.off(h["default"].PLAYBACK_STATE_CHANGE,this._onPlaybackStateChange)}}]),t}(c["default"]);r["default"]=y},{"../../constants/MediaEvents":141,"../../constants/PlaybackStates":143,"../Plugin":151,"@babel/runtime/helpers/assertThisInitialized":9,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22}],159:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("./constants/DefaultBreakpoints")),o=function(){function e(t){(0,i["default"])(this,e),this._breakpoints=t.breakpoints||s["default"],this.options=t,this._initialize()}return(0,a["default"])(e,[{key:"_initialize",value:function(){var e=this;this._updateBreakpoint=this._updateBreakpoint.bind(this),this._callback=this.options.callback,this._mediaQueries=Object.keys(this._breakpoints).map(function(t){return window.matchMedia("(min-width: ".concat(e._breakpoints[t],"px)"))}),this._addEventListeners(),this._updateBreakpoint()}},{key:"_addEventListeners",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=this._mediaQueries[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value;a.addListener(this._updateBreakpoint)}}catch(s){t=!0,r=s}finally{try{e||null==i["return"]||i["return"]()}finally{if(t)throw r}}}},{key:"_removeEventListeners",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=this._mediaQueries[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value;a.removeListener(this._updateBreakpoint)}}catch(s){t=!0,r=s}finally{try{e||null==i["return"]||i["return"]()}finally{if(t)throw r}}}},{key:"_updateBreakpoint",value:function(){for(var e=Object.keys(this._breakpoints),t=e[0],r=1;r<e.length-1;r++){var n=this._mediaQueries[r].matches;if(!n)break;t=e[r]}var i=!1;this._currentBreakpoint&&this._currentBreakpoint!==t&&(i=!0),this._currentBreakpoint=t,i&&this._callback()}},{key:"destroy",value:function(){this._removeEventListeners()}},{key:"breakpoint",get:function(){return this._currentBreakpoint}}]),e}();r["default"]=o},{"./constants/DefaultBreakpoints":163,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/interopRequireDefault":16}],160:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/get")),u=n(e("@babel/runtime/helpers/inherits")),c=n(e("./BreakpointDetect")),h=n(e("./constants/AnimBreakpointMap")),m=function(e){function t(e){return(0,i["default"])(this,t),(0,s["default"])(this,(0,o["default"])(t).call(this,e))}return(0,u["default"])(t,e),(0,a["default"])(t,[{key:"_initialize",value:function(){this._anim=this.options.anim,this._bpMap=this.options.animBreakpointMap||h["default"],this._updateBreakpoint=this._updateBreakpoint.bind(this),this._callback=this.options.callback,this._addEventListeners(),this._updateBreakpoint()}},{key:"_addEventListeners",value:function(){this._anim.on("ON_BREAKPOINT_CHANGE",this._updateBreakpoint)}},{key:"_removeEventListeners",value:function(){this._anim.off("ON_BREAKPOINT_CHANGE",this._updateBreakpoint)}},{key:"_updateBreakpoint",value:function(){var e=this._bpMap[this._anim.model.pageMetrics.breakpoint],t=!1;this._currentBreakpoint&&this._currentBreakpoint!==e&&(t=!0),this._currentBreakpoint=e,t&&this._callback()}},{key:"destroy",value:function(){(0,l["default"])((0,o["default"])(t.prototype),"destroy",this).call(this)}}]),t}(c["default"]);r["default"]=m},{"./BreakpointDetect":159,"./constants/AnimBreakpointMap":162,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/get":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22}],161:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var i=n(e("@babel/runtime/regenerator")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),l=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/get")),c=n(e("@babel/runtime/helpers/inherits")),h=n(e("../../plugins/Plugin")),m=n(e("./BreakpointDetect")),f=n(e("./BreakpointDetectAnim")),p=(n(e("@marcom/ac-console/warn")),n(e("@marcom/ac-console/log")),n(e("../../constants/LoadingStates"))),d="mp4",b=function(){return window.devicePixelRatio>1},y=function(e){function t(e){var r;return(0,a["default"])(this,t),r=(0,o["default"])(this,(0,l["default"])(t).call(this,e)),r._cachedPlaying=null,r._initialize(),r}return(0,c["default"])(t,e),(0,s["default"])(t,[{key:"_initialize",value:function(){this._onBreakpointChange=this._onBreakpointChange.bind(this);var e=Object.assign({callback:this._onBreakpointChange},this.options);this._breakpointDetect=e.anim?new f["default"](e):new m["default"](e),this._currentTime=0;var t=this.media.el.dataset;this._basePath=this.options.basePath||t.inlineMediaBasepath||"./",this._onBreakpointChange()}},{key:"_onBreakpointChange",value:function(){this._currentBreakpoint=this._breakpointDetect.breakpoint;var e=b()?"".concat(this._currentBreakpoint,"_2x"):this._currentBreakpoint,t="".concat(this._basePath).concat(e,".").concat(d);this._swapSrc(t)}},{key:"_swapSrc",value:function(e){var t;return i["default"].async(function(r){for(;;)switch(r.prev=r.next){case 0:if(this._src=e,this.media.loadingState!==p["default"].EMPTY){r.next=3;break}return r.abrupt("return");case 3:return t=null!==this._cachedPlaying?this._cachedPlaying:!this.media.el.paused,this.media.loadingState===p["default"].LOADED&&(this._currentTime=this.media.el.currentTime),this._cachedPlaying=t,r.next=8,i["default"].awrap(this.media.load("".concat(e,"#t=").concat(this._currentTime)));case 8:if(this._cachedPlaying=null,!t){r.next=11;break}return r.abrupt("return",this.media.play());case 11:return r.abrupt("return",Promise.resolve());case 12:case"end":return r.stop()}},null,this)}},{key:"destroy",value:function(){this._breakpointDetect.destroy(),(0,u["default"])((0,l["default"])(t.prototype),"destroy",this).call(this)}},{key:"src",get:function(){return this._src}}]),t}(h["default"]);r["default"]=y},{"../../constants/LoadingStates":140,"../../plugins/Plugin":151,"./BreakpointDetect":159,"./BreakpointDetectAnim":160,"@babel/runtime/helpers/classCallCheck":10,"@babel/runtime/helpers/createClass":12,"@babel/runtime/helpers/get":13,"@babel/runtime/helpers/getPrototypeOf":14,"@babel/runtime/helpers/inherits":15,"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/possibleConstructorReturn":22,"@babel/runtime/regenerator":29,"@marcom/ac-console/log":3,"@marcom/ac-console/warn":4}],162:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var n={S:"small",M:"medium",L:"large",X:"xlarge"};r["default"]=n},{}],163:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var n={small:0,medium:570,large:780,xlarge:1280};r["default"]=n},{}],164:[function(e,t,r){"use strict";function n(e,t,r,n){var i=r[0].toUpperCase()+r.slice(1),o=e[s+i];if(void 0!==o)switch((0,a["default"])(n)){case"boolean":return"false"!==o;case"object":return JSON.parse(o);case"number":return Number(o);default:return o}else if(void 0!==t[r])return t[r];return n}var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n;var a=i(e("@babel/runtime/helpers/typeof")),s="inlineMedia"},{"@babel/runtime/helpers/interopRequireDefault":16,"@babel/runtime/helpers/typeof":27}],165:[function(e,t,r){"use strict";t.exports={lerp:function(e,t,r){return t+(r-t)*e},map:function(e,t,r,n,i){return n+(i-n)*(e-t)/(r-t)},mapClamp:function(e,t,r,n,i){var a=n+(i-n)*(e-t)/(r-t);return Math.max(n,Math.min(i,a))},norm:function(e,t,r){return(e-t)/(r-t)},clamp:function(e,t,r){return Math.max(t,Math.min(r,e))},randFloat:function(e,t){return Math.random()*(t-e)+e},randInt:function(e,t){return Math.floor(Math.random()*(t-e)+e)}}},{}],166:[function(e,t,r){"use strict";t.exports={browser:{safari:!1,chrome:!1,firefox:!1,ie:!1,opera:!1,android:!1,edge:!1,version:{string:"",major:0,minor:0,patch:0,documentMode:!1}},os:{osx:!1,ios:!1,android:!1,windows:!1,linux:!1,fireos:!1,chromeos:!1,version:{string:"",major:0,minor:0,patch:0}}}},{}],167:[function(e,t,r){"use strict";t.exports={browser:[{name:"edge",userAgent:"Edge",version:["rv","Edge"],test:function(e){return e.ua.indexOf("Edge")>-1||"Mozilla/5.0 (Windows NT 10.0; Win64; x64)"===e.ua}},{name:"chrome",userAgent:"Chrome"},{name:"firefox",test:function(e){return e.ua.indexOf("Firefox")>-1&&e.ua.indexOf("Opera")===-1},version:"Firefox"},{name:"android",userAgent:"Android"},{name:"safari",test:function(e){return e.ua.indexOf("Safari")>-1&&e.vendor.indexOf("Apple")>-1},version:"Version"},{name:"ie",test:function(e){return e.ua.indexOf("IE")>-1||e.ua.indexOf("Trident")>-1},version:["MSIE","rv"],parseDocumentMode:function(){var e=!1;return document.documentMode&&(e=parseInt(document.documentMode,10)),e}},{name:"opera",userAgent:"Opera",version:["Version","Opera"]}],os:[{name:"windows",test:function(e){return e.ua.indexOf("Windows")>-1},version:"Windows NT"},{name:"osx",userAgent:"Mac",test:function(e){return e.ua.indexOf("Macintosh")>-1}},{name:"ios",test:function(e){return e.ua.indexOf("iPhone")>-1||e.ua.indexOf("iPad")>-1},version:["iPhone OS","CPU OS"]},{name:"linux",userAgent:"Linux",test:function(e){return(e.ua.indexOf("Linux")>-1||e.platform.indexOf("Linux")>-1)&&e.ua.indexOf("Android")===-1}},{name:"fireos",test:function(e){return e.ua.indexOf("Firefox")>-1&&e.ua.indexOf("Mobile")>-1},version:"rv"},{name:"android",userAgent:"Android",test:function(e){return e.ua.indexOf("Android")>-1}},{name:"chromeos",userAgent:"CrOS"}]}},{}],168:[function(e,t,r){"use strict";function n(e){return new RegExp(e+"[a-zA-Z\\s/:]+([0-9_.]+)","i")}function i(e,t){if("function"==typeof e.parseVersion)return e.parseVersion(t);var r=e.version||e.userAgent;"string"==typeof r&&(r=[r]);for(var i,a=r.length,s=0;s<a;s++)if(i=t.match(n(r[s])),i&&i.length>1)return i[1].replace(/_/g,".");return!1}function a(e,t,r){for(var n,a,s=e.length,o=0;o<s;o++)if("function"==typeof e[o].test?e[o].test(r)===!0&&(n=e[o].name):r.ua.indexOf(e[o].userAgent)>-1&&(n=e[o].name),n){if(t[n]=!0,a=i(e[o],r.ua),"string"==typeof a){var l=a.split(".");t.version.string=a,l&&l.length>0&&(t.version.major=parseInt(l[0]||0),t.version.minor=parseInt(l[1]||0),t.version.patch=parseInt(l[2]||0))}else"edge"===n&&(t.version.string="12.0.0",t.version.major="12",t.version.minor="0",t.version.patch="0");return"function"==typeof e[o].parseDocumentMode&&(t.version.documentMode=e[o].parseDocumentMode()),t}return t}function s(e){var t={};return t.browser=a(l.browser,o.browser,e),t.os=a(l.os,o.os,e),t}var o=e("./defaults"),l=e("./dictionary");t.exports=s},{"./defaults":166,"./dictionary":167}],169:[function(e,t,r){"use strict";var n={ua:window.navigator.userAgent,platform:window.navigator.platform,vendor:window.navigator.vendor};t.exports=e("./parseUserAgent")(n)},{"./parseUserAgent":168}],170:[function(e,t,r){arguments[4][50][0].apply(r,arguments)},{dup:50}],171:[function(e,t,r){arguments[4][51][0].apply(r,arguments)},{"./sharedRAFEmitterIDGeneratorInstance":176,"./sharedRAFExecutorInstance":177,"@marcom/ac-event-emitter-micro":5,dup:51}],172:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{"@marcom/ac-event-emitter-micro/EventEmitterMicro":6,dup:52}],173:[function(e,t,r){arguments[4][53][0].apply(r,arguments)},{"./SingleCallRAFEmitter":175,dup:53}],174:[function(e,t,r){arguments[4][54][0].apply(r,arguments)},{"./RAFInterface":173,dup:54}],175:[function(e,t,r){arguments[4][55][0].apply(r,arguments)},{"./RAFEmitter":171,dup:55}],176:[function(e,t,r){arguments[4][59][0].apply(r,arguments)},{"../.release-info.js":170,"@marcom/ac-shared-instance":46,dup:59}],177:[function(e,t,r){arguments[4][60][0].apply(r,arguments)},{"../.release-info.js":170,"./RAFExecutor":172,"@marcom/ac-shared-instance":46,dup:60}],178:[function(e,t,r){arguments[4][61][0].apply(r,arguments)},{"./RAFInterfaceController":174,dup:61}],179:[function(e,t,r){"use strict";function n(e,t){i.call(this),this._id=e||s.ID,this._options=Object.assign({},s.OPTIONS,t),this._allowDOMEventDispatch=!1,this._allowElementStateData=!1,this._options.removeNamespace="boolean"!=typeof this._options.removeNamespace||this._options.removeNamespace,this._el=this._initViewportEl(this._id),this._resizing=!1,this._mediaQueryLists={resolution:{retina:window.matchMedia(u.RETINA)},orientation:{portrait:window.matchMedia(u.PORTRAIT),landscape:window.matchMedia(u.LANDSCAPE)}},this._viewport=this._getViewport(this._options.removeNamespace),this._retina=this._getRetina(this._mediaQueryLists.resolution.retina),this._orientation=this._initOrientation(),this._addListeners(),this._updateElementStateData()}var i=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,a=e("@marcom/ac-raf-emitter/update"),s={ID:"viewport-emitter",OPTIONS:{removeNamespace:!0}},o={DOM_DISPATCH:"data-viewport-emitter-dispatch",STATE:"data-viewport-emitter-state"},l="::before",u={RETINA:"only screen and (-webkit-min-device-pixel-ratio: 1.5), screen and (min-resolution: 1.5dppx), screen and (min-resolution: 144dpi)",PORTRAIT:"only screen and (orientation: portrait)",LANDSCAPE:"only screen and (orientation: landscape)"},c={any:"change:any",orientation:"change:orientation",retina:"change:retina",viewport:"change:viewport"};Object.defineProperty(n,"DOM_DISPATCH_ATTRIBUTE",{get:function(){return o.DOM_DISPATCH}}),Object.defineProperty(n,"DOM_STATE_ATTRIBUTE",{get:function(){return o.STATE}});var h=n.prototype=Object.create(i.prototype);Object.defineProperty(h,"id",{get:function(){return this._id}}),Object.defineProperty(h,"element",{get:function(){return this._el}}),Object.defineProperty(h,"mediaQueryLists",{get:function(){return this._mediaQueryLists}}),Object.defineProperty(h,"viewport",{get:function(){return this._viewport}}),Object.defineProperty(h,"retina",{get:function(){return this._retina}}),Object.defineProperty(h,"orientation",{get:function(){return this._orientation}}),Object.defineProperty(h,"hasDomDispatch",{get:function(){return this._allowDOMEventDispatch}}),h.destroy=function(){this._removeListeners();for(var e in this._options)this._options[e]=null;for(var t in this._mediaQueryLists){var r=this._mediaQueryLists[t];for(var n in r)r[n]=null}this._id=null,this._el=null,this._viewport=null,this._retina=null,this._orientation=null,i.prototype.destroy.call(this)},h._initViewportEl=function(e){var t=document.getElementById(e);return t||(t=document.createElement("div"),t.id=e,t=document.body.appendChild(t)),t.hasAttribute(o.DOM_DISPATCH)||(t.setAttribute(o.DOM_DISPATCH,""),this._allowDOMEventDispatch=!0),t.hasAttribute(o.STATE)||(this._allowElementStateData=!0),t},h._dispatch=function(e,t){var r={viewport:this._viewport,orientation:this._orientation,retina:this._retina};if(this._allowDOMEventDispatch){var n=new CustomEvent(e,{detail:t}),i=new CustomEvent(c.any,{detail:r});this._el.dispatchEvent(n),this._el.dispatchEvent(i)}this.trigger(e,t),this.trigger(c.any,r)},h._addListeners=function(){this._onOrientationChange=this._onOrientationChange.bind(this),this._onRetinaChange=this._onRetinaChange.bind(this),this._onViewportChange=this._onViewportChange.bind(this),this._onViewportChangeUpdate=this._onViewportChangeUpdate.bind(this),this._mediaQueryLists.orientation.portrait.addListener(this._onOrientationChange),this._mediaQueryLists.orientation.landscape.addListener(this._onOrientationChange),this._mediaQueryLists.resolution.retina.addListener(this._onRetinaChange),window.addEventListener("resize",this._onViewportChange)},h._removeListeners=function(){this._mediaQueryLists.orientation.portrait.removeListener(this._onOrientationChange),this._mediaQueryLists.orientation.landscape.removeListener(this._onOrientationChange),this._mediaQueryLists.resolution.retina.removeListener(this._onRetinaChange),window.removeEventListener("resize",this._onViewportChange)},h._updateElementStateData=function(){if(this._allowElementStateData){var e=JSON.stringify({viewport:this._viewport,orientation:this._orientation,retina:this._retina});this._el.setAttribute(o.STATE,e)}},h._getViewport=function(e){var t=window.getComputedStyle(this._el,l).content;return t?(t=t.replace(/["']/g,""),e?t.split(":").pop():t):null},h._getRetina=function(e){return e.matches},h._getOrientation=function(e){var t=this._orientation;if(e.matches){var r=/portrait|landscape/;return e.media.match(r)[0]}return t},h._initOrientation=function(){var e=this._getOrientation(this._mediaQueryLists.orientation.portrait);return e?e:this._getOrientation(this._mediaQueryLists.orientation.landscape)},h._onViewportChange=function(){this._resizing||(this._resizing=!0,a(this._onViewportChangeUpdate))},h._onViewportChangeUpdate=function(){var e=this._viewport;if(this._viewport=this._getViewport(this._options.removeNamespace),e!==this._viewport){var t={from:e,to:this._viewport};this._updateElementStateData(),this._dispatch(c.viewport,t)}this._resizing=!1},h._onRetinaChange=function(e){var t=this._retina;if(this._retina=this._getRetina(e),t!==this._retina){var r={from:t,to:this._retina};this._updateElementStateData(),this._dispatch(c.retina,r)}},h._onOrientationChange=function(e){var t=this._orientation;if(this._orientation=this._getOrientation(e),t!==this._orientation){var r={from:t,to:this._orientation};this._updateElementStateData(),this._dispatch(c.orientation,r)}},t.exports=n},{"@marcom/ac-event-emitter-micro":5,"@marcom/ac-raf-emitter/update":178}],180:[function(e,t,r){"use strict";var n=e("./ViewportEmitter");t.exports=new n},{"./ViewportEmitter":179}],181:[function(e,t,r){function n(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=n},{}],182:[function(e,t,r){function n(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[4],s=t[5],o=t[6],l=t[7],u=t[8],c=t[9],h=t[10],m=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+u*n,e[5]=s*i+c*n,e[6]=o*i+h*n,e[7]=l*i+m*n,e[8]=u*i-a*n,e[9]=c*i-s*n,e[10]=h*i-o*n,e[11]=m*i-l*n,e}t.exports=n},{}],183:[function(e,t,r){function n(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],s=t[1],o=t[2],l=t[3],u=t[8],c=t[9],h=t[10],m=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-u*n,e[1]=s*i-c*n,e[2]=o*i-h*n,e[3]=l*i-m*n,e[8]=a*n+u*i,e[9]=s*n+c*i,e[10]=o*n+h*i,e[11]=l*n+m*i,e}t.exports=n},{}],184:[function(e,t,r){function n(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],s=t[1],o=t[2],l=t[3],u=t[4],c=t[5],h=t[6],m=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+u*n,e[1]=s*i+c*n,e[2]=o*i+h*n,e[3]=l*i+m*n,e[4]=u*i-a*n,e[5]=c*i-s*n,e[6]=h*i-o*n,e[7]=m*i-l*n,e}t.exports=n},{}],185:[function(e,t,r){function n(e,t,r){var n=r[0],i=r[1],a=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}t.exports=n},{}],186:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){
return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=e("../namespace"),f=e("@marcom/anim-system/Model/AnimSystemModel"),p=e("@marcom/bubble-gum/BaseComponent"),d=(e("@marcom/viewport-emitter"),e("../utils/Features")),b=function(e){function t(e){var r;return i(this,t),r=o(this,l(t).call(this,e)),r.onAnchorClick=r.onAnchorClick.bind(u(r)),r.onInteraction=r.onInteraction.bind(u(r)),r}return c(t,e),s(t,[{key:"mounted",value:function(){var e=this;this.elMain=document.documentElement.querySelector("#".concat(m,"overview")),this.elContainer=document.createElement("div"),this.elContainer.classList.add("".concat(m,"button-partner-compare-container")),this.el.append(this.elContainer),this.elAnimation=document.createElement("div"),this.elAnimation.classList.add("".concat(m,"button-partner-compare-animation")),this.elContainer.append(this.elAnimation);var t=Array.from(this.el.querySelectorAll(".".concat(m,"button-partner-compare")));this.elAnchorButton=t[0],this.elAnchorTarget=document.querySelector(this.elAnchorButton.hash);for(var r=1;r<t.length;r++)t[r].remove();this.elAnimation.append(this.elAnchorButton),this.elAnchorButton.classList.add("".concat(m,"button-partner-compare-enhanced")),this.addKeyframe({el:this.elAnimation,start:"a0b - 100vh + 100h",end:"a1b-125vh",anchors:[".".concat(m,"tile-headline-productive"),".".concat(m,"section-tiles")],cssClass:"".concat(m,"show"),toggle:!0}),this.addKeyframe({el:this.elAnimation,start:"a0t - 200vh",end:"a1b - 50vh",anchors:[".".concat(m,"tile-headline-productive"),".".concat(m,"section-tiles")],cssClass:"".concat(m,"displayed"),toggle:!0}),this.elAnchorButton.addEventListener("click",this.onAnchorClick),this.tileEngageComponents=this.gum.getComponentsOfType("TileEngage",this.el),this.timeGroup=this.anim.createTimeGroup(),this.timeGroup.name="Compare Anchor Scroll",this.timeGroup.on(f.EVENTS.ON_TIMELINE_COMPLETE,function(){e.removeInteractionListeners(),e.enableVideoTriggers()})}},{key:"onAnchorClick",value:function(e){var t=this;e.preventDefault(),this.tileEngageComponents.forEach(function(e){e.skip()}),this.keyframe&&this.keyframe.remove(),this.startScroll=document.documentElement.scrollTop,this.endScroll=this.elAnchorTarget.offsetTop,this.speed=Math.max(.25,2e-4*(this.endScroll-this.startScroll));var r=this.speed,n=1.1*this.speed;this.keyframe=this.timeGroup.addKeyframe(this.el,{start:0,end:r,scroll:[0,1],event:"scroll",easeFunction:"easeOutQuint",breakpointMask:"S"}),this.keyframe=this.timeGroup.addKeyframe(this.el,{start:0,end:n,scroll:[0,1],event:"scroll",easeFunction:"easeOutQuint",breakpointMask:"MLX"}),this.keyframe.controller.on("scroll",function(e){document.documentElement.scrollTop=t.startScroll+(t.endScroll-t.startScroll)*e.tweenProps.scroll.current}),this.timeGroup.restart(),this.disableVideoTriggers(),this.addInteractionListeners()}},{key:"enableVideoTriggers",value:function(){var e=this;document.documentElement.classList.remove("animating-scroll"),setTimeout(function(){e.anim.forceUpdate()},1)}},{key:"disableVideoTriggers",value:function(){var e=this;document.documentElement.classList.add("animating-scroll"),setTimeout(function(){e.anim.forceUpdate()},1)}},{key:"addInteractionListeners",value:function(){var e=this;t.INTERACTION_EVENTS.forEach(function(t){document.documentElement.addEventListener(t,e.onInteraction)})}},{key:"removeInteractionListeners",value:function(){var e=this;t.INTERACTION_EVENTS.forEach(function(t){document.documentElement.removeEventListener(t,e.onInteraction)})}},{key:"onInteraction",value:function(){this.cancelAnimation()}},{key:"cancelAnimation",value:function(){this.timeGroup.pause(),this.removeInteractionListeners(),this.enableVideoTriggers()}}],[{key:"IS_SUPPORTED",value:function(){return d.STICKY}}]),t}(p);b.INTERACTION_EVENTS=["touchstart","wheel","mousedown","pointerdown"],t.exports=b},{"../namespace":200,"../utils/Features":204,"@marcom/anim-system/Model/AnimSystemModel":72,"@marcom/bubble-gum/BaseComponent":133,"@marcom/viewport-emitter":180}],187:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=e("../namespace"),f=e("@marcom/bubble-gum/BaseComponent"),p=(e("@marcom/viewport-emitter"),e("../utils/Features"),function(e){function t(e){var r;return i(this,t),r=o(this,l(t).call(this,e)),r.isEnhanced=null,r.currentIdA=null,r.currentIdB=null,r.currentIndexA=null,r.currentIndexB=null,r.onSelectChange=r.onSelectChange.bind(u(r)),r}return c(t,e),s(t,[{key:"mounted",value:function(){var e=this;this.gridItems={},t.DEVICE_IDS.forEach(function(t){e.gridItems[t]={id:t,prefix:t==="".concat(m,"ipad")?"ipad":t.substring(t.indexOf("-")+1),items:Array.from(e.el.querySelectorAll(".".concat(t)))}}),this.elSelectA=this.el.querySelector('[data-compare-select="0"] .'.concat(m,"selector-dropdown")),this.elSelectB=this.el.querySelector('[data-compare-select="1"] .'.concat(m,"selector-dropdown")),this.elSelectA.addEventListener("input",this.onSelectChange),this.elSelectB.addEventListener("input",this.onSelectChange),this.checkPageMetrics(this.pageMetrics)}},{key:"onSelectChange",value:function(e){this.checkSelects(e.target)}},{key:"checkSelects",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.elSelectA.selectedIndex===this.elSelectB.selectedIndex){var r,n;e===this.elSelectA?(r=this.elSelectA,n=this.elSelectB,n.selectedIndex=this.currentIndexA):e===this.elSelectB?(r=this.elSelectB,n=this.elSelectA,n.selectedIndex=this.currentIndexB):(r=this.elSelectA,n=this.elSelectB,n.selectedIndex=1)}var i=this.elSelectA.selectedOptions[0].id,a=this.elSelectB.selectedOptions[0].id;this.currentIndexA=this.elSelectA.selectedIndex,this.currentIndexB=this.elSelectB.selectedIndex,this.currentIdA&&this.hideDevice(this.currentIdA),this.currentIdB&&this.hideDevice(this.currentIdB),this.currentIdA=i,this.currentIdB=a,this.showDevice(this.currentIdA),this.showDevice(this.currentIdB);var s='"compare-sel-0 compare-sel-1"',o=this.gridItems[this.currentIdA].prefix,l=this.gridItems[this.currentIdB].prefix;t.FEATURE_IDS.forEach(function(e){s+=' "'.concat(o,"-").concat(e," ").concat(l,"-").concat(e,'"')}),this.el.style.gridTemplateAreas=s}},{key:"hideDevice",value:function(e){this.gridItems[e].items.forEach(function(e){e.style.display="none"})}},{key:"showDevice",value:function(e){this.gridItems[e].items.forEach(function(e){e.style.display="block"})}},{key:"enhance",value:function(){var e=this;this.isEnhanced=!0,this.el.classList.add("".concat(m,"enhanced")),t.DEVICE_IDS.forEach(function(t){e.hideDevice(t)}),this.checkSelects()}},{key:"diminish",value:function(){var e=this;this.isEnhanced=!1,this.el.classList.remove("".concat(m,"enhanced")),this.el.style.gridTemplateAreas="",t.DEVICE_IDS.forEach(function(t){e.showDevice(t)})}},{key:"onBreakpointChange",value:function(e){this.checkPageMetrics(e)}},{key:"checkPageMetrics",value:function(e){null!==this.isEnhanced&&this.isEnhanced!==!1||"S"!==e.breakpoint?null!==this.isEnhanced&&this.isEnhanced!==!0||"S"===e.breakpoint||this.diminish():this.enhance()}}],[{key:"IS_SUPPORTED",value:function(){return!0}}]),t}(f));p.DEVICE_IDS=["".concat(m,"ipad-pro"),"".concat(m,"ipad-air"),"".concat(m,"ipad"),"".concat(m,"ipad-mini")],p.FEATURE_IDS=["header","description","cta","display","camera","chip","keyboard","pencil","usb"],t.exports=p},{"../namespace":200,"../utils/Features":204,"@marcom/bubble-gum/BaseComponent":133,"@marcom/viewport-emitter":180}],188:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=e("../namespace"),f=e("@marcom/bubble-gum/BaseComponent"),p=(e("@marcom/viewport-emitter"),e("@marcom/ac-progressive-image-loader/ProgressiveImageLoader")),d=e("./spritesheet/SpriteSheet"),b=e("./spritesheet/SpriteSheetAnimation"),y=e("../utils/Features"),v=function(e){function t(e){var r;return i(this,t),r=o(this,l(t).call(this,e)),r.restOfPageLoading=!1,r.isDestroyed=!1,r.onImageLoaderHeroImageLoad=r.onImageLoaderHeroImageLoad.bind(u(r)),r.onImageLoaderHeroComplete=r.onImageLoaderHeroComplete.bind(u(r)),r}return c(t,e),s(t,[{key:"mounted",value:function(){var e=this;this.loadOptions={imageAnimate:!0,imageAnimateClass:"".concat(m,"image-animated")},this.loadOptionsTiles={imageAnimate:!1},this.inlineVideo=this.gum.getComponentOfType("InlineVideo",this.el),this.expressionFigure=this.el.querySelector("#".concat(m,"hero-expression")),this.imageLoaderHero=new p({container:document.querySelector(".".concat(m,"section-hero"))}),this.imageLoaderTiles=new p({container:document.querySelector(".".concat(m,"section-tiles"))}),this.imageLoaderPartners=new p({container:document.querySelector(".".concat(m,"section-partners"))}),this.imageLoaderCompare=new p({container:document.querySelector(".".concat(m,"section-compare"))}),this.imageLoaderHero.on("image-load",this.onImageLoaderHeroImageLoad),this.imageLoaderHero.on("complete",this.onImageLoaderHeroComplete),this.imageLoaderHero.load(this.loadOptions),this.globalTimeout=setTimeout(function(){return e.timeout()},1e3*t.TIMEOUT)}},{key:"onImageLoaderHeroImageLoad",value:function(e){e.id==="".concat(m,"hero-expression")&&this.initSpriteSheet(e)}},{key:"onImageLoaderHeroComplete",value:function(){var e=this;clearTimeout(this.globalTimeout),setTimeout(function(){y.REDUCED_MOTION?e.destroy():e.expression.play(),e.loadRestOfPage(),e.anim.forceUpdate({silent:!1,waitForNextUpdate:!1})},500)}},{key:"initSpriteSheet",value:function(e){var t=this.el.querySelector("#".concat(m,"hero-expression")),r=this.getSpriteDimensions(t.dataset.spriteS),n=this.getSpriteDimensions(t.dataset.spriteM),i=this.getSpriteDimensions(t.dataset.spriteL),a={frames:34,viewports:{xsmall:{width:r.width,height:r.height,columns:4},small:{width:r.width,height:r.height,columns:4},medium:{width:n.width,height:n.height,columns:4},large:{width:i.width,height:i.height,columns:4},xlarge:{width:i.width,height:i.height,columns:4}}};this.expression=new b(new d(e,a),this.anim)}},{key:"getSpriteDimensions",value:function(e){var t=e.split("x");return{width:Number(t[0]),height:Number(t[1])}}},{key:"loadRestOfPage",value:function(){var e=this;this.restOfPageLoading||(this.restOfPageLoading=!0,this.imageLoaderTiles.load(this.loadOptionsTiles),this.imageLoaderPartners.load(this.loadOptionsTiles),this.imageLoaderCompare.load(this.loadOptions),y.REDUCED_MOTION?this.anim.forceUpdate({silent:!1,waitForNextUpdate:!1}):this.inlineVideo?this.inlineVideo.media.load().then(function(){e.anim.forceUpdate({silent:!1,waitForNextUpdate:!1})})["catch"](function(){e.anim.forceUpdate({silent:!1,waitForNextUpdate:!1})}):this.anim.forceUpdate({silent:!1,waitForNextUpdate:!1}))}},{key:"timeout",value:function(){this.loadRestOfPage(),this.anim.forceUpdate({silent:!1,waitForNextUpdate:!1})}},{key:"onBreakpointChange",value:function(e){this.destroy()}},{key:"destroy",value:function(){this.isDestroyed||(this.expression.destroy(),this.expressionFigure.classList.remove("".concat(m,"hero-expression")),this.expressionFigure.classList.remove("".concat(m,"image-hero-expression")),this.expressionFigure.classList.add("".concat(m,"hero-expression-lastframe")),this.expressionFigure.classList.add("".concat(m,"image-hero-expression-lastframe")),this.isDestroyed=!0)}}],[{key:"IS_SUPPORTED",value:function(){return y.INLINE_VIDEO}}]),t}(f);v.TIMEOUT=5,t.exports=v},{"../namespace":200,"../utils/Features":204,"./spritesheet/SpriteSheet":197,"./spritesheet/SpriteSheetAnimation":198,"@marcom/ac-progressive-image-loader/ProgressiveImageLoader":32,"@marcom/bubble-gum/BaseComponent":133,"@marcom/viewport-emitter":180}],189:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=e("@marcom/inline-media"),p=n(e("@marcom/inline-media/constants/MediaEvents")),d=n(e("@marcom/inline-media/plugins/viewport-source/ViewportSource")),b=n(e("@marcom/inline-media/plugins/anim/AnimLoad")),y=n(e("../plugins/AnimPlayWithDelay")),v=n(e("../plugins/Hold")),_=n(e("../plugins/Keyframe")),g=e("../namespace"),E=e("@marcom/bubble-gum/BaseComponent"),C=e("@marcom/viewport-emitter"),k=e("../utils/Features"),w=function(e){function t(e){var r;return a(this,t),r=l(this,u(t).call(this,e)),r.onEnterOncePlay=r.onEnterOncePlay.bind(c(r)),r.onPlaybackStateChange=r.onPlaybackStateChange.bind(c(r)),r.onMediaLoadComplete=r.onMediaLoadComplete.bind(c(r)),r.hold=!1,r.keyframe=!1,r}return h(t,e),o(t,[{key:"mounted",value:function(){var e=this;this.el.classList.add("".concat(g,"inline-video-engaged")),this.autoPlay="false"!==this.el.dataset.inlineVideoAutoPlay,this.startFrame=this.el.dataset.inlineVideoStartFrame||!1,this.endFrame=this.el.dataset.inlineVideoEndFrame||!1,this.fadeIn=void 0!==this.el.dataset.inlineVideoFadeIn,this.startDelay="small"!==C.viewport&&(Number(this.el.dataset.inlineVideoStartDelay)||!1);var t,r,n,i;this.el.dataset.inlineVideoAnchor?(t=this.el.dataset.inlineVideoStart||"a0t + 50a0h - 90vh",r=this.el.dataset.inlineVideoEnd||"a0b - 20vh",n={anchors:[this.el.dataset.inlineVideoAnchor],start:"a0t - 200vh",end:"a0b + 100vh",disabledWhen:"animating-scroll"},i={anchors:[this.el.dataset.inlineVideoAnchor],start:t,end:r,disabledWhen:"animating-scroll"},n.name="Load - ".concat(this.el.dataset.inlineVideoAnchor),i.name="Play - ".concat(this.el.dataset.inlineVideoAnchor)):(t=this.el.dataset.inlineVideoStart||"t - 70vh",r=this.el.dataset.inlineVideoEnd||"b - 20vh",n={start:"t - 200vh",end:"b + 100vh",disabledWhen:"animating-scroll"},i={start:t,end:r,onEnterOnce:this.onEnterOncePlay,disabledWhen:"animating-scroll"});var a=this.el,s=this.el.querySelector(".".concat(g,"video")),o={el:s,container:a,anim:this.gum.anim,loadKeyframe:n,playDelay:this.startDelay||0};this.autoPlay?(o.playKeyframe=i,o.plugins=[d["default"],v["default"],_["default"],b["default"],y["default"]]):o.plugins=[d["default"],v["default"],_["default"],b["default"]],this.media=new f.Media(o),this.media.on(_["default"].EVENTS.KEYFRAME,function(){return e.trigger(_["default"].EVENTS.KEYFRAME)}),this.endFrame&&this.media.on(p["default"].PLAYBACK_STATE_CHANGE,this.onPlaybackStateChange),this.fadeIn&&this.media.on(p["default"].MEDIA_LOAD_COMPLETE,this.onMediaLoadComplete),this.playPlugin=this.media.pluginMap.get(y["default"]),this.playPlugin.playKeyframe.controller.on("inline-media-play-kf:enter",this.onEnterOncePlay),this.loadPlugin=this.media.pluginMap.get(b["default"]),this.holdPlugin=this.media.pluginMap.get(v["default"]),this.hold&&(this.holdPlugin.hold=this.hold),this.keyframePlugin=this.media.pluginMap.get(_["default"]),this.keyframe&&(this.keyframePlugin.keyframe=this.keyframe)}},{key:"play",value:function(){var e=this.media.play();void 0!==e&&e.then(function(){})["catch"](function(e){})}},{key:"resume",value:function(){this.media.play()}},{key:"setHold",value:function(e){this.media?this.media.hold=e:this.hold=e}},{key:"setKeyframe",value:function(e){this.media?this.media.keyframe=e:this.keyframe=e}},{key:"onPlaybackStateChange",value:function(){switch(this.media.playbackState){case"ended":this.el.classList.remove(this.startFrame),this.el.classList.add(this.endFrame)}}},{key:"onMediaLoadComplete",value:function(){this.el.classList.add("".concat(g,"fade-in"))}},{key:"onEnterOncePlay",value:function(){this.playPlugin.playKeyframe.remove()}}],[{key:"IS_SUPPORTED",value:function(){return!k.REDUCED_MOTION&&k.INLINE_VIDEO}}]),t}(E);w.EVENTS={COMPLETE:"inline-video-complete"},t.exports=w},{"../namespace":200,"../plugins/AnimPlayWithDelay":201,"../plugins/Hold":202,"../plugins/Keyframe":203,"../utils/Features":204,"@marcom/bubble-gum/BaseComponent":133,"@marcom/inline-media":144,"@marcom/inline-media/constants/MediaEvents":141,"@marcom/inline-media/plugins/anim/AnimLoad":152,"@marcom/inline-media/plugins/viewport-source/ViewportSource":161,"@marcom/viewport-emitter":180}],190:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=e("../namespace"),f=e("@marcom/bubble-gum/BaseComponent"),p=e("../utils/Features"),d=function(e){function t(e){return i(this,t),o(this,u(t).call(this,e))}return c(t,e),s(t,[{key:"mounted",value:function(){this.parallaxEl=this.el.querySelector(".".concat(m,"tile-image-overlay"));var e=this.anim.getControllerForTarget(this.parallaxEl);this.parallaxKF=e._allKeyframes[0],this.parallaxKF.overwriteProps({y:[-20,20],rotation:[-5,5],ease:.3})}}],[{key:"IS_SUPPORTED",value:function(){return!p.REDUCED_MOTION}}]),t}(f);t.exports=d},{"../namespace":200,"../utils/Features":204,"@marcom/bubble-gum/BaseComponent":133}],191:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=e("../namespace"),f=e("@marcom/bubble-gum/BaseComponent"),p=e("../utils/Features"),d=function(e){function t(e){return i(this,t),o(this,u(t).call(this,e))}return c(t,e),s(t,[{key:"mounted",value:function(){this.parallaxEl=this.el.querySelector(".".concat(m,"tile-image-overlay"));var e=this.anim.getControllerForTarget(this.parallaxEl);this.parallaxKF=e._allKeyframes[0],this.parallaxKF.overwriteProps({start:"a0t - 50vh",end:"a0t + 40vh",y:[0,0],scale:[1.1,.95],rotation:[-3,3]})}}],[{key:"IS_SUPPORTED",value:function(){return!p.REDUCED_MOTION}}]),t}(f);t.exports=d},{"../namespace":200,"../utils/Features":204,"@marcom/bubble-gum/BaseComponent":133}],192:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=e("../namespace"),f=e("@marcom/bubble-gum/BaseComponent"),p=e("../utils/Features"),d=function(e){function t(e){return i(this,t),o(this,u(t).call(this,e))}return c(t,e),s(t,[{key:"mounted",value:function(){this.parallaxEl=this.el.querySelector(".".concat(m,"tile-image-overlay"));var e=this.anim.getControllerForTarget(this.parallaxEl);this.parallaxKF=e._allKeyframes[0],this.parallaxKF.overwriteProps({start:"a0t - 50vh",end:"a0t + 40vh",y:[-5,5],rotation:[-5.5,4.5],ease:.3,easingFunction:"easeInOutQuart"})}}],[{key:"IS_SUPPORTED",value:function(){return!p.REDUCED_MOTION}}]),t}(f);t.exports=d},{"../namespace":200,"../utils/Features":204,"@marcom/bubble-gum/BaseComponent":133}],193:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=e("../namespace"),f=e("@marcom/bubble-gum/BaseComponent"),p=function(e){function t(e){var r;return i(this,t),r=o(this,u(t).call(this,e)),r.start=r.el.dataset.tileEngageStart||"t-100vh",r.skipped=!1,r}return c(t,e),s(t,[{key:"mounted",value:function(){var e=this,t=this.gum.getComponentOfType("Hero"),r=t.imageLoaderTiles,n=t.imageLoaderPartners,i=this.el.querySelector(".".concat(m,"tile-image"));r.on("image-load",function(t){i===t&&e.el.classList.add("".concat(m,"loaded"))}),n.on("image-load",function(t){i===t&&e.el.classList.add("".concat(m,"loaded"))});var a=this.el.getBoundingClientRect(),s=Math.max(document.documentElement.clientHeight,window.innerHeight),o=!(a.bottom<0||a.top-s>=0);o?this.skipped=!0:(this.el.classList.add("".concat(m,"engageable")),this.kf=this.addKeyframe({start:this.start,cssClass:"".concat(m,"engaged"),snapAtCreation:!0}))}},{key:"skip",value:function(){this.skipped||(this.kf.remove(),this.el.classList.remove("".concat(m,"engageable")),this.skipped=!0)}}],[{key:"IS_SUPPORTED",value:function(){return!0}}]),t}(f);t.exports=p},{"../namespace":200,"@marcom/bubble-gum/BaseComponent":133}],194:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=e("../namespace"),f=e("@marcom/bubble-gum/BaseComponent"),p=e("../utils/Features"),d=function(e){function t(e){return i(this,t),o(this,u(t).call(this,e))}return c(t,e),s(t,[{key:"mounted",value:function(){this.parallaxEl=this.el.querySelector(".".concat(m,"tile-image-overlay"));var e=this.anim.getControllerForTarget(this.parallaxEl);this.parallaxKF=e._allKeyframes[0],this.parallaxKF.overwriteProps({y:[0,0],rotation:[-5,5],ease:.3})}}],[{key:"IS_SUPPORTED",value:function(){return!p.REDUCED_MOTION}}]),t}(f);t.exports=d},{"../namespace":200,"../utils/Features":204,"@marcom/bubble-gum/BaseComponent":133}],195:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=e("../namespace"),f=e("@marcom/bubble-gum/BaseComponent"),p=e("../utils/Features"),d=function(e){function t(e){return i(this,t),o(this,u(t).call(this,e))}return c(t,e),s(t,[{key:"mounted",value:function(){this.parallaxEl=this.el.querySelector(".".concat(m,"tile-image-overlay"));var e=this.anim.getControllerForTarget(this.parallaxEl);this.parallaxKF=e._allKeyframes[0],this.parallaxKF.overwriteProps({start:"a0t - 50vh",end:"a0t + 40vh",y:[10,-25],rotation:[8,-3]})}}],[{key:"IS_SUPPORTED",value:function(){return!p.REDUCED_MOTION}}]),t}(f);t.exports=d},{"../namespace":200,"../utils/Features":204,"@marcom/bubble-gum/BaseComponent":133}],196:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){
return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=e("../namespace"),f=e("@marcom/bubble-gum/BaseComponent"),p=e("../utils/Features"),d=function(e){function t(e){return i(this,t),o(this,u(t).call(this,e))}return c(t,e),s(t,[{key:"mounted",value:function(){this.parallaxEl=this.el.querySelector(".".concat(m,"tile-image-overlay"));var e=this.anim.getControllerForTarget(this.parallaxEl);this.parallaxKF=e._allKeyframes[0],this.parallaxKF.overwriteProps({start:"a0t - 50vh",end:"a0t + 40vh",y:["15","-10"],ease:"0.8",easeFunction:"easeOutQuad",x:["-15","10"]})}}],[{key:"IS_SUPPORTED",value:function(){return!p.REDUCED_MOTION}}]),t}(f);t.exports=d},{"../namespace":200,"../utils/Features":204,"@marcom/bubble-gum/BaseComponent":133}],197:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=e("@marcom/viewport-emitter"),o=function(){function e(t,r){n(this,e),this.width=r.viewports[s.viewport].width,this.height=r.viewports[s.viewport].height,this.columns=r.viewports[s.viewport].columns,this.frames=r.frames,this.figure=t,this.figure.style.width="".concat(this.width,"px"),this.figure.style.height="".concat(this.height,"px"),this.figure.style.display="block",this.duration=30/this.frames}return a(e,[{key:"setFrame",value:function(e){e=Math.max(0,Math.min(e,this.frames));var t=e%this.columns*this.width,r=Math.floor(e/this.columns)*this.height;this.figure.style.backgroundPosition="".concat(-t,"px ").concat(-r,"px")}},{key:"destroy",value:function(){this.figure.style.width=null,this.figure.style.height=null,this.figure.style.backgroundPosition=null,this.figure=null}}]),e}();t.exports=o},{"@marcom/viewport-emitter":180}],198:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=function(){function e(t,r){var i=this;n(this,e),this.spriteSheet=t,this.timeline=r.createTimeGroup(),this.timeline.name="Sprite Sheet Animation",this.tween={frame:0},this.kf=this.timeline.addKeyframe(this.tween,{start:0,end:this.spriteSheet.duration,frame:[0,this.spriteSheet.frames-1],event:"frameUpdate"}),this.timeline.keyframeControllers[0].on("frameUpdate",function(){var e=Math.floor(i.tween.frame);i.spriteSheet.setFrame(e)})}return a(e,[{key:"play",value:function(){this.timeline&&this.timeline.play()}},{key:"destroy",value:function(){this.timeline.remove(),this.spriteSheet.destroy(),this.timeline=this.tween=this.kf=this.spriteSheet=null}}]),e}();t.exports=s},{}],199:[function(e,t,r){"use strict";var n=e("./namespace"),i=e("@marcom/bubble-gum"),a=e("@marcom/bubble-gum/ComponentMap"),s=e("@marcom/anim-system");s.model.BREAKPOINTS=[{name:"S",mediaQuery:"only screen and (max-width: 734px)"},{name:"M",mediaQuery:"only screen and (max-width: 1068px)"},{name:"L",mediaQuery:"only screen and (min-width: 1069px)"}];var o={initialize:function(){a.Hero=e("./components/HeroComponent"),a.InlineVideo=e("./components/InlineVideoComponent"),a.CompareSelect=e("./components/CompareSelectComponent"),a.CompareAnchor=e("./components/CompareAnchorComponent"),a.TileEngage=e("./components/TileEngageComponent"),a.TileCreate=e("./components/TileCreateComponent"),a.TileArcade=e("./components/TileArcadeComponent"),a.TileFiles=e("./components/TileFilesComponent"),a.TilePhoto=e("./components/TilePhotoComponent"),a.TileAppleTV=e("./components/TileAppleTVComponent"),a.TilePower=e("./components/TilePowerComponent"),new i(document.querySelector("#".concat(n,"overview")))}};t.exports=o.initialize()},{"./components/CompareAnchorComponent":186,"./components/CompareSelectComponent":187,"./components/HeroComponent":188,"./components/InlineVideoComponent":189,"./components/TileAppleTVComponent":190,"./components/TileArcadeComponent":191,"./components/TileCreateComponent":192,"./components/TileEngageComponent":193,"./components/TileFilesComponent":194,"./components/TilePhotoComponent":195,"./components/TilePowerComponent":196,"./namespace":200,"@marcom/anim-system":65,"@marcom/bubble-gum":134,"@marcom/bubble-gum/ComponentMap":135}],200:[function(e,t,r){"use strict";var n=function(){return"sk_"};t.exports=n()},{}],201:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var f=n(e("@marcom/inline-media/plugins/anim/AnimPlay")),p=function(e){function t(e){return a(this,t),l(this,c(t).call(this,e))}return h(t,e),o(t,[{key:"_onPlayKeyframeEnter",value:function(e){var t=this;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._inFrame=!0,this._paused){e.next=14;break}if(this._loaded){e.next=6;break}return e.next=5,regeneratorRuntime.awrap(this.media.load()["catch"](function(e){}));case 5:this._loaded=!0;case 6:if(!this._inFrame){e.next=14;break}return e.prev=7,e.next=10,regeneratorRuntime.awrap(new Promise(function(e){return setTimeout(function(){t.media.play().then(e)},1e3*t.options.playDelay)})["catch"](function(e){}));case 10:e.next=14;break;case 12:e.prev=12,e.t0=e["catch"](7);case 14:case"end":return e.stop()}},null,this,[[7,12]])}}]),t}(f["default"]),d=p;r["default"]=d},{"@marcom/inline-media/plugins/anim/AnimPlay":153}],202:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=void 0;var m=e("@marcom/inline-media"),f=function(e){function t(e){var r;return i(this,t),r=o(this,u(t).call(this,e)),r._isHolding=!1,r._hold=!1,r._initialize(),r}return c(t,e),s(t,[{key:"_initialize",value:function(){var e=this;this.media.el.addEventListener("timeupdate",function(t){e._hold&&e.media.el.currentTime>=e._hold&&(e._isHolding=!0,e.media.el.pause())})}},{key:"hold",set:function(e){this._hold=e}},{key:"isHolding",get:function(){return this._isHolding}}]),t}(m.Plugin),p=f;r["default"]=p},{"@marcom/inline-media":144}],203:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=e("@marcom/inline-media"),f=function(e){function t(e){var r;return i(this,t),r=o(this,u(t).call(this,e)),r._keyframeReached=!1,r._keyframe=!1,r._initialize(),r}return c(t,e),s(t,[{key:"_initialize",value:function(){var e=this;this.media.el.addEventListener("timeupdate",function(r){!e._keyframeReached&&e._keyframe!==!1&&e.media.el.currentTime>=e._keyframe&&(e._keyframeReached=!0,e.media.trigger(t.EVENTS.KEYFRAME))})}},{key:"keyframe",set:function(e){this._keyframe=e}}]),t}(m.Plugin);f.EVENTS={KEYFRAME:"keyframe"},t.exports=f},{"@marcom/inline-media":144}],204:[function(e,t,r){"use strict";var n=e("../namespace"),i="#".concat(n,"overview"),a=document.documentElement.querySelector(i).classList;t.exports={NO_JS:a.contains("".concat(n,"no-js")),NO_TOUCH:a.contains("no-touch"),REDUCED_MOTION:a.contains("".concat(n,"prefers-reduced-motion")),INLINE_VIDEO:a.contains("".concat(n,"inline-video")),STICKY:!a.contains("no-".concat(n,"sticky-compare"))}},{"../namespace":200}]},{},[199]);